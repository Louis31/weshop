function FSocket(){var e=this;e.ws=null,this.isOpen=!1,this.interval=null,e.sendCount=0,e.getCount=0,e.requestID=1,e.requests={},e.requestHandlers={},e.eventHandlers={}}define("app",["require","marionette"],function(e){var t=e("marionette"),n=new t.Application;return n.addRegions({mainRegion:".js-app-main"}),n.start(),n}),function(e){"function"==typeof module?module.exports=e(this.jQuery||require("jquery")):"function"==typeof define&&define.amd?define("vendor/nprogress",["jquery","core/event"],function(t){return e(t)}):this.NProgress=e(this.jQuery)}(function(e){function t(e,t,n){return t>e?t:e>n?n:e}function n(e){return 100*(-1+e)}function i(e,t,i){var s;return s="translate3d"===o.positionUsing?{transform:"translate3d("+n(e)+"%,0,0)"}:"translate"===o.positionUsing?{transform:"translate("+n(e)+"%,0)"}:{"margin-left":n(e)+"%"},s.transition="all "+t+"ms "+i,s}var s={};s.version="0.1.2";var o=s.settings={minimum:.2*Math.random()+.3,easing:"ease",positionUsing:"",speed:100,trickle:!0,trickleRate:.1,trickleSpeed:800,showSpinner:!0,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};return s.configure=function(t){return e.extend(o,t),this},s.status=null,s.set=function(e){var n=s.isStarted();e=t(e,o.minimum,1),s.status=1===e?null:e;var l=s.render(!n),a=l.find('[role="bar"]'),c=o.speed,r=o.easing;return l[0].offsetWidth,l.queue(function(t){""===o.positionUsing&&(o.positionUsing=s.getPositioningCSS()),a.css(i(e,c,r)),1===e?(l.css({transition:"none",opacity:1}),l[0].offsetWidth,setTimeout(function(){l.css({transition:"all "+c+"ms linear",opacity:0}),setTimeout(function(){s.remove(),t()},c)},c)):setTimeout(t,c)}),this},s.isStarted=function(){return"number"==typeof s.status},s.start=function(){s.status||s.set(0);var e=function(){setTimeout(function(){s.status&&(s.trickle(),e())},o.trickleSpeed)};return o.trickle&&e(),this},s.done=function(e){return e||s.status?(window.NC&&window.NC.trigger("finish"),s.inc(.3+.5*Math.random()).set(1)):this},s.inc=function(e){var n=s.status;return n?("number"!=typeof e&&(e=(1-n)*t(Math.random()*n,.1,.95)),n=t(n+e,0,.994),s.set(n)):s.start()},s.trickle=function(){return s.inc(Math.random()*o.trickleRate)},s.render=function(t){if(s.isRendered())return e("#nprogress");e("html").addClass("nprogress-busy");var i=e("<div id='nprogress'>").html(o.template),l=t?"-100":n(s.status||0);return i.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),o.showSpinner||i.find('[role="spinner"]').remove(),i.appendTo(document.body),i},s.remove=function(){e("html").removeClass("nprogress-busy"),e("#nprogress").remove()},s.isRendered=function(){return e("#nprogress").length>0},s.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"},s}),define("text!templates/design.html",[],function(){return'<div class="app-preview">\n    <div class="app-header"></div>\n    <div class="app-entry">\n        <div class="app-config js-config-region"></div>\n        <div class="app-fields js-fields-region"></div>\n    </div>\n    <div class="js-add-region"></div>\n</div>\n<div class="app-sidebar">\n    <div class="arrow"></div>\n    <div class="app-sidebar-inner js-sidebar-region">\n\n    </div>\n</div>\n<div class="app-actions">\n    <div class="form-actions text-center">\n        <input class="btn btn-primary btn-add" type="submit" value="上 架" data-loading-text="上架...">\n        <input class="btn btn-save" type="submit" value="保存成草稿" data-loading-text="保存成草稿...">\n        <input class="btn btn-preview" type="submit" value="预览效果" data-loading-text="预览效果...">\n    </div>\n</div>\n\n'}),define("text!templates/add_content.html",[],function(){return'<div class="app-add-field">\n    <h4>添加内容</h4>\n    <ul>\n        <li><a class="js-new-field" data-field-type="rich_text">富文本</a></li>\n        <li><a class="js-new-field" data-field-type="goods">商品</a></li>\n        <li><a class="js-new-field" data-field-type="goods_list">商品<br/>列表</a></li>\n        <li><a class="js-new-field" data-field-type="image_ad">图片<br/>广告</a> </li>\n        <li><a class="js-new-field" data-field-type="cube2">魔方</a></li>\n        <li><a class="js-new-field" data-field-type="title">标题</a></li>\n        <li><a class="js-new-field" data-field-type="text_nav">文本<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="nav">图片<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="link">关联<br/>链接</a></li>\n        <li><a class="js-new-field" data-field-type="search">商品<br/>搜索</a></li>\n        <li><a class="js-new-field" data-field-type="showcase">橱窗</a></li>\n        <li><a class="js-new-field" data-field-type="line">辅助线</a></li>\n        <li><a class="js-new-field" data-field-type="white">辅助<br/>空白</a></li>\n        <li><a class="js-new-field" data-field-type="component">自定义<br/>模块</a></li>\n        <li><a class="js-new-field" data-field-type="store">进入<br/>店铺</a></li>\n        <li><a class="js-new-field" data-field-type="tag_list">商品<br/>分组</a></li>\n        <li><a class="js-new-field" data-field-type="audio">语音</a></li>\n    </ul>\n</div>\n'}),define("components/showcase/2.0.0/base/views/show_collection",["require","marionette"],function(e){var t=e("marionette");return t.CollectionView.extend({className:"app-fields",initialize:function(e){this.options=e||{},this.layout=this.options.layout},onShow:function(){this.sortable()},itemViewOptions:function(){return{layout:this.layout}},addItemView:function(e){return"config"!==e.get("type")?t.CollectionView.prototype.addItemView.apply(this,arguments):void 0},getItemView:function(e){var t=e.get("type");return window.SHOWCASE_CONFIG.showViews[t]},sortable:function(){var e=this;this.$el.sortable({axis:"y",items:"> div:not(.js-not-sortable)",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),s=n.item.index();i!==s&&(e.includeConfigModel()&&(i+=1,s+=1),e.sort(i,s,e.collection.models),e.layout.displayEditView(),e.collection.trigger("sort"))}})},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n},includeConfigModel:function(){return this.collection.includeConfigModel()},isEmpty:function(){return!this.collection||this.includeConfigModel()&&1===this.collection.length||0===this.collection.length}})}),define("text!components/showcase/2.0.0/base/templates/stroagealert.html",[],function(){return'<div class="alert fade in">\n    <button type="button" class="close" data-dismiss="alert">×</button>\n    <strong>提示：</strong>在浏览器中发现未提交的内容，是否使用该内容替换当前内容？<a class="js-use-storage" href="javascript:;"> 使用 </a>\n</div>\n'}),define("components/showcase/2.0.0/base/models/base",["require","underscore","backbone"],function(e){var t=e("underscore"),n=e("backbone"),i=n.Model.extend({position:function(){return this.collection.indexOf(this)},index:function(){return this.collection.indexOf(this)},hasChanged:function(){return n.Model.prototype.hasChanged.call(this)?!0:this.has("sub_entry")?this.get("sub_entry").any(function(e){return e.hasChanged()}):void 0},checkValid:function(){var e=!1,n=this.get("sub_entry");return t.isFunction(this.validate)&&(e=this.validate()),n&&n.each(function(n){if(t.isFunction(n.validate)){var i=n.validate();!e&&i&&n.trigger("valid:error",n),e=e||i}}),e}});return i}),define("components/showcase/2.0.0/rich_text/models/rich_text",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"rich_text",content:"",color:"#ffffff",fullscreen:0}});return{initialize:function(e,t){return new n(e,t)}}}),define("components/showcase/2.0.0/goods/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods",goods:null,size:"2",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"0",price:"1",cart:"1"},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type"),n=this.get("buy_btn_type");"3"===e&&"2"===t&&"3"===n&&this.set("buy_btn_type","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!==+t&&1===+n&&this.set("size_type","0"),1!==+t&&3===+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change"),this.trigger("change:goods")}});return{initialize:function(e,n){return t.isUndefined(e)?new i({goods:[]}):new i(e,n)}}}),define("components/showcase/2.0.0/goods_list/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods_list",goods:null,goods_number:6,goods_number_type:0,size:"2",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"0",price:"1",cart:"1"},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type"),n=this.get("buy_btn_type");"3"===e&&"2"===t&&"3"===n&&this.set("buy_btn_type","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!==+t&&1===+n&&this.set("size_type","0"),1!==+t&&3===+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change:goods")},validation:{}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/image_ad/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"image_ad_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){return e.length>20?"图片标题最长20个字。":void 0}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/image_ad/collections/collection",["require","backbone","components/showcase/2.0.0/image_ad/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/image_ad/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/image_ad/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/image_ad/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/image_ad/collections/collection"),s=n.extend({defaults:{type:"image_ad",size:"0",show_method:"0",height:0,sub_entry:new i},calculateImage:function(){var e=0;this.get("sub_entry").each(function(t){var n=Number(t.get("image_width"))/320;n=1>n?1:n;var i=0===Number(t.get("image_height"))?320:Number(t.get("image_height"))/n;e=i>e?i:e}),0===e&&(e=260),this.set("height",e)},validation:{sub_entry:function(e){return e.length>10?"图片广告不能多于10个":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.listenTo(this,"change:show_method",function(){"0"==this.get("show_method")&&this.set("size","0")})}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/nav/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"nav_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){return e.length>5?"图片标题最长5个字。":void 0},link_url:function(e){return e?void 0:"链接不能为空。"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/nav/collections/collection",["require","backbone","components/showcase/2.0.0/nav/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/nav/models/model",["require","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/nav/collections/collection"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=e("components/showcase/2.0.0/nav/collections/collection"),i=t.extend({defaults:function(){return{type:"nav",sub_entry:new n}},validation:{sub_entry:function(e){return e.length>20?"图片广告不能多余20个":void 0}},parse:function(e){if(_.isArray(e.sub_entry)){var t=new n;_.each(e.sub_entry,function(e){t.add(e)}),e.sub_entry=t}return e},initialize:function(){this.get("sub_entry").length<4&&this.get("sub_entry").add(_(4).times(n.prototype.model.prototype.defaults))}});return{initialize:function(e,t){return _.isUndefined(e)?new i({sub_entry:new n}):new i(e,t)}}}),define("components/showcase/2.0.0/showcase/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"showcase_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){return e.length>5?"图片标题最长5个字。":void 0}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/showcase/collections/collection",["require","backbone","components/showcase/2.0.0/showcase/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/showcase/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/showcase/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/showcase/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/showcase/collections/collection"),s=n.extend({defaults:function(){return{type:"showcase",mode:"0",title:"",body_title:"",body_desc:"",sub_entry:new i}},validation:{sub_entry:function(e){return e.length>20?"图片广告不能多余20个":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.get("sub_entry").length<3&&this.get("sub_entry").add(t(3).times(i.prototype.model.prototype.defaults))}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/level/models/level",["components/showcase/2.0.0/base/models/base"],function(e){var t=e.extend({defaults:{type:"level",image:{id:"",url:window._global.url.v1_static+"/assets/img/avatar/"+window._global.mp_id+".jpg"},show_level:"1",level_msg:"尊贵的",show_point:"1",point_msg:"您拥有本店积分：",is_default:!0},validation:{level_msg:{required:!0,msg:"等级提示不能为空"},point_msg:{required:!0,msg:"积分提示不能为空"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.trigger("editing:error",this)})}});return{initialize:function(e,n){return new t(e,n)}}}),define("components/showcase/2.0.0/link/models/item",["require","core/utils","components/showcase/2.0.0/base/models/base"],function(e){var t=e("core/utils"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"link_selection",source_type:"",source_url:"",source_id:"",source_title:"",source_image:"",number:"3"},validation:{source_url:function(e){return t.REG.url.test(e)||t.REG.tel.test(e)?void 0:"内容来源不能为空且必须是一个合法的网站地址。"},source_title:{required:!0,msg:"链接名称不能为空。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/link/collections/collection",["require","backbone","components/showcase/2.0.0/link/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/link/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/link/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/link/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/link/collections/collection"),s=n.extend({defaults:{type:"link",show_method:"0",sub_entry:new i},validation:{sub_entry:function(e){return e.length>20?"关联链接不能多余20个":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/text_nav/models/item",["require","core/utils","components/showcase/2.0.0/base/models/base"],function(e){var t=e("core/utils"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"text_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){return t.REG.url.test(e)||t.REG.tel.test(e)?void 0:"链接地址必须是一个合法的网站地址。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/text_nav/collections/collection",["require","backbone","components/showcase/2.0.0/text_nav/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/text_nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/text_nav/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/text_nav/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/text_nav/collections/collection"),s=n.extend({defaults:{type:"text_nav",show_method:"0",sub_entry:new i},validation:{sub_entry:function(e){return e.length>20?"关联链接不能多余20个":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/tag_list/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({idAttribute:"_id",defaults:function(){return{type:"tag",id:"",title:"",url:"",goods_number:10,timestamp:+new Date+this.cid}},validation:{title:{required:!0,msg:"请选择商品分组"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tag_list/collections/collection",["require","backbone","components/showcase/2.0.0/tag_list/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/tag_list/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tag_list/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tag_list/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tag_list/collections/collection"),s=n.extend({defaults:function(){return{type:"tag_list",timestamp:+new Date,sub_entry:new i}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/title/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){return""===t.trim(e)?"导航链接不能为空。":void 0}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/title/collections/collection",["require","backbone","components/showcase/2.0.0/title/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/title/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/title/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/title/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/title/collections/collection"),s=n.extend({defaults:{type:"title",title:"",sub_title:"",show_method:"0",color:"#ffffff",sub_entry:new i,title_template:"0",wx_title_date:"",wx_title_author:"",wx_title_link:"",wx_title_link_type:0,wx_link:{},wx_link_url:""},validation:{title:{required:!0,msg:"标题不能为空。"},wx_link_url:function(e,t,n){return"1"==n.title_template&&"1"==n.wx_title_link_type&&""===e?"链接不能为空":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/component/models/component",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"component",_id:"",title:"",link:""},validation:{_id:function(e){return""===e?"请选择一个自定义页面模块。":void 0}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/search/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"search"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/line/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"line"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/cube/models/selection",["components/showcase/2.0.0/base/models/base"],function(e){var t=e.extend({defaults:function(){return{type:"cube_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",show_method:"1"}},validation:{image_url:[{required:!0,msg:"图片不能为空。"}]},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,n){return new t(e,n)},Model:t}}),define("components/showcase/2.0.0/cube/collections/selections",["components/showcase/2.0.0/cube/models/selection"],function(e){return Backbone.Collection.extend({model:e.Model})}),define("components/showcase/2.0.0/cube/models/model",["components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/cube/collections/selections","core/utils"],function(e,t,n){var i=e.extend({defaults:function(){return{type:"cube",sub_entry:new t}},changeSubEntry:function(){var e=Number(this.get("show_method")),n=this.get("sub_entry").length,i=this;e!=n&&e>n&&_(e-n).times(function(){i.get("sub_entry").add(t.prototype.model.prototype.defaults())})},checkCubeColspan:function(e){var t;return t=_.isUndefined(e)?0:e.show_method||0,t=+t,this.get("sub_entry").each(function(e){t+=Number(e.get("show_method"))}),_.isUndefined(e)?4-t:t>4?(n.errorNotify("最多支持4列。"),!1):!0},calculateImage:function(){var e=0;this.get("sub_entry").each(function(t){var n=Number(t.get("image_width"))/320;n=1>n?1:n;var i=0==Number(t.get("image_height"))?320:Number(t.get("image_height"))/n;e=i>e?i:e}),0===e&&(e=260),this.set("height",e)},validation:{sub_entry:function(e){var t=0;return e.each(function(e){t+=Number(e.get("show_method"))}),4>t?"必须添加满4列。":void 0}},parse:function(e){if(_.isArray(e.sub_entry)){var n=new t;_.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.trigger("editing:error",this)})}});return{initialize:function(e,t){return new i(e,t)}}}),define("components/showcase/2.0.0/cube2/models/item",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:function(){return{type:"cube_selection",x:0,y:0,width:1,height:1,title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",show_method:"1"}},validation:{image_url:[{required:!0,msg:"图片不能为空。"}]},layout:function(e){for(var n=t.clone(this.attributes),i=[],s=[],o=n.y;o<e.length;o++){for(var l=n.x;l<e[o].length;l++){var a=e[o][l];if(a&&(n.x!==a.x||n.y!==a.y))break;if(o-n.y>0){var c=t.find(i,function(e){return e.rows===o-n.y&&e.cols===l-n.x+1});if(!c)break}s.push({cols:l-n.x+1,rows:o-n.y+1})}if(!s.length)break;i=i.concat(s),s=[]}return i}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/cube2/collections/collection",["require","backbone","components/showcase/2.0.0/cube2/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/cube2/models/item");return t.Collection.extend({model:n.Model})}),define("text!components/showcase/2.0.0/cube2/templates/td.html",[],function(){return'<td class="not-empty cols-<%- width %> rows-<%- height %> <%- image_url ? \'\' : \'index-\' + index %>" colspan="<%- width %>" rowspan="<%- height %>" data-index="<%- index %>">\n    <% if(link_url) { %>\n        <a href="<%- link_url %>">\n            <img src="<%- image_url %>">\n        </a>\n    <% } else { %>\n        <img src="<%- image_url %>">\n    <% } %>\n</td>\n'}),define("components/showcase/2.0.0/cube2/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/cube2/collections/collection","text!components/showcase/2.0.0/cube2/templates/td.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/cube2/collections/collection"),s=e("text!components/showcase/2.0.0/cube2/templates/td.html"),o=e("core/utils"),l=n.extend({tdTemplate:t.template(s),defaults:function(){return{type:"cube2",layout_width:4,layout_height:4,layout_map:"",tableContent:"",sub_entry:new i}},validation:{layout_map:function(){for(var e=!1,t=!1,n=this.layoutMap,i=n.length-1;i>=0;i--){t=!1;for(var s=0;s<n[i].length;s++)n[i][s]?e=!0:t=!0;if(t&&e)return"必须添加满4列。"}return!1}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},denerateTableContent:function(){for(var e=t.result(this,"defaults"),n=this.denerateLayoutMap(),i=[],s=0;s<e.layout_height;s++){i.push("<tr>");for(var l=0;l<e.layout_width;l++){var a=n[s][l];if(a){if(s===a.y&&l===a.x){var c=a.image_url;c&&(c=o.fullfillImage(c,"!730x0.jpg")),a.image_url=c,a.image_thumb_url=c,i.push(this.tdTemplate(a))}}else i.push('<td class="empty" data-x="'+l+'" data-y="'+s+'"></td>')}i.push("</tr>")}this.set("tableContent",i.join(""))},denerateLayoutMap:function(){var e=t.result(this,"defaults"),n=this.get("sub_entry").toJSON(),i=new Array(e.layout_width),s=this.layoutMap=[];return t.times(e.layout_height,function(){s.push(t.clone(i))}),t.each(t.clone(n),function(e,t){e.index=t;for(var n=e.y;n<e.height+e.y;n++)for(var i=e.x;i<e.width+e.x;i++)s[n][i]=e}),s}});return{initialize:function(e,t){return new l(e,t)}}}),define("components/showcase/2.0.0/tpl_shop/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_shop",backgroundImage:"",backgroundColor:"#EF483F",avatar:window._global.mp_data?window._global.mp_data.logo||"":""}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tpl_weixin/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_weixin_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){return""===t.trim(e)?"导航链接不能为空。":void 0}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_weixin/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_weixin/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_weixin/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_weixin/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_weixin/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tpl_weixin/collections/collection"),s=n.extend({defaults:{type:"tpl_weixin",background:window._global.url.static+"/image/tpl_weixin.jpg",width:600,height:900,top:"80",bg_link_id:"",bg_link_type:"",bg_link_title:"",bg_link_url:"",sub_entry:new i},validation:{background:{required:!0,msg:"必须选择一张背景图片"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/tpl_fbb/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_fbb_nav_selection",title:"",text:"",date:"",link_id:"",link_type:"",link_title:"",link_url:"",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){return""===t.trim(e)?"导航链接不能为空。":void 0}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_fbb/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_fbb/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_fbb/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_fbb/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_fbb/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tpl_fbb/collections/collection"),s=n.extend({defaults:{type:"tpl_fbb",background:window._global.url.static+"/image/tpl_fbb.jpg",width:600,height:900,bg_link_id:"",bg_link_type:"",bg_link_title:"",bg_link_url:"",sub_entry:new i,is_fullscreen_component:"1"},validation:{background:{required:!0,msg:"必须选择一张背景图片"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)
}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i([{type:"title_nav_selection",title:"行程",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"范冰冰微站全新上线",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:"",date:"4月10号"},{type:"title_nav_selection",title:"抽奖",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"神秘大奖等你来拿",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_2.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"投票",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"冰邦们的家！DIY范小胖专属表情",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_3.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"新闻资讯",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"《X战警》范冰冰海报曝光 搭档佩姬联合出击",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"写真",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"",bg_image_id:"",bg_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_bg_1.jpg",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"影视",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"",bg_image_id:"",bg_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_bg_2.jpg",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"微视",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"三三不尽，关注微站！",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_5.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"爱里的心",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"“爱里的心”公益项目",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"音乐",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"聆听范冰冰的电台",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_6.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"荣耀时刻",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",text:"一同见证范冰冰星路历程",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:"",date:""}])}):new s(e,n)}}}),define("components/showcase/2.0.0/tpl_course/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_fbb_nav_selection",title:"",text:"",date:"",link_id:"",link_type:"",link_title:"",link_url:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){return""===t.trim(e)?"导航链接不能为空。":void 0}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_course/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_course/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_course/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_course/models/model",["require","underscore","jquery","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_course/collections/collection"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/models/base"),s=e("components/showcase/2.0.0/tpl_course/collections/collection"),o=i.extend({defaults:{type:"tpl_course",background:window._global.url.static+"/image/tpl_course.jpg",width:600,height:900,title:"新品上架，限时优惠",title_color:"#ffffff",sub_title:"微信购买8折起",sub_title_color:"#cfcfcf",button_text:"立即购买",button_link_id:"",button_link_type:"link",button_link_title:"口袋通",button_link_url:"http://koudaitong.com",top:"50",sub_entry:new s,is_fullscreen_component:"1"},validation:{button_text:{required:!0,msg:"请输入按钮文字"},background:{required:!0,msg:"必须选择一张背景图片"},button_link_url:function(e){return""===n.trim(e)?"按钮链接不能为空。":void 0}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new s;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new s([{type:"title_nav_selection",title:"上新",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"抽奖",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_2.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"投票",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_3.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"杂志",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"小游戏",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_5.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"关注",link_id:"",link_type:"link",link_title:"口袋通",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:"http://static.koudaitong.com/v2/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:""}])}):new o(e,n)}}}),define("components/showcase/2.0.0/tpl_wxd/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_wxd",backgroundImage:window._global.url.static+"/image/tpl_wxd_bg.png",avatar:window._global.mp_data?window._global.mp_data.logo||"":""}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tpl_11_11/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_11_11",banner:"",notice:"",tradeincard:[]},validation:{banner:{required:!0,msg:"请选择背景图片"},tradeincard:function(e){return e.length?void 0:"请添加优惠券"},notice:{required:!0,msg:"请填写店铺公告"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/category/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"category_selection",title:"导航名称",link_id:"",link_type:"",link_title:"",link_url:""}},validation:{title:function(e){return e.length>6?"分类名称最长6个字。":void 0},link_url:function(e){return e?void 0:"链接不能为空。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/category/collections/collection",["require","components/showcase/2.0.0/category/models/item","backbone"],function(e){var t=e("components/showcase/2.0.0/category/models/item"),n=e("backbone");return n.Collection.extend({model:t.Model})}),define("components/showcase/2.0.0/category/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/category/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/category/collections/collection"),s=n.extend({defaults:function(){return{type:"category",sub_entry:new i}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.get("sub_entry").length<4&&this.get("sub_entry").add(t(4).times(i.prototype.model.prototype.defaults))}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/white/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"white",height:"30"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/store/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"store"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/recommend_goods/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"recommend_goods"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/scroll/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"scroll_item",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/scroll/collections/collection",["require","backbone","components/showcase/2.0.0/scroll/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/scroll/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/scroll/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/scroll/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/scroll/collections/collection"),s=n.extend({defaults:function(){return{type:"scroll",homepage_icon:"1",music_icon:"1",music_url:"",music_title:"",loop:"1",first_page_image_id:"",first_page_image_url:"",first_page_image_thumb_url:"",first_page_image_width:0,first_page_image_height:0,first_page_wipe:"0",first_page_wipe_image_id:"",first_page_wipe_image_url:"",first_page_wipe_image_thumb_url:"",first_page_wipe_image_width:0,first_page_wipe_image_height:0,last_page_image_id:"",last_page_image_url:"",last_page_image_thumb_url:"",last_page_image_width:0,last_page_image_height:0,last_page_link_id:"",last_page_link_type:"",last_page_link_title:"",last_page_link_url:"",sub_entry:new i,is_fullscreen_component:"1"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{first_page_image_url:{required:!0,msg:"请选择一张图片。"},last_page_image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i}):new s(e,n)}}}),define("components/showcase/2.0.0/scroll_nav/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"scroll_nav_item",title:"",sub_title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/scroll_nav/collections/collection",["require","backbone","components/showcase/2.0.0/scroll_nav/models/item"],function(e){var t=e("backbone"),n=e("components/showcase/2.0.0/scroll_nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/scroll_nav/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/scroll_nav/collections/collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/scroll_nav/collections/collection"),s=n.extend({defaults:function(){return{type:"scroll_nav",homepage_icon:"1",background_images:[],nav_style:"right",animate:"zoom",zoom_type:"zoom_out",slide_type:"slide_left",sub_entry:new i,is_fullscreen_component:"1"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{background_images:function(e){return e&&0!==e.length?void 0:"请选择背景图片"}}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new i([{title:"标题",sub_title:"副标题"},{title:"标题",sub_title:"副标题"}])}):new s(e,n)}}}),define("components/showcase/2.0.0/image_text/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"image_text",title:"",digest:"",author:"",image:"",image_id:"",show_image:0,content:"",link_id:"",link_url:"",link_type:"",link_title:""},validation:{title:[{required:!0,msg:"标题不能为空"},{maxLength:64,msg:"标题长度不能超过64个字"}],author:function(e){return e.length>8?"作者长度不超过8个字":void 0},content:[{required:!0,msg:"正文不能为空"}],image:{required:!0,msg:"必须选择一张图片"},digest:function(e){return e.length>120?"摘要不能超过120个字":void 0}}});return{initialize:function(e,n){var s;return s=t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/audio/models/model",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"audio",reload:"1",style:"0",audio:"",title:"",loop:"0",avatar:"",bubble:"left"},validation:{title:function(e){return 1===+this.get("style")&&e.length<=0?"标题不能为空":void 0},audio:{required:!0,msg:"必须选择一个音频文件"}}});return{initialize:function(e,t){return new n(e,t)}}}),define("components/showcase/2.0.0/base/views/edit_base",["require","underscore","jquery","backbone","marionette","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("marionette"),o=e("core/utils");return s.Layout.extend({initialize:function(e){this._setOptions(e),this._bind(),this.triggerMethod("init",e)},_setOptions:function(e){this.options=e||{},this.layout=this.options.layout},_bind:function(){this.listenTo(this,"before:close",this._handleViewBeforeClose),this.listenTo(this,"close",this._handleViewClose),this.listenTo(this.model,"destroy",this.close),this.listenTo(this.model,"change",this._handleModelChange),this.bindValidation()},bindValidation:function(){i.Validation.bind(this)},_handleViewBeforeClose:function(){this.$(":focus").blur(),this.save()},_handleViewClose:function(){this.layout=null,i.Validation.unbind(this)},_handleModelChange:function(){t.isFunction(this.model.validate)&&this.model.validate(this.model.changed)},save:function(){},updateModel:o.updateModel,fullfillUrl:function(e,t){var i=n(e.target),s=n.trim(i.val());s=o.urlCheck(s),this.model.set(t,s),i.val(s),e.stopPropagation(),e.stopImmediatePropagation()},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n}})}),define("text!components/showcase/2.0.0/rich_text/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <div class="pull-left">\n            <label class="control-label">背景颜色：</label>\n            <div class="input-append">\n                <input type="color" value="<%= color %>" name="color" class="span1">\n                <button class="btn js-reset-bg" type="button">重置</button>\n            </div>\n        </div>\n        <div class="pull-left">\n            <label class="control-label">是否全屏：</label>\n            <label class="checkbox inline">\n                <input type="checkbox" name="fullscreen" <% if (fullscreen == 1) { %>checked<% } %>> 全屏显示\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <script class="js-editor" type="text/plain"></script>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/rich_text/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/rich_text/templates/edit.html","components/image/1.0.0/image"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/rich_text/templates/edit.html"),s=window.UE;return window.imageModal=e("components/image/1.0.0/image"),n.extend({className:"edit-rich-text",template:t.template(i),events:{"blur textarea":"updateModel",'change input[type="color"]':"updateModel",'change input[type="checkbox"]':"updateModel","click .js-reset-bg":"handleResetBackground"},handleResetBackground:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},onClose:function(){this._editor&&this._editor.destroy()},onShow:function(){var e=this,t=this._editor=new s.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","insertvideo","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!0,elementPathEnabled:!1,maximumWords:1e4,initialFrameWidth:458,initialFrameHeight:600,focus:!1});t.addListener("blur",function(){e.model.set("content",e._editor.getContent())}),t.addListener("contentChange",function(){e.model.set("content",e._editor.getContent())}),t.render(this.$(".js-editor")[0]),t.ready(function(){t.setContent(e.model.get("content"))})},save:function(){this._editor&&this.model.set("content",this._editor.getContent())}})}),define("text!components/showcase/2.0.0/goods/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">选择商品：</label>\n        <div class="controls">\n            <ul class="module-goods-list clearfix" name="goods">\n                <% _.each(goods, function(item, index) { %>\n                    <li class="sort">\n                        <a href="<%= item.url %>" target="_blank"><img src="<%= fullfillImage(item.image_url) %>" alt="商品图" width="50" height="50"></a>\n                        <a class="close-modal js-delete-goods small hide" data-id="<% item.id %>" title="删除">×</a>\n                    </li>\n                <% }); %>\n                <li>\n                    <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" <% if (size == \'0\') { %> checked <% } %>>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" <% if (size == \'1\') { %> checked <% } %>>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" <% if (size == \'2\') { %> checked <% } %>>一大两小\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="3" <% if (size == \'3\') { %> checked <% } %>>详细列表\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls">\n            <div class="controls-card">\n                <div class="controls-card-tab">\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="0" <% if (size_type == \'0\') { %> checked <% } %>>\n                        卡片样式\n                    </label>\n                    <% if(size == \'1\') { %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="1" <% if (size_type == \'1\') { %> checked <% } %>>\n                        瀑布流\n                    </label>\n                    <% } %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="2" <% if (size_type == \'2\') { %> checked <% } %>>\n                        极简样式\n                    </label>\n                    <% if(size == \'1\') { %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="3" <% if (size_type == \'3\') { %> checked <% } %>>\n                        促销\n                    </label>\n                    <% } %>\n                </div>\n                <% if(size_type != \'3\' && (size_type != \'2\' || size == \'3\')) { %>\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            <% if (buy_btn == \'0\') { %>\n                                <input type="checkbox" name="buy_btn" value="0">显示购买按钮\n                            <% } else { %>\n                                <input type="checkbox" name="buy_btn" value="1" checked>显示购买按钮\n                            <% } %>\n                        </label>\n                    </div>\n                    <% if (buy_btn == \'1\') { %>\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" <% if (buy_btn_type == \'1\') { %> checked <% } %>>\n                            样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" <% if (buy_btn_type == \'2\') { %> checked <% } %>>\n                            样式2\n                        </label>\n                        <% if(!(size == \'3\' && size_type == \'2\')) { %>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="3" <% if (buy_btn_type == \'3\') { %> checked <% } %>>\n                            样式3\n                        </label>\n                        <% } %>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="4" <% if (buy_btn_type == \'4\') { %> checked <% } %>>\n                            样式4\n                        </label>\n                    </div>\n                    <% } %>\n                </div>\n                <% } %>\n                <% if(size_type != \'3\' && size != \'3\') { %>\n                    <% if(!(size == \'1\' && size_type == \'2\')) { %>\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            <% if (title == \'0\') { %>\n                                <input type="checkbox" name="title" value="0">显示商品名 <%= size == \'2\' ? \'(小图不显示名称)\' : \'\'%>\n                            <% } else { %>\n                                <input type="checkbox" name="title" value="1" checked>显示商品名 <%= size == \'2\' ? \'(小图不显示名称)\' : \'\'%>\n                            <% } %>\n                        </label>\n                    </div>\n                    <% } %>\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            <% if (price == \'0\') { %>\n                                <input type="checkbox" name="price" value="0">显示价格\n                            <% } else { %>\n                                <input type="checkbox" name="price" value="1" checked>显示价格\n                            <% } %>\n                        </label>\n                    </div>\n                    <% if(size_type == \'2\') { %>\n                        <div class="controls-card-item">\n                            <label class="checkbox inline">\n                                <% if (cart == \'0\') { %>\n                                    <input type="checkbox" name="cart" value="0">显示购物车图标\n                                <% } else { %>\n                                    <input type="checkbox" name="cart" value="1" checked>显示购物车图标\n                                <% } %>\n                            </label>\n                        </div>\n                    <% } %>\n                <% } %>\n            </div>\n        </div>\n    </div>\n\n</form>\n'}),define("components/showcase/2.0.0/goods/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods/templates/edit.html","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/goods/templates/edit.html"),o=e("components/modal/1.0.0/modal"),l=e("core/utils");return i.extend({template:t.template(s),templateHelpers:{fullfillImage:l.fullfillImage},events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"},modelEvents:{change:"render"},onInit:function(){this.listenTo(this.model,"change:size",this.render),this.listenTo(this.model,"change:goods",this.render)},onRender:function(){var e=this;return this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),s=n.item.index();i!==s&&(e.sort(i,s,e.model.get("goods")),e.model.trigger("change"),e.model.trigger("change:goods"))}}),this},handleDeleteGoods:function(e){var t=n(e.target),i=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGoods(i)},handleAddGoods:function(){var e=this;this.goodsModal=o.initialize({type:"goods",hide:["tag"],multiChoose:!0}).setChooseItemCallback(function(n){t.each(n,function(t){e.model.get("goods").push({id:t.data_id,url:t.data_url,image_url:t.image_url,image_id:t.data_id||t.id||"",price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title})}),e.model.trigger("change"),e.model.trigger("change:goods")}),this.goodsModal.modal("show")}})}),define("text!components/showcase/2.0.0/goods_list/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">商品来源：</label>\n        <div class="controls">\n            <% if (goods) { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left link-to">\n                        <a href="<%= goods.url %>" class="link-to-title" target="_blank">\n                            <span class="label label-success">\n                                <% if (goods.type === \'feature\') { %>微杂志<%} else { %>商品标签<% } %>\n                                <em class="link-to-title-text"><%- goods.title %></em>\n                            </span>\n                        </a>\n                    </div>\n                    <a href="javascript:void(0);" class="pull-right js-add-goods add-goods">修改</a>\n                </div>\n            <% } else { %>\n                <a href="javascript:void(0);" class="js-add-goods add-goods control-action">从商品分组中选择</a>\n            <% } %>\n            <p class="help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示个数：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="0" <% if (goods_number_type == 0) { %> checked <% } %>>6\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="1" <% if (goods_number_type == 1) { %> checked <% } %>>12\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="2" <% if (goods_number_type == 2) { %> checked <% } %>>18\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" <% if (size == \'0\') { %> checked <% } %>>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" <% if (size == \'1\') { %> checked <% } %>>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" <% if (size == \'2\') { %> checked <% } %>>一大两小\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="3" <% if (size == \'3\') { %> checked <% } %>>详细列表\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls">\n            <div class="controls-card">\n                <div class="controls-card-tab">\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="0" <% if (size_type == \'0\') { %> checked <% } %>>\n                        卡片样式\n                    </label>\n                    <% if(size == \'1\') { %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="1" <% if (size_type == \'1\') { %> checked <% } %>>\n                        瀑布流\n                    </label>\n                    <% } %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="2" <% if (size_type == \'2\') { %> checked <% } %>>\n                        极简样式\n                    </label>\n                    <% if(size == \'1\') { %>\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="3" <% if (size_type == \'3\') { %> checked <% } %>>\n                        促销\n                    </label>\n                    <% } %>\n                </div>\n                <% if(size_type != \'3\' && (size_type != \'2\' || size == \'3\')) { %>\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            <% if (buy_btn == \'0\') { %>\n                                <input type="checkbox" name="buy_btn" value="0">显示购买按钮\n                            <% } else { %>\n                                <input type="checkbox" name="buy_btn" value="1" checked>显示购买按钮\n                            <% } %>\n                        </label>\n                    </div>\n                    <% if (buy_btn == \'1\') { %>\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" <% if (buy_btn_type == \'1\') { %> checked <% } %>>\n                            样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" <% if (buy_btn_type == \'2\') { %> checked <% } %>>\n                            样式2\n                        </label>\n                        <% if(!(size == \'3\' && size_type == \'2\')) { %>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="3" <% if (buy_btn_type == \'3\') { %> checked <% } %>>\n                            样式3\n                        </label>\n                        <% } %>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="4" <% if (buy_btn_type == \'4\') { %> checked <% } %>>\n                            样式4\n                        </label>\n                    </div>\n                    <% } %>\n                </div>\n                <% } %>\n                <% if(size_type != \'3\' && size != \'3\') { %>\n                    <% if(!(size == \'1\' && size_type == \'2\')) { %>\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            <% if (title == \'0\') { %>\n                                <input type="checkbox" name="title" value="0">显示商品名 <%= size == \'2\' ? \'(小图不显示名称)\' : \'\'%>\n                            <% } else { %>\n                                <input type="checkbox" name="title" value="1" checked>显示商品名 <%= size == \'2\' ? \'(小图不显示名称)\' : \'\'%>\n                            <% } %>\n                        </label>\n                    </div>\n                    <% } %>\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            <% if (price == \'0\') { %>\n                                <input type="checkbox" name="price" value="0">显示价格\n                            <% } else { %>\n                                <input type="checkbox" name="price" value="1" checked>显示价格\n                            <% } %>\n                        </label>\n                    </div>\n                    <% if(size_type == \'2\') { %>\n                        <div class="controls-card-item">\n                            <label class="checkbox inline">\n                                <% if (cart == \'0\') { %>\n                                    <input type="checkbox" name="cart" value="0">显示购物车图标\n                                <% } else { %>\n                                    <input type="checkbox" name="cart" value="1" checked>显示购物车图标\n                                <% } %>\n                            </label>\n                        </div>\n                    <% } %>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</form>\n'
}),define("components/showcase/2.0.0/goods_list/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods_list/templates/edit.html","components/modal/1.0.0/modal"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/goods_list/templates/edit.html"),s=e("components/modal/1.0.0/modal");return n.extend({template:t.template(i),events:{'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-goods":"handleAddGoods"},modelEvents:{change:"render"},onInit:function(){this.listenTo(this.model,"change:size",this.render),this.listenTo(this.model,"change:goods",this.render)},handleAddGoods:function(){var e=this;this.goodsModal=s.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set("goods",{id:t.data_id,url:t.data_url,image_url:t.data_cover_attachment_url,price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title,type:t.data_type})}),this.goodsModal.modal("show")}})}),define("components/showcase/2.0.0/base/views/edit_collection_base",["require","jquery","marionette"],function(e){var t=(e("jquery"),e("marionette"));return t.CollectionView.extend({tagName:"ul",className:"choices",events:{"click .choice":function(e){var t=e.target.nodeName.toLowerCase();-1===["input","textarea","select"].indexOf(t)&&this.$(":focus").blur()}},itemViewOptions:function(){return{layout:this.options.layout}},sortable:function(){var e=this;this.$el.sortable({axis:"y",cursor:"move",start:function(e,t){t.item.data("start",t.item.index())},stop:function(t,n){var i=n.item.data("start"),s=n.item.index();i!==s&&(e.sort(i,s,e.collection.models),e.collection.trigger("reset"))}})},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n}})}),define("text!components/showcase/2.0.0/image_ad/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input class="" type="text" name="title[<%= cid %>]" value="<%- title %>">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <% if (link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("text!components/public_template/dropdown_menu.html",[],function(){return'<ul class="dropdown-menu">\n    <li>\n        <a class="js-modal-magazine" data-type="feature" href="javascript:void(0);">微杂志及分类</a>\n    </li>\n    <li>\n        <a class="js-modal-goods" data-type="goods" href="javascript:void(0);">商品及分类</a>\n    </li>\n    <% if (+_global.team_status.weixin_oldsub === 1 || +_global.team_status.weixin_server === 1) { %>\n    <li>\n        <a class="js-modal-activity" data-type="activity" href="javascript:void(0);">营销活动</a>\n    </li>\n    <% } %>\n    <li>\n        <a class="js-modal-survey" data-type="survey" href="javascript:void(0);">投票调查</a>\n    </li>\n    <% if (+_global.team_status.weixin_oldsub === 1 || +_global.team_status.weixin_server === 1) { %>\n    <li>\n        <a class="js-modal-history" data-type="history" href="javascript:void(0);">历史消息</a>\n    </li>\n    <% } %>\n    <li>\n        <a class="js-modal-homepage" data-type="homepage" href="javascript:void(0);">店铺主页</a>\n    </li>\n    <li>\n        <a class="js-modal-usercenter" data-type="usercenter" href="javascript:void(0);">会员主页</a>\n    </li>\n    <li>\n        <a class="js-modal-links" data-type="links" href="javascript:void(0);">自定义外链</a>\n    </li>\n</ul>'}),define("components/showcase/2.0.0/image_ad/views/edit_item",["require","underscore","jquery","backbone","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/image_ad/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=(e("backbone"),e("components/showcase/2.0.0/base/views/edit_base")),s=e("text!components/showcase/2.0.0/image_ad/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);t.extend(n,{cid:e,dropdown_menu:this.dropdownTpl});var i=this.model.get("image_url");return i=i&&r.fullfillImage(i,"!100x100+2x.jpg"),n.image_url=i,n.image_thumb_url=i,n},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.options.layout.model.calculateImage()}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})},"delete":function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void r.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.collection.indexOf(this.model);this.model.collection.add(e,{at:n+1,element:this.$el}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/image_ad/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/image_ad/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/image_ad/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/image_ad/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <% if (show_method == \'0\') { %>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="0" checked>折叠轮播\n                </label>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="1">分开显示\n                </label>\n            <% } else { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">折叠轮播\n                </label>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="1" checked>分开显示\n                </label>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示大小：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" <% if (size == \'0\') { %> checked <% } %>>大图\n            </label>\n            <% if (show_method == \'1\') { %>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" <% if (size == \'1\') { %> checked <% } %>>小图\n            </label>\n            <% } %>\n        </div>\n    </div>\n\n    <div class="control-group js-choices-region">\n    </div>\n\n    <div class="control-group options">\n        <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个广告</a>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/image_ad/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/image_ad/views/edit_collection","text!components/showcase/2.0.0/image_ad/templates/edit.html","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/image_ad/views/edit_collection"),s=e("text!components/showcase/2.0.0/image_ad/templates/edit.html"),o=e("components/image/1.0.0/image"),l=e("core/utils");return n.extend({template:t.template(s),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-option":"addOption"},regions:{choicesRegion:".js-choices-region"},onInit:function(e){this.parent=e.parent;var t=this;this.listenTo(this.model,"change:show_method",this.render),this.listenTo(this.model.get("sub_entry"),"remove",function(e,n){n.models.length<10&&t.$(".options").show(),t.model.calculateImage()})},onRender:function(){this.model.get("sub_entry").length>=10&&this.$(".options").hide(),this.choicesRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))},addOption:function(){var e=this,n=e.model.get("sub_entry");o.initialize({multiChoose:!0,callback:function(e){var i=!1;if(t.each(e,function(e){n.length<10?n.add({type:"image_ad_selection",image_id:e.attachment_id,image_url:e.attachment_url,image_thumb_url:e.thumb_url,image_width:Number(e.width),image_height:Number(e.height)}):i=!0}),n.trigger("update"),i){var s=setTimeout(l.clearNotify,3e3);l.errorNotify("图片广告不能多于10个，已经自动删除多余的图片。",function(){clearTimeout(s)})}}})}})}),define("text!components/showcase/2.0.0/nav/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">文字：</label>\n        <div class="controls">\n            <input class="" type="text" name="title" value="<%- title %>" maxLength="5">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <% if (link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/nav/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/nav/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/nav/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(){this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{dropdown_menu:this.dropdownTpl});var n=this.model.get("image_url");return n=n&&r.fullfillImage(n,"!100x100+2x.jpg"),e.image_url=n,e.image_thumb_url=n,e},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})}})}),define("components/showcase/2.0.0/nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/nav/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/nav/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/nav/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="js-collection-region">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/nav/views/edit_collection","text!components/showcase/2.0.0/nav/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/nav/views/edit_collection"),s=e("text!components/showcase/2.0.0/nav/templates/edit.html");return n.extend({template:t.template(s),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/showcase/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= fullfillImage(image_url, \'!100x100+2x.jpg\') %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n\n    <div class="control-group hide">\n        <label class="control-label">文字：</label>\n        <div class="controls">\n            <input class="input-xxlarge" type="text" name="title" value="<%- title %>" maxLength="5">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <% if (link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n\n'}),define("components/showcase/2.0.0/showcase/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/showcase/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/showcase/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{dropdown_menu:this.dropdownTpl,fullfillImage:r.fullfillImage}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(){this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render)},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})},"delete":function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void r.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1})}})}),define("components/showcase/2.0.0/showcase/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/showcase/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/showcase/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/showcase/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">橱窗标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%= title %>" maxLength="15">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="mode" value="0" <% if (mode == \'0\') { %> checked <% } %>>默认\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="mode" value="1" <% if (mode == \'1\') { %> checked <% } %>>3 列\n            </label>\n            <p class="help-desc">PC版一直显示 3 列</p>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">内容区标题：</label>\n        <div class="controls">\n            <input type="text" name="body_title" value="<%= body_title %>" maxLength="15">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">内容区说明：</label>\n        <div class="controls">\n            <textarea name="body_desc" cols="15" rows="3" maxLength="50"><%= body_desc %></textarea>\n        </div>\n    </div>\n\n    <div class="control-group js-collection-region">\n\n    </div>\n\n</form>\n'}),define("components/showcase/2.0.0/showcase/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/showcase/views/edit_collection","text!components/showcase/2.0.0/showcase/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/showcase/views/edit_collection"),s=e("text!components/showcase/2.0.0/showcase/templates/edit.html");return n.extend({template:t.template(s),events:{'blur input[type="text"]':"updateModel","blur textarea":"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/level/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图：</label>\n        <div class="controls">\n            <% if (image.url === \'\') { %>\n                <a class="js-choose-bg control-action" href="javascript: void(0);">选择背景图</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(image.url) %>" width="100" height="100">\n                <a class="js-choose-bg control-action" href="javascript: void(0);">修改背景图</a>\n            <% } %>\n            <p class="help-desc">背景图推荐宽度 640 像素、高度 320 像素</p>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">显示等级的设置</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">等级：</label>\n        <div class="controls">\n            <label class="checkbox inline">\n                <% if (show_level == \'0\') { %>\n                    <input type="checkbox" name="show_level" value="0">显示等级\n                <% } else { %>\n                    <input type="checkbox" name="show_level" value="1" checked>显示等级\n                <% } %>\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">等级提示：</label>\n        <div class="controls">\n            <input type="text" name="level_msg" value="<%- level_msg %>">\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">显示积分的设置</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">积分：</label>\n        <div class="controls">\n            <label class="checkbox inline">\n                <% if (show_point == \'0\') { %>\n                    <input type="checkbox" name="show_point" value="0">显示积分\n                <% } else { %>\n                    <input type="checkbox" name="show_point" value="1" checked>显示积分\n                <% } %>\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">积分提示：</label>\n        <div class="controls">\n            <input type="text" name="point_msg" value="<%- point_msg %>">\n        </div>\n    </div>\n</form>\n'
}),define("components/showcase/2.0.0/level/views/edit",["components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/level/templates/edit.html","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e,t,n,i,s){return e.extend({template:_.template(t),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-choose-bg":function(){var e=this;i.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set("image",{id:t.attachment_id,url:t.attachment_url}),e.model.set("is_default",!1)}})}},onInit:function(e){this.parent=e.parent,this.listenTo(this.model,"change:image",this.render)},render:function(){return this.$el.html(this.template(_.extend({},this.model.attributes,{fullfillImage:s.fullfillImage}))),this}})}),define("text!components/showcase/2.0.0/link/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>内容来源：</label>\n    <div class="controls">\n        <% if (source_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (source_title !== \'\' && source_type !== \'link\') { %>\n                        <input type="hidden" name="source_url" value="<%= source_url %>">\n                        <a href="<%= source_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                    <% if (source_type === \'feature\') { %>\n                        微杂志\n                    <% } else if (source_type === \'category\') { %>\n                        微杂志分类\n                    <% } else if (source_type === \'topic\') { %>\n                        专题\n                    <% } else if (source_type === \'article\') { %>\n                        资讯\n                    <% } else if (source_type === \'goods\') { %>\n                        商品\n                    <% } else if (source_type === \'tag\') { %>\n                        商品标签\n                    <% } else if (source_type === \'activity\') { %>\n                        营销活动\n                    <% } else if (source_type === \'survey\') { %>\n                        调查\n                    <% } else if (source_type === \'homepage\') { %>\n                        店铺主页\n                    <% } else if (source_type === \'usercenter\') { %>\n                        会员主页\n                    <% } else if (source_type === \'link\') { %>\n                        自定义外链\n                    <% } else if (source_type === \'history\') { %>\n                        历史信息\n                    <% } %>\n                <% if (source_title !== \'\' && source_type !== \'link\') { %>\n                        <em class="link-to-title-text"><%- source_title %></em>\n                    </span></a>\n                <% } else { %>\n                    </span>\n                <% } %>\n                </div>\n                <% if (source_type !== \'link\') { %>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <ul class="dropdown-menu">\n                        <li>\n                            <a class="js-modal-category" data-type="category" href="javascript:void(0);">微杂志分类</a>\n                        </li>\n                        <li>\n                            <a class="js-modal-tag" data-type="tag" href="javascript:void(0);">商品标签</a>\n                        </li>\n                    </ul>\n                </div>\n                <% } %>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <ul class="dropdown-menu">\n                    <li>\n                        <a class="js-modal-category" data-type="category" href="javascript:void(0);">微杂志分类</a>\n                    </li>\n                    <li>\n                        <a class="js-modal-tag" data-type="tag" href="javascript:void(0);">商品标签</a>\n                    </li>\n                    <li>\n                        <a class="js-modal-links" data-type="links" href="javascript:void(0);">自定义外链</a>\n                    </li>\n                </ul>\n            </div>\n        <% } %>\n        <input type="hidden" name="source_url">\n    </div>\n</div>\n\n<% if (source_type === \'link\') { %>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接名称：</label>\n    <div class="controls">\n        <input type="text" name="source_title" value="<%- source_title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接地址：</label>\n    <div class="controls">\n        <input type="text" name="source_url" value="<%- source_url %>" class="js-fullfill-url">\n    </div>\n</div>\n<% } else if (source_type !== \'\') { %>\n<div class="control-group">\n    <label class="control-label">显示条数：</label>\n    <div class="controls">\n        <select name="number">\n            <option value="1" <% if (number == 1) {%>selected<% } %>>1条</option>\n            <option value="2" <% if (number == 2) {%>selected<% } %>>2条</option>\n            <option value="3" <% if (number == 3) {%>selected<% } %>>3条</option>\n            <option value="4" <% if (number == 4) {%>selected<% } %>>4条</option>\n            <option value="5" <% if (number == 5) {%>selected<% } %>>5条</option>\n        </select>\n    </div>\n</div>\n<% } %>\n\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/link/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/link/templates/edit_item.html","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/link/templates/edit_item.html"),o=e("components/pop/pop"),l=e("components/modal/1.0.0/modal"),a=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),events:{'blur input[type="text"]:not(.js-fullfill-url)':"updateModel","blur .js-fullfill-url":"urlCheck","change select":"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-modal-category, .js-modal-tag":"chooseLink","click .js-modal-links":"chooseOtherLink"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"source_url")},chooseLink:function(e){var t=this,i=n(e.target).data("type");l.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({source_id:e.data_id||e.id,source_type:i,source_url:e.data_url,source_image:e.cover_attachment_url,source_title:e.data_title})}).modal("show")},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;o.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({source_id:"",source_type:"link",source_url:e,source_image:"",source_title:e})}})},"delete":function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void a.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/link/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/link/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/link/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/link/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <% if (show_method == \'1\') { %>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="0">通栏\n            </label>\n        </div>\n    </div>\n    <% } %>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="js-add-option add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个关联链接</a>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/link/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/link/views/edit_collection","text!components/showcase/2.0.0/link/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/link/views/edit_collection"),s=e("text!components/showcase/2.0.0/link/templates/edit.html");return n.extend({template:t.template(s),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e={type:"source_selection",number:"3"};this.model.get("sub_entry").add(e)},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/text_nav/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <% if (show_method == \'1\') { %>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="0">通栏\n            </label>\n        </div>\n    </div>\n    <% } %>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个文本导航</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/text_nav/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>导航名称：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%= title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls">\n        <% if (link_type != \'\') { %>\n\n                <input type="hidden" name="link_url">\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                            <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%= link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/text_nav/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/text_nav/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/text_nav/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]:not(.js-fullfill-url)':"updateModel","blur .js-fullfill-url":"urlCheck","click .actions .delete":"delete","click .actions .add":"add","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url,title:t.getOldTitle()||e.data_title})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;c.getStaticUrl(t,function(e,n){i.model.set({link_id:"",link_type:t,link_title:n,link_url:e,title:i.getOldTitle()||n})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""}),this.parent.render()},"delete":function(){this.model.destroy()},getOldTitle:function(){var e=this.model.toJSON();return e.title&&e.title!==e.link_title?e.title:""},add:function(){if(this.model.collection.length>=20)return void c.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/text_nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/text_nav/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/text_nav/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/text_nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/text_nav/templates/edit.html","text!components/public_template/dropdown_menu.html","components/showcase/2.0.0/text_nav/views/edit_collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/text_nav/templates/edit.html"),s=e("text!components/public_template/dropdown_menu.html"),o=e("components/showcase/2.0.0/text_nav/views/edit_collection");return n.extend({template:t.template(i),dropdownTpl:t.template(s),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},serializeData:function(){return t.extend({},this.model.attributes,{dropdown_menu:this.dropdownTpl})},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e={type:"text_nav_selection",title:""};this.model.get("sub_entry").add(e)},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/tag_list/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <p class="app-component-desc">该列表支持用户在当前页直接把商品加入购物车或购买，查看样板页面</p>\n\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加商品分组</a>\n    </div>\n\n    <div class="control-group">\n        <p class="app-component-desc help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n    </div>\n\n</form>\n'}),define("text!components/showcase/2.0.0/tag_list/templates/edit_item.html",[],function(){return'<div class="edit-tag-list">\n    <div class="tag-source">\n        <div class="control-group">\n            <label class="control-label pull-left">商品来源：</label>\n            <div class="controls pull-left">\n                <% if(title) { %>\n                        <a href="<%- url %>" target="_blank" class="tag-title new-window"><%- title %></a>\n                        <a href="javascript:;" class="tag-modify js-select-tag">修改</a>\n                <% } else { %>\n                    <a href="javascript:;" class="js-select-tag pull-left">选择商品分组</a>\n                <% } %>\n                <input type="hidden" name="title">\n            </div>\n        </div>\n    </div>\n    <div class="split-line"></div>\n    <div class="goods-number">\n        <span>显示商品数量</span>\n\n        <div class="dropdown hover pull-right">\n            <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0);"><%- goods_number %> <i class="caret"></i></a>\n            <ul class="dropdown-menu" role="menu">\n                <li>\n                    <a class="js-goods-number" data-value="5" href="javascript:void(0);">5</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="10" href="javascript:void(0);">10</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="15" href="javascript:void(0);">15</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tag_list/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list/templates/edit_item.html","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tag_list/templates/edit_item.html"),o=e("components/modal/1.0.0/modal"),l=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),events:{"click .actions .delete":"delete","click .actions .add":"add","click .js-select-tag":"handleSelectTag","click .js-goods-number":"handleGoodsNumber"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},"delete":function(){var e=this.model.collection;this.model.destroy(),e.trigger("reset")},add:function(){if(this.model.collection.length>=8)return void l.errorNotify("选项最多8个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")},handleSelectTag:function(){var e=this;this.tagModel=o.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set({type:t.data_type,id:t.data_id,title:t.title,url:t.data_url})}),this.tagModel.modal("show")},handleGoodsNumber:function(e){var t=n(e.target).data("value");this.model.set("goods_number",t,{silent:!0}),this.render()}})}),define("components/showcase/2.0.0/tag_list/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tag_list/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tag_list/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tag_list/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list/templates/edit.html","text!components/public_template/dropdown_menu.html","components/showcase/2.0.0/tag_list/views/edit_collection","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tag_list/templates/edit.html"),s=e("text!components/public_template/dropdown_menu.html"),o=e("components/showcase/2.0.0/tag_list/views/edit_collection"),l=e("components/modal/1.0.0/modal"),a=e("core/utils");return n.extend({template:t.template(i),dropdownTpl:t.template(s),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},serializeData:function(){return t.extend({},this.model.attributes,{dropdown_menu:this.dropdownTpl})},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e=this,n=e.model.get("sub_entry");l.initialize({multiChoose:!0,type:"tag"}).setChooseItemCallback(function(e){var i=!1;if(t.each(e,function(e){n.length<8?n.add({type:e.data_type,id:e.data_id,title:e.title,url:e.data_url}):i=!0}),i){var s=setTimeout(a.clearNotify,3e3);a.errorNotify("商品分组不能多于8个，已经自动删除多余的分组。",function(){clearTimeout(s)})}}).modal("show")},toggleOptions:function(){this.model.get("sub_entry").length>=8?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/title/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" maxlength="100">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题模板：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="title_template" value="0" <%= title_template == 0 ? "checked": "" %> >传统样式\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="title_template" value="1" <%= title_template == 1 ? "checked": "" %>>模仿微信图文页样式\n            </label>\n        </div>\n    </div>\n    <% if(title_template == \'0\'){%>\n\n    <div class="control-group">\n        <label class="control-label">副标题：</label>\n        <div class="controls">\n            <input type="hidden" class="js-time-holder">\n            <input type="text" name="sub_title" value="<%- sub_title %>" maxlength="100">\n            <a href="javascript: void(0);" class="js-time">日期</a>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示：</label>\n        <div class="controls">\n            <% if (show_method == \'0\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0" checked>居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1">居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2">居右显示\n                </label>\n            <% } else if (show_method == \'1\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1" checked>居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2">居右显示\n                </label>\n            <% } else if (show_method == \'2\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1">居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2" checked>居右显示\n                </label>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= color %>" name="color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n        <ul class="choices">\n\n        </ul>\n    </div>\n    <div class="control-group options">\n        <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个文本导航</a>\n    </div>\n\n    <% } else { %>\n        <div class="control-group">\n            <label class="control-label">日期：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_date" value="<%- wx_title_date %>" maxlength="100" class="js-wx-time-holder span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">作者：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_author" value="<%- wx_title_author %>" maxlength="100" class="span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">链接标题：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_link" value="<%- wx_title_link %>" maxlength="100" class="span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">链接地址：</label>\n            <div class="controls">\n                <label class="radio">\n                    <input type="radio" name="wx_title_link_type" value="0" <%= wx_title_link_type == 0 ? "checked": "" %> >引导关注\n                    <a href="/v2/setting/weixin" target="_blank" style="margin-left:20px">设置快速关注链接</a>\n                </label>\n            </div>\n        </div>\n        <div class="control-group">\n            <div class="controls">\n                <label class="radio wx-template-radio">\n                    <input type="radio" name="wx_title_link_type" value="1" <%= wx_title_link_type == 1 ? "checked": "" %>>其它链接\n                    <input type="hidden" name="wx_link_url">\n                        <% if (wx_link.link_type != undefined) { %>\n                            <div class="control-action clearfix">\n                                <div class="pull-left js-link-to link-to">\n                                    <% if (wx_link.link_title !== \'\') { %>\n                                    <a href="<%= wx_link.link_url %>" target="_blank" class="new-window link-to-title">\n                                    <% } %>\n\n                                    <span class="label label-success">\n                                        <% if (wx_link.link_type === \'feature\') { %>\n                                            微杂志\n                                        <% } else if (wx_link.link_type === \'category\') { %>\n                                            微杂志分类\n                                        <% } else if (wx_link.link_type === \'topic\') { %>\n                                            专题\n                                        <% } else if (wx_link.link_type === \'article\') { %>\n                                            资讯\n                                        <% } else if (wx_link.link_type === \'goods\') { %>\n                                            商品\n                                        <% } else if (wx_link.link_type === \'tag\') { %>\n                                            商品标签\n                                        <% } else if (wx_link.link_type === \'activity\') { %>\n                                            营销活动\n                                        <% } else if (wx_link.link_type === \'survey\') { %>\n                                            调查\n                                        <% } else if (wx_link.link_type === \'homepage\') { %>\n                                            店铺主页\n                                        <% } else if (wx_link.link_type === \'usercenter\') { %>\n                                            会员主页\n                                        <% } else if (wx_link.link_type === \'link\') { %>\n                                            外链\n                                        <% } else if (wx_link.link_type === \'history\') { %>\n                                            历史信息\n                                        <% } %>\n                                    <% if (wx_link.link_title !== \'\') { %>\n                                            <em class="link-to-title-text"><%- wx_link.link_title %></em>\n                                        </span>\n                                    </a>\n                                    <% } else { %>\n                                        </span>\n                                    <% } %>\n                                    <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                                </div>\n                                <div class="dropdown hover pull-left">\n                                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                                    <%= dropdown_menu() %>\n                                </div>\n                            </div>\n\n                        <% } else { %>\n                            <div class="dropdown hover">\n                                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                                <%= dropdown_menu() %>\n                            </div>\n                        <% } %>\n                </label>\n            </div>\n        </div>\n\n    <% } %>\n</form>\n'
}),define("text!components/showcase/2.0.0/title/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>名称：</label>\n    <div class="controls">\n        <input type="text" name="title[<%= cid %>]" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接：</label>\n    <div class="controls" name="link_url">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/title/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/title/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/title/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink"},onInit:function(){this.listenTo(this.model,"change",this.render)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);return t.extend(n,{cid:e,dropdown_menu:this.dropdownTpl}),n},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;c.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/title/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/title/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/title/views/edit_item");return t.extend({itemView:n})}),define("components/showcase/2.0.0/title/views/edit",["require","core/utils","underscore","components/showcase/2.0.0/base/views/edit_base","components/pop/pop","components/modal/1.0.0/modal","text!components/public_template/dropdown_menu.html","text!components/showcase/2.0.0/title/templates/edit.html","components/showcase/2.0.0/title/views/edit_collection","datetimepicker"],function(e){var t=e("core/utils"),n=e("underscore"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/pop/pop"),o=e("components/modal/1.0.0/modal"),l=e("text!components/public_template/dropdown_menu.html"),a=e("text!components/showcase/2.0.0/title/templates/edit.html"),c=e("components/showcase/2.0.0/title/views/edit_collection");return e("datetimepicker"),i.extend({template:n.template(a),templateHelpers:function(){return{dropdown_menu:n.template(l)}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-add-option":"addOption","click .js-time":function(){this.timepicker.datepicker("show")},"click .js-reset-bg":"resetBg","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions),this.listenTo(this.model,"change:title_template",this.render),this.listenTo(this.model,"change:wx_link",this.render)},onRender:function(){var e=new Date,t=this;this.timepicker=this.$(".js-time-holder"),this.timepicker.datetimepicker({dateFormat:"yy-mm-dd",minDate:e,changeMonth:!0,changeYear:!0,yearRange:"1900:+20",onClose:function(e){""!==e&&(t.model.set("sub_title",e),t.$('input[name="sub_title"]').val(e))}}),this.wxTimepicker=this.$(".js-wx-time-holder"),this.wxTimepicker.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"1900:+20",dateonly:!0,onClose:function(e){""!==e&&t.model.set("wx_title_date",e)}}),this.collectionRegion.show(new c({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},resetBg:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>0?this.$(".options").hide():this.$(".options").show()},chooseLink:function(e){if(!($(e.target).parents(".js-collection-region").length>0)){var t=this,n=$(e.target).data("type");o.initialize({type:n}).setChooseItemCallback(function(e){t.setLink({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")}},chooseStaticLink:function(e){if(!($(e.target).parents(".js-collection-region").length>0)){var n=$(e.target).data("type"),i=this;t.getStaticUrl(n,function(e){i.setLink({link_id:"",link_type:n,link_title:"",link_url:e})})}},chooseOtherLink:function(e){if(!($(e.target).parents(".js-collection-region").length>0)){var t,n=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var i=e.target;s.initialize({target:t,trigger:$(i),type:"link",callback:function(e){n.setLink({link_id:"",link_type:"link",link_title:e,link_url:e})}})}},deleteLink:function(){this.setLink({})},setLink:function(e){this.model.set({wx_link:e}),this.model.set("wx_link_url",e.link_url||"")}})}),define("text!components/showcase/2.0.0/component/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group control-group-large">\n        <label class="control-label">自定义页面模块：</label>\n        <div class="controls" name="_id">\n            <div class="control-action">\n                <% if (_id !== \'\') { %>\n                    <div class="pull-left link-to">\n                        <a href="<%= link %>" target="_blank" class="new-window link-to-title">\n                            <span class="label label-success">\n                                自定义页面模块\n                                <em class="link-to-title-text"><%- title %></em>\n                            </span>\n                        </a>\n                    </div>\n                    <a href="javascript:void(0);" class="js-add-component add-component">修改</a>\n                <% } else { %>\n                    <a href="javascript:void(0);" class="js-add-component add-component">+添加</a>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/component/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/component/templates/edit.html","components/modal/1.0.0/modal"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/component/templates/edit.html"),s=e("components/modal/1.0.0/modal");return n.extend({template:t.template(i),events:{"click .js-add-component":"handleAddComponent"},handleAddComponent:function(){var e=this;this.componentModal=s.initialize({type:"component"}).setChooseItemCallback(function(t){e.model.set({type:"component",_id:t.data_id,title:t.title,link:t.data_url}),e.render()}),this.componentModal.modal("show")}})}),define("text!components/showcase/2.0.0/search/templates/edit.html",[],function(){return'<div class="app-component-desc">\n   <p>可随意插入任何页面和位置，方便粉丝快速搜索商品.</p>\n   <p>注意：记得给商品添加合适的商品标签吧。</p>\n</div>\n'}),define("components/showcase/2.0.0/search/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/search/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/search/templates/edit.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/line/templates/edit.html",[],function(){return'<div class="app-component-desc">\n    <p>辅助线</p>\n</div>\n'}),define("components/showcase/2.0.0/line/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/line/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/line/templates/edit.html");return n.extend({template:t.template(i)})}),define("components/showcase/1.0.0/base/views/base",["text!templates/add_content.html","backbone","core/utils"],function(e,t,n){var i=t.View.extend({addTemplate:e,initialize:function(e){this.options=e,_.isFunction(this.onBeforeInit)&&this.onBeforeInit.apply(this,arguments),_.isFunction(this.onInit)&&this.onInit.apply(this,arguments)},fullfillUrl:function(e,t){var i=$(e.target),s=$.trim(i.val());s=n.urlCheck(s),this.model.set(t,s),i.val(s);var o={};o[t]=s,this.model.validate(o),e.stopPropagation(),e.stopImmediatePropagation()},render:function(){return this.$el.html(this.template(this.model.attributes)),this},editing:function(e,t,n){this.options.showBoth?("config"!==this.model.get("type")&&$(".app-design-footer .app-preview .app-field").removeClass("editing"),this.$el.hasClass("app-field")&&this.$el.addClass("editing")):($(".app-preview .app-field").removeClass("editing"),this.$el.hasClass("app-field")?this.$el.addClass("editing"):this.$(".app-field").addClass("editing")),this.position(n),_.isFunction(this.showError)&&this.showError(n)},position:function(e){var t;t="add"===e?this.$el.position().top+this.$el.height()-32:this.$el.position().top,this.options.showBoth?"config"!==this.model.get("type")&&$(".app-design-footer .app-sidebar").css({marginTop:t}):$(".app-sidebar").css({marginTop:t})},toggle:function(e){return this.options.showBoth?(window.App.fieldCollection.length>1?$(".app-design-footer .app-sidebar").show():$(".app-design-footer .app-sidebar").hide(),_.isFunction(this.showError)&&this.showError(e),this):($(".app-sidebar-inner .app-sidebar-group").hide(),this.parent?this.parent.parent(".app-sidebar-group").show():this.$el.parents(".app-sidebar-group").show(),_.isFunction(this.showError)&&this.showError(e),this)},_updateModel:function(e,t){e=$.trim(e),t=$.trim(t);var n={};n[e]=t,this.model.set(n,{validate:!1})},validateAttr:function(e,t){if(this.model.validation&&e in this.model.validation){var n={};n[e]=t,this.model.validate(n)}},updateModel:function(e){var t=$(e.target),n=t.val(),i=t.attr("name");if(t.data("value-type")&&(n=window[t.data("value-type")](n)),!_.isUndefined(i)){"checkbox"===t[0].type.toLowerCase()&&(n=t[0].checked?1:0),i=i.split("[")[0];var s={};s[i]=_.isArray(n)?n:t.data("value-type")&&"String"!==t.data("value-type")?n:$.trim(n),this.model.set(s,{validate:!1}),this.validateAttr(i,n),e.stopPropagation()}},updateModel2:function(e){var t=$(e.target),n=t.data("type")||"String",i=t.attr("name"),s=this.model.get(i),o=t.val();"number"===n.toLowerCase()&&(o=+o);var l=t.attr("type").toLowerCase();switch(l){case"checkbox":var a=t.prop("checked");_.isArray(s)?a?(s.push(o),s=_.uniq(s)):s=_.without(s,o):s=o}var c={};c[i]=s,this.model.set(c,{validate:!1}),this.validateAttr(i,s),e.stopPropagation()}});return i}),define("text!components/showcase/2.0.0/cube/templates/selection_edit.html",[],function(){return'<div class="control-group">\n    <label class="control-label">图片占：</label>\n    <div class="controls">\n        <span class="control-action">\n            <%= show_method %> 列\n        </span>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>选择图片：</label>\n    <div class="controls" name="image_url">\n        <% if (image_id === \'\') { %>\n            <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="100" height="100" class="thumb-image">\n            <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">链接到：</label>\n    <div class="controls">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                    <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                    <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/cube/views/selection_edit",["components/showcase/1.0.0/base/views/base","text!components/showcase/2.0.0/cube/templates/selection_edit.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e,t,n,i,s,o,l){return e.extend({tagName:"li",className:"choice",template:_.template(t),dropdownTpl:_.template(n),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},initialize:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render),this.listenTo(this.model,"destroy",function(){this.remove()}),Backbone.Validation.bind(this)},render:function(){var e=this.model.cid,t=_.clone(this.model.attributes);_.extend(t,{cid:e,dropdown_menu:this.dropdownTpl});var n=this.model.get("image_url");return n=n&&l.fullfillImage(n),t.image_url=n,t.image_thumb_url=n,this.$el.html(this.template(t)),this},chooseImage:function(){var e=this;o.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.parent.model.calculateImage()}})},chooseLink:function(e){var t=this,n=$(e.target).data("type");s.initialize({type:n}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=$(e.target).data("type"),n=this;l.getStaticUrl(t,function(e){n.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,n=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;i.initialize({target:t,trigger:$(s),type:"link",callback:function(e){n.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})},"delete":function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void l.errorNotify("选项最多20个。");var e=_.clone(this.model.constructor.prototype.defaults),t=this.model.index();this.model.collection.add(e,{at:t+1,element:this.$el})}})}),define("text!components/showcase/2.0.0/cube/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <ul class="choices">\n\n        </ul>\n    </div>\n    <div class="control-group options">\n        <div class="controls">\n            <input type="hidden" name="sub_entry">\n            <a href="javascript:void(0);" class="js-add-option">+添加一列</a>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/cube/views/edit",["components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/cube/views/selection_edit","text!components/showcase/2.0.0/cube/templates/edit.html","components/showcase/2.0.0/cube/models/selection","components/pop/pop"],function(e,t,n,i,s){return e.extend({template:_.template(n),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-option":"addOption"},onInit:function(e){this.parent=e.parent;var n=this;this.listenTo(this.model.get("sub_entry"),"add",function(e,i,s){var o=new t({model:e,parent:n});s.element?o.render().$el.insertAfter(s.element):n.$(".choices").append(o.render().el)}),this.listenTo(this.model.get("sub_entry"),"remove",function(e,t){t.models.length<20&&n.$(".options").show(),n.model.calculateImage()}),this.listenTo(this.model.get("sub_entry"),"editing",function(e){this.model.trigger("editing",e)}),this._selectionEditView=[]},addOption:function(e){var t=$(e.target),n=this;s.initialize({type:"cube",trigger:t,target:t,data:{cols:n.model.checkCubeColspan()},callback:function(e){if(n.model.checkCubeColspan(e)){var t=i.Model.prototype.defaults();_.extend(t,e),n.model.get("sub_entry").add(t)}}})},render:function(){return this.$el.html(this.template(this.model.attributes)),this.renderSelection(),this},renderSelection:function(){var e=this;if(!(this._selectionEditView.length>0)){var n=this.model.get("sub_entry");n.each(function(n){var i=new t({model:n,parent:e});e._selectionEditView.push(i),e.$(".choices").append(i.render().el)})}}})}),define("text!components/showcase/2.0.0/cube2/templates/edit_item.html",[],function(){return'\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>选择图片：</label>\n    <div class="controls" name="image_url">\n        <% if (image_url === \'\') { %>\n            <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="100" height="100" class="thumb-image">\n            <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：<%- 160 * width %> x <%- 160 * height %> 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">链接到：</label>\n    <div class="controls">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                    <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                    <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">图片占：</label>\n    <div class="controls">\n        <div class="btn-group">\n            <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;">\n                <%- height %>行 <%- width %>列\n                <span class="caret"></span>\n            </a>\n            <ul class="dropdown-menu">\n                <% for(var i = 0; i < layout.length; i++) { %>\n                    <% var cols = layout[i].cols, rows = layout[i].rows; %>\n                    <li><a class="js-image-layout" href="javascript:;" data-width="<%- cols %>" data-height="<%- rows %>"><%- rows %>行 <%- cols %>列</a></li>\n                <% } %>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/cube2/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/cube2/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/cube2/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink","click .js-image-layout":"updateLayout"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render)},render:function(){var e=this.model.cid,n=t.clone(this.model.attributes);t.extend(n,{cid:e,dropdown_menu:this.dropdownTpl,layout:this.model.layout(this.parent.model.layoutMap)});var i=this.model.get("image_url");return i=i&&r.fullfillImage(i),n.image_url=i,n.image_thumb_url=i,this.$el.html(this.template(n)),this},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.parent.render()}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url}),t.parent.render()}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e}),i.parent.render()})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e}),i.parent.render()}})},updateLayout:function(e){var t=n(e.target);this.model.set({width:+t.data("width"),height:+t.data("height")}),this.parent.render()},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""}),this.parent.render()},"delete":function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void r.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1,element:this.$el})}})}),define("text!components/showcase/2.0.0/cube2/templates/layout_modal.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <ul class="module-nav modal-tab">\n        <li class="active hide">\n            <h4>选择布局</h4>\n        </li>\n    </ul>\n</div>\n<div class="modal-body clearfix layout-table">\n    <%\n        var result = [];\n        for(var i = 0; i < layout.length; i++){\n            result[layout[i].cols] = layout[i].rows;\n        }\n    %>\n    <% for(var i = 1; i < result.length; i++){ %>\n    <ul class="layout-cols layout-cols-<%- i %>">\n        <% for(var j = 1; j <= result[i]; j++){ %>\n            <% var cols = i, rows = j %>\n            <li data-cols="<%- cols %>" data-rows="<%- rows %>"></li>\n        <% } %>\n        </ul>\n    <% } %>\n</div>\n\n'}),define("components/showcase/2.0.0/cube2/views/layout_modal",["require","underscore","jquery","backbone","text!components/showcase/2.0.0/cube2/templates/layout_modal.html"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("text!components/showcase/2.0.0/cube2/templates/layout_modal.html"),o=i.View.extend({className:"modal hide fade",template:t.template(s),events:{"click .layout-cols li":"chooseLayout","mouseenter .layout-cols li":function(e){var t=n(e.target),i=+t.data("cols"),s=+t.data("rows"),o=this.$(".layout-table li").removeClass("selected");
o.filter(function(e,t){return t=n(t),+t.data("cols")<=i&&+t.data("rows")<=s}).addClass("selected")},hidden:"delete"},initialize:function(e){this.options=e||{},this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)).modal("show"),this},chooseLayout:function(e){var t=n(e.target),i=+t.data("cols"),s=+t.data("rows");this.options.callback&&this.options.callback({width:i,height:s}),this.$el.modal("hide")},"delete":function(){this.$el.data("modal",null),this.remove()}});return o}),define("text!components/showcase/2.0.0/cube2/templates/edit.html",[],function(){return'<form class="form-horizontal custom-cube2-table cube2-edit" novalidate>\n    <div class="control-group layout-map">\n        <label class="control-label">布局：</label>\n        <div class="controls" name="layout_map">\n            <table>\n                <tbody>\n                    <%= tableContent %>\n                </tbody>\n            </table>\n            <p class="help-desc">点击 + 号添加内容</p>\n        </div>\n    </div>\n    <div class="control-group js-item-region">\n        <ul class="choices"></ul>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/cube2/views/edit",["require","underscore","jquery","backbone","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/cube2/models/item","components/showcase/2.0.0/cube2/views/edit_item","components/showcase/2.0.0/cube2/views/layout_modal","text!components/showcase/2.0.0/cube2/templates/td.html","text!components/showcase/2.0.0/cube2/templates/edit.html"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("components/showcase/2.0.0/base/views/edit_base"),o=e("components/showcase/2.0.0/cube2/models/item"),l=e("components/showcase/2.0.0/cube2/views/edit_item"),a=e("components/showcase/2.0.0/cube2/views/layout_modal"),c=e("text!components/showcase/2.0.0/cube2/templates/td.html"),r=e("text!components/showcase/2.0.0/cube2/templates/edit.html");return s.extend({template:t.template(r),tdTemplate:t.template(c),events:{"click .empty":"add","click .not-empty":"edit","click td a":function(e){e.preventDefault()}},regions:{itemRegion:".js-item-region"},onInit:function(){this.currentSelection=-1,this.previousSelection=-1,this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"remove",this.delete),this.listenTo(this.model.get("sub_entry"),"valid:error",function(e){var t=this;setTimeout(function(){t.$(".not-empty[data-index="+e.index()+"]").trigger("click")},20)})},onBeforeRender:function(){this.model.denerateTableContent()},onRender:function(){0===this.$(".layout-map .empty").size()&&this.$(".layout-map .help-desc").hide(),this.suggestion(),this.renderSelection()},"delete":function(){this.currentSelection=-1,this.previousSelection=-1,this.render()},add:function(e){var t=this,s=this.model.get("sub_entry"),l=n(e.target),c=+l.data("x"),r=+l.data("y"),d=function(e){p.set(e),s.add(p,{silent:!0}),t.currentSelection=s.length-1,t.render()},p=o.initialize({x:c,y:r}),m=p.layout(this.model.layoutMap);return 1===m.length?void d({width:1,height:1}):void new a({model:new i.Model({layout:m}),callback:d})},edit:function(e){var t=n(e.currentTarget),i=+t.data("index");i!==this.currentSelection&&(this.currentSelection=i,this._slideSelection())},renderSelection:function(){var e=this,t=this.model.get("sub_entry");e.$(".choices").html(""),t.each(function(t,n){var i=new l({model:t,parent:e});i.render(),n!==e.previousSelection&&i.$el.hide(),e.$(".choices").append(i.el)}),this._slideSelection()},_slideSelection:function(){if(this.$("td").removeClass("current"),this.$("td[data-index="+this.currentSelection+"]").addClass("current"),this.previousSelection!==this.currentSelection){var e=this.$(".choice");e.eq(this.previousSelection).slideUp(),e.eq(this.currentSelection).slideDown(),this.previousSelection=this.currentSelection}},suggestion:function(){this.$el.find(".not-empty").filter(function(){return!n(this).find("img").attr("src")}).each(function(){var e=n(this),t=160*+e.attr("colspan"),i=160*+e.attr("rowspan");e.append("<span>"+t+"x"+i+"</span>")})}})}),define("text!components/showcase/2.0.0/tpl_shop/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (backgroundImage === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-shop-header" style="width: 320px; background-image: url(<%- fullfillImage(backgroundImage) %>);">\n                    <a class="close-modal small hide js-delete-image" data-index="0">×</a>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">最佳尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%- backgroundColor %>" name="backgroundColor">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">头像：</label>\n        <div class="controls">\n            <% if (avatar === \'\') { %>\n                <a class="control-action js-trigger-avatar" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%- fullfillImage(avatar) %>" width="80" height="80" class="thumb-image" style="width: 80px; height: 80px;">\n                <a class="control-action js-trigger-avatar" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：160 x 160 像素</p>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_shop/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_shop/templates/edit.html","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_shop/templates/edit.html"),s=e("components/image/1.0.0/image"),o=e("core/utils");return n.extend({template:t.template(i),events:{'blur input[type="text"]':"updateModel",'change input[type="color"]':"changeColor","click .js-reset-bg":"resetBg","click .js-trigger-image":"chooseImage","click .js-trigger-avatar":"chooseAvatar","click .js-delete-image":"deleteImage"},templateHelpers:{fullfillImage:o.fullfillImage},resetBg:function(){this.$('input[type="color"]').val("#EF483F"),this._changeColor("#EF483F")},changeColor:function(e){this._changeColor(e.target.value)},_changeColor:function(e){this.model.set({backgroundColor:e})},chooseImage:function(){this._openImageModal(function(e){this.model.set("backgroundImage",e)})},chooseAvatar:function(){this._openImageModal(function(e){this.model.set("avatar",e)})},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url),this.render()},this);s.initialize({multiChoose:!1,callback:n})},deleteImage:function(){this.model.set({backgroundImage:""})}})}),define("text!components/showcase/2.0.0/tpl_weixin/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(background) %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-block">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景链接：</label>\n        <div class="controls" name="link_url">\n            <% if (bg_link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (bg_link_title !== \'\') { %>\n                            <a href="<%= bg_link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n                        <span class="label label-success">\n                            <% if (bg_link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (bg_link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (bg_link_type === \'topic\') { %>\n                                专题\n                            <% } else if (bg_link_type === \'article\') { %>\n                                资讯\n                            <% } else if (bg_link_type === \'goods\') { %>\n                                商品\n                            <% } else if (bg_link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (bg_link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (bg_link_type === \'survey\') { %>\n                                调查\n                            <% } else if (bg_link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (bg_link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (bg_link_type === \'link\') { %>\n                                外链\n                            <% } else if (bg_link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (bg_link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- bg_link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group white-space-group">\n        <label class="control-label">导航位置：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height hide"><span class="js-top"><%= top %></span> %</div>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>名称：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_weixin/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink"},onInit:function(){this.listenTo(this.model,"change",this.render)},chooseLink:function(e){var t=this,i=n(e.target).data("type");e.stopPropagation(),a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;e.stopPropagation(),c.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;e.stopPropagation(),t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_weixin/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_weixin/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_weixin/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_weixin/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_weixin/templates/edit.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/showcase/2.0.0/tpl_weixin/views/edit_collection","components/image/1.0.0/image","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_weixin/templates/edit.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/showcase/2.0.0/tpl_weixin/views/edit_collection"),c=e("components/image/1.0.0/image"),r=e("components/modal/1.0.0/modal"),d=e("core/utils");return i.extend({template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{fullfillImage:d.fullfillImage,dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink"},modelEvents:{"change:bg_link_url":"render"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.renderSilder(),this.toggleOptions()},renderSilder:function(){var e=this,n=e.$(".js-top");this.$(".js-slider").slider({min:0,max:100,value:e.model.get("top"),slide:function(i,s){var o=s.value;t.isNumber(o)&&e.model.set("top",o),n.text(o)}})},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()},chooseLink:function(e){var t=this,i=n(e.target).data("type");r.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({bg_link_id:e.data_id,bg_link_type:e.type,bg_link_title:e.data_title,bg_link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;d.getStaticUrl(t,function(e){i.model.set({bg_link_id:"",bg_link_type:t,bg_link_title:"",bg_link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({bg_link_id:"",bg_link_type:"link",bg_link_title:e,bg_link_url:e})}})}})}),define("text!components/showcase/2.0.0/tpl_fbb/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(background) %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景链接：</label>\n        <div class="controls" name="link_url">\n            <% if (bg_link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (bg_link_title !== \'\') { %>\n                            <a href="<%= bg_link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n                        <span class="label label-success">\n                            <% if (bg_link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (bg_link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (bg_link_type === \'topic\') { %>\n                                专题\n                            <% } else if (bg_link_type === \'article\') { %>\n                                资讯\n                            <% } else if (bg_link_type === \'goods\') { %>\n                                商品\n                            <% } else if (bg_link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (bg_link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (bg_link_type === \'survey\') { %>\n                                调查\n                            <% } else if (bg_link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (bg_link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (bg_link_type === \'link\') { %>\n                                外链\n                            <% } else if (bg_link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (bg_link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- bg_link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">导航链接</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:;"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>小标题：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">小图标：</label>\n    <div class="controls">\n        <% if (icon_image_url === \'\') { %>\n            <a class="control-action js-icon-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= fullfillImage(icon_image_url) %>" width="30" height="30" class="thumb-image">\n            <a class="control-action js-icon-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-icon">删除</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：60 x 60 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">简介：</label>\n    <div class="controls">\n        <input type="text" name="text" value="<%- text %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">背景图：</label>\n    <div class="controls">\n        <% if (bg_image_url === \'\') { %>\n            <a class="control-action js-bg-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= fullfillImage(bg_image_url) %>" width="100" height="100" class="thumb-image">\n            <a class="control-action js-bg-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-bg">删除</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：85 x 188 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">日期：</label>\n    <div class="controls">\n        <input type="text" name="date" value="<%- date %>">\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_fbb/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{dropdown_menu:this.dropdownTpl,fullfillImage:r.fullfillImage}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-bg-image":"chooseImage","click .js-icon-image":"chooseIconImage","click .js-trigger-delete-bg":"deleteImage","click .js-trigger-delete-icon":"deleteIconImage"},onInit:function(){this.listenTo(this.model,"change:link_url change:bg_image_url change:icon_image_url",this.render)},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({bg_image_id:t.attachment_id,bg_image_url:t.attachment_url,bg_image_width:Number(t.width),bg_image_height:Number(t.height)})}})},deleteImage:function(){this.model.set({bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:""})},chooseIconImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({icon_image_id:t.attachment_id,icon_image_url:t.attachment_url,icon_image_width:Number(t.width),icon_image_height:Number(t.height)})}})},deleteIconImage:function(){this.model.set({icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""})},chooseLink:function(e){var t=this,i=n(e.target).data("type");e.stopPropagation(),a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;e.stopPropagation(),r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})
})},chooseOtherLink:function(e){var t,i=this;e.stopPropagation(),t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_fbb/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_fbb/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_fbb/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_fbb/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_fbb/templates/edit.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/showcase/2.0.0/tpl_fbb/views/edit_collection","components/image/1.0.0/image","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_fbb/templates/edit.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/showcase/2.0.0/tpl_fbb/views/edit_collection"),c=e("components/image/1.0.0/image"),r=e("components/modal/1.0.0/modal"),d=e("core/utils");return i.extend({template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{fullfillImage:d.fullfillImage,dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model,"change:bg_link_url",this.render),this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()},chooseLink:function(e){var t=this,i=n(e.target).data("type");r.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({bg_link_id:e.data_id,bg_link_type:e.type,bg_link_title:e.data_title,bg_link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;d.getStaticUrl(t,function(e){i.model.set({bg_link_id:"",bg_link_type:t,bg_link_title:"",bg_link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({bg_link_id:"",bg_link_type:"link",bg_link_title:e,bg_link_url:e})}})}})}),define("text!components/showcase/2.0.0/tpl_course/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= background %>" data-full-size="<%= background %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-block">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" maxlength="10">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= title_color %>" name="title_color">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">副标题：</label>\n        <div class="controls">\n            <input type="text" name="sub_title" value="<%- sub_title %>" maxlength="20">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">副标题颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= sub_title_color %>" name="sub_title_color">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">按钮文字：</label>\n        <div class="controls">\n            <input type="text" name="button_text" value="<%- button_text %>" maxlength="10">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>按钮链接：</label>\n        <div class="controls js-parent-link">\n            <input type="hidden" name="button_link_url" value="<%= button_link_url %>">\n            <% if (button_link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (button_link_title !== \'\') { %>\n                            <a href="<%= button_link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n                        <span class="label label-success">\n                            <% if (button_link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (button_link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (button_link_type === \'topic\') { %>\n                                专题\n                            <% } else if (button_link_type === \'article\') { %>\n                                资讯\n                            <% } else if (button_link_type === \'goods\') { %>\n                                商品\n                            <% } else if (button_link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (button_link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (button_link_type === \'survey\') { %>\n                                调查\n                            <% } else if (button_link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (button_link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (button_link_type === \'link\') { %>\n                                外链\n                            <% } else if (button_link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (button_link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- button_link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group white-space-group tpl-course-white-space-group">\n        <label class="control-label">按钮离顶部：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height"><span class="js-height"><%= top %></span> %</div>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">导航链接</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n    </div>\n\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:;"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_course/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>小标题：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">小图标：</label>\n    <div class="controls">\n        <% if (icon_image_url === \'\') { %>\n            <a class="control-action js-icon-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= icon_image_url %>" data-full-size="<%= icon_image_url %>" width="30" height="30" class="thumb-image">\n            <a class="control-action js-icon-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-icon">删除</a>\n        <% } %>\n        <p class="help-block">建议尺寸：60 x 60 像素</p>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_course/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_course/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_course/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-bg-image":"chooseImage","click .js-icon-image":"chooseIconImage","click .js-trigger-delete-bg":"deleteImage","click .js-trigger-delete-icon":"deleteIconImage"},modelEvents:{change:"render"},serializeData:function(){var e=this.model.toJSON();return e.icon_image_url=r.fullfillImage(e.icon_image_url),e.bg_image_url=r.fullfillImage(e.bg_image_url),e.dropdown_menu=this.dropdownTpl,e},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({bg_image_id:t.attachment_id,bg_image_url:t.attachment_url,bg_image_width:Number(t.width),bg_image_height:Number(t.height)})}})},deleteImage:function(){this.model.set({bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:""})},chooseIconImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({icon_image_id:t.attachment_id,icon_image_url:t.attachment_url,icon_image_width:Number(t.width),icon_image_height:Number(t.height)})}})},deleteIconImage:function(){this.model.set({icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_course/views/edit_colleciton",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_course/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_course/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_course/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_course/templates/edit.html","text!components/public_template/dropdown_menu.html","components/showcase/2.0.0/tpl_course/views/edit_colleciton","components/image/1.0.0/image","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_course/templates/edit.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/showcase/2.0.0/tpl_course/views/edit_colleciton"),a=e("components/image/1.0.0/image"),c=e("components/pop/pop"),r=e("components/modal/1.0.0/modal"),d=e("core/utils");return i.extend({template:t.template(s),dropdownTpl:t.template(o),events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg","click .js-parent-link .js-modal-magazine, .js-parent-link .js-modal-goods, .js-parent-link .js-modal-activity, .js-parent-link .js-modal-survey":"chooseLink","click .js-parent-link .js-modal-history, .js-parent-link .js-modal-homepage, .js-parent-link .js-modal-usercenter":"chooseStaticLink","click .js-parent-link .js-modal-links":"chooseOtherLink"},modelEvents:{"change:background":"render"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model,"change:button_link_url",this.render),this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},serializeData:function(){var e=this.model.toJSON();return e.background=d.fullfillImage(e.background),e.dropdown_menu=this.dropdownTpl,e},onRender:function(){this.collectionRegion.show(new l({collection:this.model.get("sub_entry"),layout:this})),this.renderSlider(),this.toggleOptions()},renderSlider:function(){var e=this,n=e.$(".js-height");this.$(".js-slider").slider({min:0,max:100,value:e.model.get("top"),slide:function(i,s){var o=s.value;t.isNumber(o)&&e.model.set("top",o),n.text(o)}})},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},chooseLink:function(e){var t=this,i=n(e.target).data("type");r.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({button_link_id:e.data_id,button_link_type:e.type,button_link_title:e.data_title,button_link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;d.getStaticUrl(t,function(e){i.model.set({button_link_id:"",button_link_type:t,button_link_title:"",button_link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;c.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({button_link_id:"",button_link_type:"link",button_link_title:e,button_link_url:e})}})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")}})}),define("text!components/showcase/2.0.0/tpl_wxd/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (backgroundImage === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-wxd">\n                    <div class="tpl-wxd-bg">\n                        <img src="<%- backgroundImage %>" alt="">\n                    </div>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">头像：</label>\n        <div class="controls">\n            <% if (avatar === \'\') { %>\n                <a class="control-action js-trigger-avatar" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%- avatar %>" width="80" height="80" class="thumb-image" style="width: 80px; height: 80px;">\n                <a class="control-action js-trigger-avatar" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：160 x 160 像素</p>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_wxd/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_wxd/templates/edit.html","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_wxd/templates/edit.html"),s=e("components/image/1.0.0/image"),o=e("core/utils");return n.extend({template:t.template(i),events:{"click .js-trigger-image":"chooseImage","click .js-trigger-avatar":"chooseAvatar"},serializeData:function(){var e=this.model.toJSON();return e.avatar=o.fullfillImage(e.avatar)||"",e.backgroundImage=o.fullfillImage(e.backgroundImage)||"",e},chooseImage:function(){this._openImageModal(function(e){this.model.set("backgroundImage",e)})},chooseAvatar:function(){this._openImageModal(function(e){this.model.set("avatar",e)})},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url),this.render()},this);s.initialize({multiChoose:!1,callback:n})}})}),define("text!components/showcase/2.0.0/tpl_11_11/templates/edit.html",[],function(){return'<form class="form-horizontal edit-tpl-11-11" novalidate onsubmit="return false">\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (banner === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-shop-header" style="width: 320px; background-image: url(<%- fullfillImage(banner) %>);">\n                    <a class="close-modal small hide js-delete-image" data-index="0">×</a>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">最佳尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n            <input type="hidden" name="banner">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">优惠券：</label>\n        <div class="controls">\n            <ul class="tradeincard-list">\n            <% _.each(tradeincard, function(item) { %>\n                <li>\n                    <div class="tradeincard-list-content">\n                        <div class="tradeincard-list-summary">\n                            <span class="label label-success">优惠券</span>\n                            <span><%- item.name %></span>\n                            <span class="c-gray">\n                                （满<%= item.at_least %>元可用）\n                            </span>\n                        </div>\n                    </div>\n                    <div class="tradeincard-list-opts">\n                        <a href="javascript:;" class="js-remove-tradeincard">删除</a>\n                    </div>\n                </li>\n\n            <% }); %>\n            </ul>\n            <% if(tradeincard.length < 3) { %>\n                <a href="javascript:;" class="control-action js-add-tradeincard">添加优惠券</a>\n            <% } %>\n            <input type="hidden" name="tradeincard">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">公告：</label>\n        <div class="controls">\n            <input type="text" name="notice" value="<%= notice %>" class="input-xxlarge" placeholder="请填写内容，如果过长，将会在手机上滚动显示">\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_11_11/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_11_11/templates/edit.html","components/image/1.0.0/image","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_11_11/templates/edit.html"),s=e("components/image/1.0.0/image"),o=e("components/modal/1.0.0/modal"),l=e("core/utils");return n.extend({template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-delete-image":"deleteImage","click .js-add-tradeincard":"addTradeincard","click .js-remove-tradeincard":"removeTradeincard"},templateHelpers:{fullfillImage:l.fullfillImage},modelEvents:{"change:banner":"render","change:tradeincard":"render"},chooseImage:function(){this._openImageModal(function(e){this.model.set("banner",e)})},onRender:function(){},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url)},this);s.initialize({multiChoose:!1,callback:n})},deleteImage:function(){this.model.set("banner","")},addTradeincard:function(){var e=this;this.tradeincardModal=o.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(n){var i=e.model.get("tradeincard");t.each(n,function(e){i.length<3&&i.push({id:e.id,name:e.name,value:e.value,is_at_least:e.is_at_least,at_least:e.at_least})}),e.model.trigger("change:tradeincard"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},removeTradeincard:function(e){var t=$(e.target).parents("li").index(),n=this.model.get("tradeincard");n.splice(t,1),this.model.trigger("change:tradeincard"),this.model.trigger("change")}})}),define("text!components/showcase/2.0.0/category/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label">名称：</label>\n    <div class="controls">\n        <input class="" type="text" name="title" value="<%- title %>" maxLength="6">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls">\n        <input type="hidden" name="link_url">\n        <% if (link_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (link_title !== \'\') { %>\n                    <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n\n                    <span class="label label-success">\n                        <% if (link_type === \'feature\') { %>\n                            微杂志\n                        <% } else if (link_type === \'category\') { %>\n                            微杂志分类\n                        <% } else if (link_type === \'topic\') { %>\n                            专题\n                        <% } else if (link_type === \'article\') { %>\n                            资讯\n                        <% } else if (link_type === \'goods\') { %>\n                            商品\n                        <% } else if (link_type === \'tag\') { %>\n                            商品标签\n                        <% } else if (link_type === \'activity\') { %>\n                            营销活动\n                        <% } else if (link_type === \'survey\') { %>\n                            调查\n                        <% } else if (link_type === \'homepage\') { %>\n                            店铺主页\n                        <% } else if (link_type === \'usercenter\') { %>\n                            会员主页\n                        <% } else if (link_type === \'link\') { %>\n                            外链\n                        <% } else if (link_type === \'history\') { %>\n                            历史信息\n                        <% } %>\n                    <% if (link_title !== \'\') { %>\n                            <em class="link-to-title-text"><%- link_title %></em>\n                        </span>\n                    </a>\n                    <% } else { %>\n                        </span>\n                    <% } %>\n                    <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                </div>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <%= dropdown_menu() %>\n            </div>\n        <% } %>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/category/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/category/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/category/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]':"updateModel","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(){this.listenTo(this.model,"change:link_url",this.render)},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;c.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})
})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})}})}),define("components/showcase/2.0.0/category/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/category/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/category/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/category/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group js-collection-region">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/category/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/category/views/edit_collection","text!components/showcase/2.0.0/category/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/category/views/edit_collection"),s=e("text!components/showcase/2.0.0/category/templates/edit.html");return n.extend({template:t.template(s),regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/white/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group white-space-group">\n        <label class="control-label">空白高度：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height"><span class="js-height"><%= height %></span> 像素</div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/white/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/white/templates/edit.html","jqueryui"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/white/templates/edit.html");return e("jqueryui"),n.extend({template:t.template(i),ui:{slider:".js-slider",height:".js-height"},onShow:function(){var e=this;this.ui.slider.slider({min:30,max:100,value:e.model.get("height"),slide:function(n,i){var s=i.value;t.isNumber(s)&&e.model.set("height",s),e.ui.height.text(s)}})}})}),define("text!components/showcase/2.0.0/store/templates/edit.html",[],function(){return'<div class="app-component-desc">\n    <p>进入店铺</p>\n</div>\n'}),define("components/showcase/2.0.0/store/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/store/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/store/templates/edit.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/recommend_goods/templates/edit.html",[],function(){return"<p>如果店铺中上架的商品数量少于10个，这个组件将不会在页面中显示。</p>\n"}),define("components/showcase/2.0.0/recommend_goods/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/recommend_goods/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/recommend_goods/templates/edit.html");return n.extend({className:"app-component-desc",template:t.template(i),onInit:function(e){this.parent=e.parent,this.listenTo(this.model,"change",this.render)}})}),define("text!components/music/2.0.0/templates/app.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <!-- 顶部tab -->\n    <ul class="module-nav modal-tab">\n        <li class="active"><a href="javascript:;" data-pane="public" class="js-modal-tab">配乐库</a> | </li>\n        <li><a href="javascript:;" data-pane="my" class="js-modal-tab">我的音乐</a></li>\n    </ul>\n</div>\n<div class="js-content-region">\n\n</div>\n<audio id="custom_scroll_audio_player" src=""></audio>\n'}),define("text!components/music/2.0.0/templates/public_music.html",[],function(){return'<div class="tab-pane">\n    <div class="modal-body">\n        <table class="ui-table ui-table-list">\n            <thead>\n                <tr>\n                    <th>音乐</th>\n                    <th class="text-center">时长</th>\n                    <th class="text-right">大小</th>\n                    <th class="text-center">风格</th>\n                    <th class="text-right">操作</th>\n                </tr>\n            </thead>\n            <tbody>\n                <% _.each(musics, function(music, index) { %>\n                <tr data-title="<%- music.title %>" data-url="<%- music.url %>">\n                    <td>\n                        <span class="music-preview js-paly-music"></span>\n                        <div class="music-content">\n                            <%= music.title %>\n                            <% if(music.description) { %>\n                                <p class="music-description"><%= music.description %></p>\n                            <% } %>\n                        </div>\n                    </td>\n                    <td class="text-center"><%- music.time %></td>\n                    <td class="text-right"><%- music.size %></td>\n                    <td class="text-center"><%- music.type %></td>\n                    <td class="text-right">\n                        <% if(music.url != currentUrl) { %>\n                        <button class="ui-btn js-btn-choose">选取</button>\n                        <% } else { %>\n                        <button class="ui-btn ui-btn-disabled">已选</button>\n                        <% } %>\n                    </td>\n                </tr>\n                <% }) %>\n            </tbody>\n        </table>\n\n    </div>\n    <div class="modal-footer">\n        <div class="pagenavi js-pagenavi">\n            <% for(var i = 1; i < totalPage + 1; i++ ) { %>\n            <a data-page-num="<%= i %>" href="javascript:;" class="num <% if(i == p) { %>active<% } %>"><%= i %></a>\n            <% } %>\n        </div>\n    </div>\n</div>\n'}),define("components/music/2.0.0/data",[],function(){return{musics:[{title:"Lucky Day",url:"public_files/music/Lucky Day.mp3",type:"节奏",time:"01:08",size:"543 KB"},{title:"Parasail",url:"public_files/music/Parasail.mp3",type:"节奏",time:"03:04",size:"1.5 MB"},{title:"Phase Three",url:"public_files/music/Phase Three.mp3",type:"节奏",time:"03:08",size:"1.5 MB"},{title:"Say Yeah",url:"public_files/music/Say Yeah.mp3",type:"节奏",time:"03:11",size:"1.5 MB"},{title:"Soft",url:"public_files/music/Soft.mp3",type:"节奏",time:"01:23",size:"666 KB"},{title:"The Wrong Way",url:"public_files/music/The Wrong Way.mp3",type:"节奏",time:"02:45",size:"1.3 MB"},{title:"Road to Moscow",url:"public_files/music/Road to Moscow.mp3",type:"轻快",time:"01:14",size:"594 KB"},{title:"No Pressha",url:"public_files/music/No Pressha.mp3",type:"轻快",time:"01:27",size:"700 KB"},{title:"Rotten Gardenias",url:"public_files/music/Rotten Gardenias.mp3",type:"轻快",time:"02:17",size:"1.1 MB"},{title:"Sound Off",url:"public_files/music/Sound Off.mp3",type:"轻快",time:"01:36",size:"769 KB"},{title:"Swamp Stomp",url:"public_files/music/Swamp Stomp.mp3",type:"轻快",time:"02:05",size:"1 MB"},{title:"Jazz In Paris",url:"public_files/music/Jazz In Paris.mp3",type:"轻快",time:"01:42",size:"821 KB"},{title:"Let's Do It",url:"public_files/music/Let's Do It.mp3",type:"放松",time:"03:14",size:"1.6 MB"},{title:"Monks",url:"public_files/music/Monks.mp3",type:"放松",time:"03:10",size:"1.5 MB"},{title:"Pluto",url:"public_files/music/Pluto.mp3",type:"放松",time:"02:13",size:"1.1 MB"},{title:"抱着你",url:"public_files/music/baozheni.mp3",type:"放松",time:"04:28",size:"1.9 MB",description:"由口袋通商户 <em>VINOTECA</em> 提供正版授权"}]}}),define("components/music/2.0.0/views/public_music",["require","underscore","jquery","marionette","text!components/music/2.0.0/templates/public_music.html","components/music/2.0.0/data"],function(e){var t=e("underscore"),n=e("jquery"),i=e("marionette"),s=e("text!components/music/2.0.0/templates/public_music.html"),o=e("components/music/2.0.0/data"),l=10;return i.Layout.extend({template:t.template(s),events:{"click .js-pagenavi .num":"handlePageClick"},p:1,initialize:function(e){this.options=e||{},this.layout=this.options.layout},serializeData:function(){var e={};return e.musics=o.musics.slice((this.p-1)*l,this.p*l),t.extend(e,{currentUrl:this.options.currentUrl,p:this.p,totalPage:Math.ceil(o.musics.length/l)})},handlePageClick:function(e){var t=+n(e.target).data("page-num");t!==this.p&&(this.p=t,this.render(),this.layout.stopMusic())}})}),define("components/music/2.0.0/models/music",["require","underscore","jquery","backbone","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("core/utils"),o=window._global;return i.Model.extend({defaults:{items:null,page:"",p:1},sync:function(e){return s.ajax(e)},ajax:function(e,i){var s=n.Deferred();return"object"==typeof e&&(i=e,e=void 0),i=t.defaults(i||{},{dataType:"json"}),s.xhr=n.ajax(e,i).done(function(e){0===+e.errcode?s.resolve(e.data,e):s.reject(e.errmsg,e)}).fail(function(){s.reject("网络错误。",{code:-1,msg:"网络错误。"})}),s},fetch:function(e){var n=this;return e=e||{},this.ajax({url:o.url.www+"/showcase/attachment/alert.json",method:"GET",data:t.extend({media_type:5,s:10,v:2,p:this.get("p")},e)}).done(function(e){n.set({items:e.data_list,page:e.page_view},{silent:!0}),n.trigger("sync")}).fail(function(e){s.errorNotify(e)})},uploadMusic:function(){var e=this,t=n.Deferred();return this.getToken().done(function(n){e.upload(n.uptoken).done(function(e,n){t.resolve(e,n)}).fail(function(e){t.reject(e)})}).fail(function(){t.reject("获取token失败，请重试。")}),t},getToken:function(){return this.sync({url:o.url.www+"/common/qiniu/upToken.json",method:"POST",data:{scope:o.js.qn_public,kdt_id:n.cookie("kdt_id")}})},upload:function(e){var t=new FormData;return t.append("token",e),t.append("file",this.get("file")),t.append("x:kdt_type","music"),this.sync({url:"http://up.qiniu.com",method:"POST",data:t,processData:!1,contentType:!1})}})}),define("text!components/music/2.0.0/templates/my_music.html",[],function(){return'<div class="tab-pane">\n    <div class="modal-body">\n        <div class="ui-box music-upload">\n            <p>根据中国相关法律、法规和规范性文件要求，口袋通制定了旨在保护知识产权权利人合法权益的措施和步骤。如背景音乐上传者上传的内容侵犯音乐著作权权利人相关权益，责任由上传者全部承担，口袋通不承担任何连带责任。</p>\n\n\n            <div class="music-upload-btn">\n                <a class="ui-btn ui-btn-primary music-upload-label js-music-upload-label" href="javascript:;" data-loading-text="正在上传...">同意协议，上传音乐</a>\n                <input class="music-upload-input fileupload js-upload-music-input" type="file" name="upload_music">\n                <span class="c-gray" style="margin-left: 10px;">支持MP3格式音乐，大小不超过6M</span>\n            </div>\n\n        </div>\n\n        <% if(items && items.length > 0) { %>\n            <table class="ui-table ui-table-list">\n                <thead>\n                    <tr>\n                        <th>音乐</th>\n                        <th class="text-right">操作</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <% _.each(items, function(music, index) { %>\n                    <tr data-title="<%- music.attachment_title.replace(/\\.mp3$/i, \'\') %>" data-url="<%- music.attachment_url %>">\n                        <td>\n                            <span class="music-preview js-paly-music"></span>\n                            <div class="music-content">\n                                <%= music.attachment_title.replace(/\\.mp3$/i, \'\') %>\n                                <% if(music.description) { %>\n                                    <p class="music-description"><%= music.description %></p>\n                                <% } %>\n                            </div>\n                        </td>\n                        <td class="text-right">\n                            <button class="ui-btn js-btn-choose">选取</button>\n                        </td>\n                    </tr>\n                    <% }) %>\n                </tbody>\n            </table>\n        <% } else { %>\n        <div class="no-result">还没有上传的音乐。</div>\n        <% } %>\n    </div>\n    <div class="modal-footer">\n        <div class="pagenavi js-pagenavi">\n            <%= page %>\n        </div>\n    </div>\n</div>\n'}),define("components/music/2.0.0/views/my_music",["require","underscore","jquery","marionette","components/music/2.0.0/models/music","core/utils","text!components/music/2.0.0/templates/my_music.html"],function(e){var t=e("underscore"),n=e("jquery"),i=e("marionette"),s=e("components/music/2.0.0/models/music"),o=e("core/utils"),l=e("text!components/music/2.0.0/templates/my_music.html");return i.Layout.extend({template:t.template(l),events:{"click .js-pagenavi .num":"handlePageClick","change .js-upload-music-input":"handleFileChange","click .pagenavi a:not(.active)":"handlePageNumClick","keypress .pagenavi a.active":"handlePageNumKeypress"},modelEvents:{sync:"render"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.model=new s,this.model.fetch()},onRender:function(){this.layout.stopMusic()},handlePageClick:function(e){var t=+n(e.target).data("page-num");t!==this.p&&this.layout.stopMusic()},handleFileChange:function(e){var t=this,n=e.target.files[0];return n.name.match(/(\.|\/)(mp3)$/i)?n.size>6291456?void o.errorNotify("音乐文件大小不能超过6MB。"):(this.$(".js-music-upload-label").btn("loading"),this.$(".js-upload-music-input").hide(),this.model.set("file",n,{silent:!0}),void this.model.uploadMusic().done(function(e){t.options.callback&&t.options.callback({url:e.attachment_full_url,title:e.attachment_title.replace(/\.mp3$/i,"")}),t.layout.$el.modal("hide")}).fail(function(e){o.errorNotify(e),t.$(".js-music-upload-label").btn("reset"),t.$(".js-upload-music-input").show()})):void o.errorNotify("请选择MP3格式的音乐文件。")},handlePageNumClick:function(e){var t=n(e.currentTarget),i=t.data("page-num");this.model.set("p",i,{silent:!0}),this.model.fetch()},handlePageNumKeypress:function(e){var t=+n(e.currentTarget).text();o.isNumber(e)||e.preventDefault(),e.keyCode===o.keyCode.ENTER&&(t!==+this.model.get("p")&&t&&(this.model.set("p",t,{silent:!0}),this.model.fetch({scroll:!0})),e.preventDefault())}})}),define("components/spider/ui/btn",["require","jquery"],function(e){var t=e("jquery"),n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i)};n.DEFAULTS={loadingText:"保存中..."},n.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.is("input")?"val":"html",s=n.data();e+="Text",s.resetText||n.data("resetText",n[i]()),n[i](s[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass("ui-btn-"+t).attr(t,t):n.removeClass("ui-btn-"+t).removeAttr(t)},0)},n.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]'),t=!0;if(e.length){var n=this.$element.find("input");"radio"===n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var i=t.fn.btn;t.fn.btn=function(e){return this.each(function(){var i=t(this),s=i.data("kdt.btn"),o="object"==typeof e&&e;s||i.data("kdt.btn",s=new n(this,o)),"toggle"==e?s.toggle():e&&s.setState(e)})},t.fn.btn.Constructor=n,t.fn.btn.noConflict=function(){return t.fn.btn=i,this},t(document).on("click.kdt.btn.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("ui-btn")||(n=n.closest(".ui-btn")),n.button("toggle"),e.preventDefault()})}),define("components/spider/ui/switch",["require","jquery"],function(e){var t=e("jquery"),n="ui-switch-on",i="ui-switch-off",s=function(e,n){this.$element=t(e),this.options=t.extend({},s.DEFAULTS,n)};s.DEFAULTS={},s.prototype.setState=function(e){var t=this.$element,s="ui-switch-"+e;t.removeClass(n).removeClass(i).addClass(s)},s.prototype.toggle=function(){this.setState(this.$element.hasClass(n)?"off":"on")},t.fn.switch=function(e){return"val"===e?this.hasClass(n):this.each(function(){var n=t(this),i=n.data("kdt.switch"),o="object"==typeof e&&e;return i||n.data("kdt.switch",i=new s(this,o)),"toggle"===e?i.toggle():void(e&&i.setState(e))})}}),define("components/spider/spider",["require","jquery","components/spider/ui/btn","components/spider/ui/switch"],function(e){var t=e("jquery");return e("components/spider/ui/btn"),e("components/spider/ui/switch"),t}),define("components/music/2.0.0/music",["require","underscore","jquery","marionette","text!components/music/2.0.0/templates/app.html","components/music/2.0.0/views/public_music","components/music/2.0.0/views/my_music","core/utils","components/spider/spider"],function(e){var t=e("underscore"),n=e("jquery"),i=e("marionette"),s=e("text!components/music/2.0.0/templates/app.html"),o=e("components/music/2.0.0/views/public_music"),l=e("components/music/2.0.0/views/my_music"),a=e("core/utils");e("components/spider/spider");var c=i.Layout.extend({className:"modal fade hide music-v2-modal",template:t.template(s),events:{hidden:"hidden","click .js-modal-tab":"handleTabClick","click .js-btn-choose":"chooseMusic","click .js-paly-music":"playMusic"},regions:{content:".js-content-region"},initialize:function(e){this.options=e||{},this.cache={},this.render()},onRender:function(){this.renderPublicMusicView(),this.$el.modal("show"),this.initPlayer()},renderPublicMusicView:function(){this.content.show(new o(t.extend({layout:this},this.options)))},renderMyMusicView:function(){this.content.show(new l(t.extend({layout:this},this.options)))},handleTabClick:function(e){var t=n(e.target),i=t.parent(),s=t.data("pane");i.hasClass("active")||(this.$(".modal-tab > li").removeClass("active"),i.addClass("active"),"public"===s?this.renderPublicMusicView():this.renderMyMusicView(),this.stopMusic())},initPlayer:function(){var e=this;this.player=this.$("#custom_scroll_audio_player")[0],this.player.addEventListener("ended",function(){e.$(".playing").removeClass("playing")})},chooseMusic:function(e){var t=n(e.target),i=t.parents("tr").data();this.options.callback&&this.options.callback(i),this.hideModal()},playMusic:function(e){var t=n(e.target),i=t.parents("tr").data();t.hasClass("playing")?(t.removeClass("playing"),this.player.pause(),this.player.currentTime=0):(this.$(".playing").removeClass("playing"),t.addClass("playing"),this.player.src=a.fullfillImage(i.url),this.player.play())},stopMusic:function(){this.$(".playing").removeClass("playing"),0!==this.player.readyState&&(this.player.pause(),this.player.currentTime=0)},hideModal:function(){this.$el.modal("hide")},hidden:function(){this.$el.data("modal",null),this.close()},onClose:function(){this.player=null}});return{initialize:function(e){new c(e)}}}),define("text!components/showcase/2.0.0/scroll/templates/edit_meta.html",[],function(){return'<div class="control-group">\n    <label class="control-label">主页图标：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="homepage_icon" <% if(homepage_icon == \'1\') {%>checked<%}%>>\n            显示店铺主页图标，用户点击后进入店铺主页\n        </label>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">背景音乐：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="music_icon" <% if(music_icon == \'1\') {%>checked<%}%>>\n            启用背景音乐：\n        </label>\n\n        <% if(music_url) { %>\n            <div class="music-box">\n                <span class="label label-success js-music"><%= music_title %></span>\n                <a href="javascript:;" class="js-delete-music close-modal" title="删除">×</a>\n            </div>\n            <a href="javascript:;" class="choose-music js-music">修改</a>\n        <% } else { %>\n            <a href="javascript:;" class="choose-music js-music">选择音乐</a>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">循环滚动：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="loop" <% if(loop == \'1\') {%>checked<%}%>>\n            封底页可继续滑动切换到封面\n        </label>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll/views/edit_meta",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/music/2.0.0/music","text!components/showcase/2.0.0/scroll/templates/edit_meta.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/music/2.0.0/music"),s=e("text!components/showcase/2.0.0/scroll/templates/edit_meta.html");return n.extend({className:"ui-box",template:t.template(s),events:{'change input[type="checkbox"]':"updateModel","click .js-music":"handleMusicClick","click .js-delete-music":"handleDeleteMusicClick"},modelEvents:{"change:music_url":"render"},bindValidation:function(){},handleMusicClick:function(){i.initialize({callback:t.bind(this.choseMusice,this),currentUrl:this.model.get("music_url")})},choseMusice:function(e){this.model.set({music_url:e.url,music_title:e.title})},handleDeleteMusicClick:function(){this.model.set({music_url:"",music_title:""})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_first_page.html",[],function(){return'<h4>封面页</h4>\n<div class="ui-box clearfix">\n    <% if(first_page_wipe == \'0\') { %>\n        <% if(first_page_image_url) { %>\n            <div class="image-box">\n                <img src="<%= fullfillImage(first_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                <a href="javascript:;" class="modify-image js-first-page-image">重新上传</a>\n            </div>\n        <% } else { %>\n            <a href="javascript:;" class="add-image js-first-page-image"><i class="icon-add"></i> 添加图片</a>\n            <div class="control-group">\n                <div class="controls" style="margin: 2px;">\n                    <input type="hidden" name="first_page_image_url">\n                </div>\n            </div>\n        <% } %>\n    <% } else { %>\n        <div class="pull-left before-wipe">\n            <div class="pull-left">擦拭前：</div>\n            <div class="pull-left">\n                <% if(first_page_wipe_image_id) { %>\n                    <div class="image-box">\n                        <img src="<%= fullfillImage(first_page_wipe_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                        <a href="javascript:;" class="modify-image js-first-page-wipe-image">重新上传</a>\n                    </div>\n                <% } else { %>\n                    <a href="javascript:;" class="add-image js-first-page-wipe-image"><i class="icon-add"></i> 添加图片</a>\n                <% } %>\n            </div>\n        </div>\n        <div class="pull-left after-wipe">\n            <div class="pull-left">擦拭后：</div>\n            <div class="pull-left">\n                <% if(first_page_image_id) { %>\n                    <div class="image-box">\n                        <img src="<%= fullfillImage(first_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                        <a href="javascript:;" class="modify-image js-first-page-image">重新上传</a>\n                    </div>\n                <% } else { %>\n                    <a href="javascript:;" class="add-image js-first-page-image"><i class="icon-add"></i> 添加图片</a>\n                    <div class="control-group">\n                        <div class="controls" style="margin: 2px;">\n                            <input type="hidden" name="first_page_image_url">\n                        </div>\n                    </div>\n                <% } %>\n            </div>\n        </div>\n    <% } %>\n</div>\n<label class="checkbox inline">\n    <input type="checkbox" name="first_page_wipe" <% if(first_page_wipe == \'1\') {%>checked<%}%>>\n    启用擦拭屏幕后显示的交互效果\n</label>\n'}),define("components/showcase/2.0.0/scroll/views/edit_first_page",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/image/1.0.0/image","text!components/showcase/2.0.0/scroll/templates/edit_first_page.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/image/1.0.0/image"),s=e("text!components/showcase/2.0.0/scroll/templates/edit_first_page.html"),o=e("core/utils");return n.extend({className:"custom-scroll-page",template:t.template(s),templateHelpers:{fullfillImage:o.fullfillImage},events:{'change input[type="checkbox"]':"updateModel","click .js-first-page-image":"handleImageClick","click .js-first-page-wipe-image":"handleWipeImageClick"},modelEvents:{"change:first_page_wipe":"render","change:first_page_image_id":"render","change:first_page_wipe_image_id":"render"},bindValidation:function(){},handleImageClick:function(){var e=t.bind(function(e){this.model.set({first_page_image_id:e.attachment_id,first_page_image_url:e.attachment_url,first_page_image_thumb_url:e.thumb_url,first_page_image_width:Number(e.width),first_page_image_height:Number(e.height)})},this);this.chooseImage(e)},handleWipeImageClick:function(){var e=t.bind(function(e){this.model.set({first_page_wipe_image_id:e.attachment_id,first_page_wipe_image_url:e.attachment_url,first_page_wipe_image_thumb_url:e.thumb_url,first_page_wipe_image_width:Number(e.width),first_page_wipe_image_height:Number(e.height)})},this);this.chooseImage(e)},chooseImage:function(e){i.initialize({multiChoose:!1,callback:function(n){n=n[0],t.isFunction(e)&&e(n)}})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_last_page.html",[],function(){return'<h4>封底页</h4>\n<div class="clearfix">\n    <div class="pull-left">\n        <% if(last_page_image_url) { %>\n            <div class="image-box">\n                <img src="<%= fullfillImage(last_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                <a href="javascript:;" class="modify-image js-last-page-image">重新上传</a>\n            </div>\n        <% } else { %>\n            <a href="javascript:;" class="add-image js-last-page-image"><i class="icon-add"></i> 添加图片</a>\n            <div class="control-group">\n                <div class="controls" style="margin: 2px;">\n                    <input type="hidden" name="last_page_image_url">\n                </div>\n            </div>\n        <% } %>\n    </div>\n    <div class="pull-left">\n        <div class="control-group">\n            <label class="control-label">链接：</label>\n            <div class="controls">\n                <% if (last_page_link_type != \'\') { %>\n                    <div class="control-action clearfix">\n                        <div class="pull-left js-link-to link-to">\n                            <% if (last_page_link_title !== \'\') { %>\n                            <a href="<%= last_page_link_url %>" target="_blank" class="new-window link-to-title">\n                            <% } %>\n\n                            <span class="label label-success">\n                                <% if (last_page_link_type === \'feature\') { %>\n                                    微杂志\n                                <% } else if (last_page_link_type === \'category\') { %>\n                                    微杂志分类\n                                <% } else if (last_page_link_type === \'topic\') { %>\n                                    专题\n                                <% } else if (last_page_link_type === \'article\') { %>\n                                    资讯\n                                <% } else if (last_page_link_type === \'goods\') { %>\n                                    商品\n                                <% } else if (last_page_link_type === \'tag\') { %>\n                                    商品标签\n                                <% } else if (last_page_link_type === \'activity\') { %>\n                                    营销活动\n                                <% } else if (last_page_link_type === \'survey\') { %>\n                                    调查\n                                <% } else if (last_page_link_type === \'homepage\') { %>\n                                    店铺主页\n                                <% } else if (last_page_link_type === \'usercenter\') { %>\n                                    会员主页\n                                <% } else if (last_page_link_type === \'link\') { %>\n                                    外链\n                                <% } else if (last_page_link_type === \'history\') { %>\n                                    历史信息\n                                <% } %>\n                            <% if (last_page_link_title !== \'\') { %>\n                                    <em class="link-to-title-text"><%- last_page_link_title %></em>\n                                </span>\n                            </a>\n                            <% } else { %>\n                                </span>\n                            <% } %>\n                            <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                        </div>\n                        <div class="dropdown hover pull-right">\n                            <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                            <%= dropdown_menu() %>\n                        </div>\n                    </div>\n\n                <% } else { %>\n                    <div class="dropdown hover">\n                        <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("components/showcase/2.0.0/scroll/views/edit_last_page",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","components/image/1.0.0/image","components/pop/pop","components/modal/1.0.0/modal","text!components/public_template/dropdown_menu.html","text!components/showcase/2.0.0/scroll/templates/edit_last_page.html","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/image/1.0.0/image"),o=e("components/pop/pop"),l=e("components/modal/1.0.0/modal"),a=e("text!components/public_template/dropdown_menu.html"),c=e("text!components/showcase/2.0.0/scroll/templates/edit_last_page.html"),r=e("core/utils");return i.extend({className:"custom-scroll-page",template:t.template(c),dropdownTpl:t.template(a),templateHelpers:function(){return{fullfillImage:r.fullfillImage,dropdown_menu:this.dropdownTpl}},events:{"click .js-last-page-image":"handleImageClick","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},modelEvents:{"change:last_page_image_url":"render","change:last_page_link_url":"render"},bindValidation:function(){},handleImageClick:function(){var e=this;s.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({last_page_image_id:t.attachment_id,last_page_image_url:t.attachment_url,last_page_image_thumb_url:t.thumb_url,last_page_image_width:Number(t.width),last_page_image_height:Number(t.height)})
}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");l.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({last_page_link_id:e.data_id,last_page_link_type:e.type,last_page_link_title:e.data_title,last_page_link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({last_page_link_id:"",last_page_link_type:t,last_page_link_title:"",last_page_link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;o.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({last_page_link_id:"",last_page_link_type:"link",last_page_link_title:e,last_page_link_url:e})}})},deleteLink:function(){this.model.set({last_page_link_id:"",last_page_link_type:"",last_page_link_title:"",last_page_link_url:""})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_item.html",[],function(){return'<div class="choice-image-box">\n    <% if(image_url) { %>\n        <div class="image-box">\n            <img src="<%= fullfillImage(image_url, \'!140x140+2x.jpg\') %>" class="image">\n            <a href="javascript:;" class="modify-image js-page-image">重新上传</a>\n        </div>\n    <% } else { %>\n        <a href="javascript:;" class="add-image js-page-image"><i class="icon-add"></i> 添加图片</a>\n        <div class="control-group">\n            <div class="controls">\n                <input type="hidden" name="image_url">\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <% if (link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/scroll/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/scroll/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){return{fullfillImage:r.fullfillImage,dropdown_menu:this.dropdownTpl}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-page-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render)},bindValidation:function(){},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/scroll/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/scroll/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/scroll/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/scroll/templates/edit.html",[],function(){return'\n<form class="form-horizontal custom-scroll" novalidate>\n    <div class="js-meta-region"></div>\n\n    <div class="custom-scroll-pages">\n        <p class="">图片尺寸要求：640*1010 像素；建议每张图不超过200KB</p>\n\n        <div class="js-first-page-region"></div>\n\n        <div class="custom-scroll-page">\n            <h4>过场页面</h4>\n            <div class="js-pages-region">\n            </div>\n            <div class="js-options options">\n                <a href="javascript:;" class="add-option js-add-page"><i class="icon-add"></i> 添加一页</a>\n            </div>\n        </div>\n\n        <div class="js-last-page-region"></div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/scroll/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/scroll/views/edit_meta","components/showcase/2.0.0/scroll/views/edit_first_page","components/showcase/2.0.0/scroll/views/edit_last_page","components/showcase/2.0.0/scroll/views/edit_collection","text!components/showcase/2.0.0/scroll/templates/edit.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/scroll/views/edit_meta"),s=e("components/showcase/2.0.0/scroll/views/edit_first_page"),o=e("components/showcase/2.0.0/scroll/views/edit_last_page"),l=e("components/showcase/2.0.0/scroll/views/edit_collection"),a=e("text!components/showcase/2.0.0/scroll/templates/edit.html");return n.extend({template:t.template(a),regions:{metaRegion:".js-meta-region",firstPageRegion:".js-first-page-region",pagesRegion:".js-pages-region",lastPageRegion:".js-last-page-region"},events:{"click .js-add-page":"addPage"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.metaRegion.show(new i({model:this.model})),this.firstPageRegion.show(new s({model:this.model})),this.lastPageRegion.show(new o({model:this.model})),this.pagesRegion.show(new l({collection:this.model.get("sub_entry")})),this.toggleOptions()},addPage:function(){this.model.get("sub_entry").add({})},toggleOptions:function(){this.model.get("sub_entry").length>=40?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("text!components/showcase/2.0.0/scroll_nav/templates/edit.html",[],function(){return'<form class="form-horizontal custom-scroll edit-scroll-nav" novalidate style="padding: 0 10px; width: auto;">\n    <div class="control-group clearfix">\n        <label class="control-label" style="text-align: left; width: auto;">主页图标：</label>\n        <div class="controls pull-left" style="margin-left: 0;">\n            <label class="checkbox inline">\n                <input type="checkbox" name="homepage_icon" <%= homepage_icon==\'1\' ? \'checked\' : \'\' %>>\n                显示店铺主页图标，用户点击后进入店铺主页\n            </label>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">背景图片</label>\n        <div class="controls">\n            <p class="help-desc" style="margin-bottom: 20px;">尺寸要求：640*1010 像素；可以添加多张，每次打开页面时，系统随机选择一张</p>\n\n            <div class="background-images">\n                <% _.each(background_images, function(image, index) { %>\n                    <div class="image-box" data-index="<%= index %>">\n                        <img src="<%= fullfillImage(image.url, \'!140x140+2x.jpg\') %>" alt="">\n                        <span class="close-modal js-delete-backgorund-image" title="删除">×</span>\n                    </div>\n                <% }); %>\n            </div>\n\n            <a href="javascript:;" class="add-image js-add-background-image"><i class="icon-add"></i> 添加图片</a>\n            <input type="hidden" name="background_images">\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景导航</label>\n\n        <div class="controls">\n            <p class="help-desc" style="margin-bottom: 20px;">建议图片尺寸：800*230像素</p>\n\n            <div class="js-collection-region custom-scroll-page ">\n\n            </div>\n\n            <div class="js-options options" style="margin: 0;">\n                <a href="javascript:;" class="add-option js-add-module"><i class="icon-add"></i> 添加一个模块</a>\n            </div>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景导航样式</label>\n\n        <div class="controls nav-styles">\n            <label class="radio inline">\n                <input name="nav_style" value="left" type="radio" <%= nav_style == \'left\'? \'checked\' : \'\' %>>向左倾斜\n            </label>\n            <label class="radio inline">\n                <input name="nav_style" value="normal" type="radio" <%= nav_style == \'normal\'? \'checked\' : \'\' %>>正常\n            </label>\n            <label class="radio inline">\n                <input name="nav_style" value="right" type="radio" <%= nav_style == \'right\'? \'checked\' : \'\' %>>向右倾斜\n            </label>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景显现动画</label>\n\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="animate" value="zoom" <%= animate == \'zoom\' ? \'checked\' : \'\' %>>正常\n            </label>\n            <select class="span2" name="zoom_type" style="margin-right: 40px;">\n                <option value="zoom_out" <%= zoom_type == \'zoom_out\' ? \'selected\' : \'\' %>>缩小渐现</option>\n                <option value="zoom_in" <%= zoom_type == \'zoom_in\' ? \'selected\' : \'\' %>>放大渐现</option>\n            </select>\n            <label class="radio inline">\n                <input type="radio" name="animate" value="slide" <% if(animate == \'slide\') { %>checked<% }%>>滑入\n            </label>\n            <select class="span2" name="slide_type">\n                <option value="slide_left" <%= slide_type == \'slide_left\' ? \'selected\' : \'\' %>>从左侧滑入</option>\n                <option value="slide_right" <%= slide_type == \'slide_right\' ? \'selected\' : \'\' %>>从右侧滑入</option>\n            </select>\n        </div>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html",[],function(){return'<div class="choice-image-box">\n    <% if(image_url) { %>\n        <div class="image-box">\n            <img src="<%= fullfillImage(image_url, \'!140x140+2x.jpg\') %>" class="image">\n            <a href="javascript:;" class="modify-image js-page-image">重新上传</a>\n        </div>\n    <% } else { %>\n        <a href="javascript:;" class="add-image js-page-image"><i class="icon-add"></i> 添加图片</a>\n        <div class="control-group">\n            <div class="controls">\n                <input type="hidden" name="image_url">\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input class="" type="text" name="title" value="<%= title %>">\n        </div>\n    </div>\n    <div class="control-group">\n            <label class="control-label">副标题：</label>\n            <div class="controls">\n                <input class="" type="text" name="sub_title" value="<%= sub_title %>">\n            </div>\n        </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <% if (link_type != \'\') { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left js-link-to link-to">\n                        <% if (link_title !== \'\') { %>\n                        <a href="<%= link_url %>" target="_blank" class="new-window link-to-title">\n                        <% } %>\n\n                        <span class="label label-success">\n                            <% if (link_type === \'feature\') { %>\n                                微杂志\n                            <% } else if (link_type === \'category\') { %>\n                                微杂志分类\n                            <% } else if (link_type === \'topic\') { %>\n                                专题\n                            <% } else if (link_type === \'article\') { %>\n                                资讯\n                            <% } else if (link_type === \'goods\') { %>\n                                商品\n                            <% } else if (link_type === \'tag\') { %>\n                                商品标签\n                            <% } else if (link_type === \'activity\') { %>\n                                营销活动\n                            <% } else if (link_type === \'survey\') { %>\n                                调查\n                            <% } else if (link_type === \'homepage\') { %>\n                                店铺主页\n                            <% } else if (link_type === \'usercenter\') { %>\n                                会员主页\n                            <% } else if (link_type === \'link\') { %>\n                                外链\n                            <% } else if (link_type === \'history\') { %>\n                                历史信息\n                            <% } %>\n                        <% if (link_title !== \'\') { %>\n                                <em class="link-to-title-text"><%- link_title %></em>\n                            </span>\n                        </a>\n                        <% } else { %>\n                            </span>\n                        <% } %>\n                        <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n                    </div>\n                    <div class="dropdown hover pull-right">\n                        <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                        <%= dropdown_menu() %>\n                    </div>\n                </div>\n\n            <% } else { %>\n                <div class="dropdown hover">\n                    <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                    <%= dropdown_menu() %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n<% if(index != 0 && index != 1) { %>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n<% } %>\n'}),define("components/showcase/2.0.0/scroll_nav/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html","text!components/public_template/dropdown_menu.html","components/pop/pop","components/modal/1.0.0/modal","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html"),o=e("text!components/public_template/dropdown_menu.html"),l=e("components/pop/pop"),a=e("components/modal/1.0.0/modal"),c=e("components/image/1.0.0/image"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(s),dropdownTpl:t.template(o),templateHelpers:function(){var e=this.layout.model.get("sub_entry").indexOf(this.model);return{fullfillImage:r.fullfillImage,dropdown_menu:this.dropdownTpl,index:e}},events:{'blur input[name="title"]':"updateModel",'blur input[name="sub_title"]':"updateModel","click .actions .delete":"delete","click .js-page-image":"chooseImage","click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink","click .js-delete-link":"deleteLink"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render)},chooseImage:function(){var e=this;c.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=n(e.target).data("type"),i=this;r.getStaticUrl(t,function(e){i.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,i=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var s=e.target;l.initialize({target:t,trigger:n(s),type:"link",callback:function(e){i.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})},deleteLink:function(){this.model.set({link_id:"",link_type:"",link_title:"",link_url:""})},"delete":function(){this.model.destroy()}})}),define("components/showcase/2.0.0/scroll_nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/scroll_nav/views/edit_item"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/scroll_nav/views/edit_item");return t.extend({itemView:n,initialize:function(e){this.options=e||{}},onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/scroll_nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll_nav/templates/edit.html","components/showcase/2.0.0/scroll_nav/views/edit_collection","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/scroll_nav/templates/edit.html"),s=e("components/showcase/2.0.0/scroll_nav/views/edit_collection"),o=e("components/image/1.0.0/image"),l=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:l.fullfillImage},regions:{collectionRegion:".js-collection-region"},events:{'change input[name="homepage_icon"]':"updateModel",'change input[name="nav_style"]':"updateModel",'change input[name="animate"]':"updateModel",'change input[name="zoom"]':"updateModel",'change select[name="zoom_type"]':"updateModel",'change select[name="slide_type"]':"updateModel","click .js-add-background-image":"addBackgroundImage","click .js-delete-backgorund-image":"deleteBackgroundImage","click .js-add-module":"addModule"},modelEvents:{"change:background_images":"render"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new s({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addModule:function(){this.model.get("sub_entry").add({})},addBackgroundImage:function(){var e=this,n=e.model.get("background_images")||[];o.initialize({multiChoose:!0,callback:function(i){t.each(i,function(e){n.push({id:e.attachment_id,url:e.attachment_url,thumb_url:e.thumb_url,width:+e.width,height:+e.height})}),e.model.set("background_images",n),e.model.trigger("change:background_images"),e.model.trigger("change")}})},deleteBackgroundImage:function(e){var t=+$(e.target).parents(".image-box").data("index"),n=this.model.get("background_images")||[];n.splice(t,1),this.model.set("background_images",n),this.model.trigger("change:background_images"),this.model.trigger("change")},toggleOptions:function(){this.model.get("sub_entry").length>=40?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("text!components/showcase/2.0.0/image_text/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <label>标题</label>\n        <input type="text" name="title" value="<%- title %>" data-error-style="block">\n    </div>\n\n    <div class="control-group">\n        <label>作者<span class="label-desc">（选填）</span></label>\n        <input type="text" name="author" value="<%- author %>" data-error-style="block">\n    </div>\n\n    <div class="control-group image-region js-image-region">\n\n    </div>\n\n    <div class="control-group">\n        <label class="checkbox">\n            <input type="checkbox" name="show_image" <% if (show_image == 1) { %>checked<% } %>>封面图片显示在正文中\n        </label>\n    </div>\n\n    <div class="control-group digest">\n        <label>摘要</label>\n        <textarea name="digest" cols="30" rows="3" data-error-style="block"><%- digest %></textarea>\n    </div>\n\n    <div class="control-group">\n        <label>正文</label>\n        <script class="js-editor" type="text/plain"></script>\n        <input type="hidden" name="content" data-error-style="block">\n    </div>\n\n    <div class="control-group js-link-region">\n\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/image_text/templates/edit_link.html",[],function(){return"<label>阅读原文</label>\n<% if (link_type != '') { %>\n<div class=\"control-action clearfix\">\n    <div class=\"pull-left js-link-to link-to\">\n        <% if (link_title !== '') { %>\n        <a href=\"<%= link_url %>\" target=\"_blank\" class=\"new-window link-to-title\">\n            <% } %>\n                <span class=\"label label-success\">\n                    <% if (link_type === 'feature') { %>\n                        微杂志\n                    <% } else if (link_type === 'category') { %>\n                        微杂志分类\n                    <% } else if (link_type === 'topic') { %>\n                        专题\n                    <% } else if (link_type === 'article') { %>\n                        资讯\n                    <% } else if (link_type === 'goods') { %>\n                        商品\n                    <% } else if (link_type === 'tag') { %>\n                        商品标签\n                    <% } else if (link_type === 'activity') { %>\n                        营销活动\n                    <% } else if (link_type === 'survey') { %>\n                        调查\n                    <% } else if (link_type === 'homepage') { %>\n                        店铺主页\n                    <% } else if (link_type === 'usercenter') { %>\n                        会员主页\n                    <% } else if (link_type === 'link') { %>\n                        外链\n                    <% } else if (link_type === 'history') { %>\n                        历史信息\n                    <% } %>\n                <% if (link_title !== '') { %>\n                        <em class=\"link-to-title-text\"><%- link_title %></em>\n                    </span>\n        </a>\n        <% } else { %>\n        </span>\n        <% } %>\n    </div>\n    <div class=\"dropup hover pull-right\">\n        <a class=\"dropdown-toggle\" href=\"javascript:void(0);\">修改 <i class=\"caret\"></i></a>\n        <%= dropdown_menu() %>\n    </div>\n</div>\n\n<% } else { %>\n<div class=\"dropup hover\">\n    <a class=\"js-dropdown-toggle dropdown-toggle control-action\" href=\"javascript:void(0);\">设置链接到的页面地址 <i class=\"caret\"></i></a>\n    <%= dropdown_menu() %>\n</div>\n<% } %>"}),define("components/showcase/2.0.0/image_text/views/edit_link",["require","components/showcase/2.0.0/base/views/edit_base","underscore","components/modal/1.0.0/modal","components/pop/pop","text!components/public_template/dropdown_menu.html","core/utils","text!components/showcase/2.0.0/image_text/templates/edit_link.html"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("underscore"),i=e("components/modal/1.0.0/modal"),s=e("components/pop/pop"),o=e("text!components/public_template/dropdown_menu.html"),l=e("core/utils"),a=e("text!components/showcase/2.0.0/image_text/templates/edit_link.html");return t.extend({template:n.template(a),dropdownTpl:n.template(o),events:{"click .js-modal-magazine, .js-modal-goods, .js-modal-activity, .js-modal-survey":"chooseLink","click .js-modal-history, .js-modal-homepage, .js-modal-usercenter":"chooseStaticLink","click .js-modal-links":"chooseOtherLink"},modelEvents:{"change:link_url":"render"},serializeData:function(){var e=this.model.cid,t=n.clone(this.model.attributes);return n.extend(t,{cid:e,dropdown_menu:this.dropdownTpl}),t},bindValidation:function(){},chooseLink:function(e){var t=this,n=$(e.target).data("type");i.initialize({type:n}).setChooseItemCallback(function(e){t.model.set({link_id:e.data_id,link_type:e.type,link_title:e.data_title,link_url:e.data_url})}).modal("show")},chooseStaticLink:function(e){var t=$(e.target).data("type"),n=this;l.getStaticUrl(t,function(e){n.model.set({link_id:"",link_type:t,link_title:"",link_url:e})})},chooseOtherLink:function(e){var t,n=this;t=this.$(this.$(".js-link-to").length>0?".js-link-to":".js-dropdown-toggle");var i=e.target;s.initialize({target:t,trigger:$(i),type:"link",callback:function(e){n.model.set({link_id:"",link_type:"link",link_title:e,link_url:e})}})}})}),define("text!components/showcase/2.0.0/image_text/templates/edit_image.html",[],function(){return'<label>封面<span class="label-desc">（大图片建议尺寸：900 x 500像素）</span></label>\n<% if (image) { %>\n    <img src="<%- image %>" width="100" height="100"/>\n    <a class="js-add-image control-action" href="javascript:;">重新选择</a>\n<% } else { %>\n    <a class="js-add-image control-action" href="javascript:;">添加图片...</a>\n<% } %>\n<input type="hidden" name="image" data-error-style="block">\n'}),define("components/showcase/2.0.0/image_text/views/edit_image",["require","components/showcase/2.0.0/base/views/edit_base","components/image/1.0.0/image","underscore","core/utils","text!components/showcase/2.0.0/image_text/templates/edit_image.html"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_base"),n=(e("components/image/1.0.0/image"),e("underscore")),i=e("core/utils"),s=e("text!components/showcase/2.0.0/image_text/templates/edit_image.html");return t.extend({template:n.template(s),events:{"click .js-add-image":"addImage"},modelEvents:{"change:image":"render"},bindValidation:function(){},addImage:function(){var e=this;window.imageModal.initialize({multiChoose:!1,callback:function(t){e.model.set("image",t[0].attachment_url),e.model.set("image_id",t[0].attachment_id)}})},serializeData:function(){var e=this.model.get("image");return e=e&&i.fullfillImage(e),{image:e}}})}),define("components/showcase/2.0.0/image_text/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/image_text/templates/edit.html","core/utils","components/showcase/2.0.0/image_text/views/edit_link","components/showcase/2.0.0/image_text/views/edit_image","components/image/1.0.0/image"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/image_text/templates/edit.html"),s=(e("core/utils"),e("components/showcase/2.0.0/image_text/views/edit_link")),o=e("components/showcase/2.0.0/image_text/views/edit_image"),l=window.UE;return window.imageModal=e("components/image/1.0.0/image"),n.extend({className:"edit-rich-text",template:t.template(i),events:{"blur textarea":"updateModel",'blur input[type="text"]':"updateModel",'change input[type="checkbox"]':"updateModel"},regions:{image:".js-image-region",link:".js-link-region"},onRender:function(){var e=new o({model:this.model});this.image.show(e);var t=new s({model:this.model});this.link.show(t)},onClose:function(){this._editor&&(this._editor.removeListener("blur contentChange"),this._editor.destroy(),delete this._editor)},onShow:function(){var e=this;this._editor=new l.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!0,elementPathEnabled:!1,maximumWords:1e4,initialFrameWidth:458,initialFrameHeight:300,focus:!1,pasteplain:!1});
var t=this._editor;t.addListener("blur",function(){e.model.set("content",e._editor.getContent())}),t.addListener("contentChange",function(){e.model.set("content",e._editor.getContent())}),t.render(this.$(".js-editor")[0]),t.ready(function(){t.setContent(e.model.get("content"))})},save:function(){this._editor&&this.model.set("content",this._editor.getContent())}})}),define("text!components/showcase/2.0.0/audio/templates/edit.html",[],function(){return'<form class="form-horizontal edit-audio" novalidate>\n    <div class="control-group">\n        <label class="control-label">音频：</label>\n        <div class="controls">\n            <input type="hidden" name="audio">\n            <% if (audio) { %>\n                <div class="voice-wrapper" data-voice-src="<%- audio + \'!64k.mp3\' %>">\n                    <span class="voice-player">\n                        <span class="stop">点击播放</span>\n                        <span class="second"></span>\n                        <i class="play" style="display:none;"></i>\n                    </span>\n                    <a href="javascript:;" class="js-choose-audio control-action">重新选择音频</a>\n                </div>\n            <% } else { %>\n            <a href="javascript:;" class="js-choose-audio control-action">选择音频</a>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">样式：</label>\n        <div class="controls">\n            <label class="radio">\n                <input type="radio" name="style" value="0" <% if (style== \'0\') { %> checked <% } %>>模仿微信对话样式\n            </label>\n            <% if(style == \'0\') { %>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">头像：</label>\n                    <div class="controls">\n                        <div class="clearfix">\n                            <img src="<%= avatar %>" class="edit-audio-avatar">\n                            <div class="edit-audio-avatar-action">\n                                <div>\n                                    <a href="javascript:;" class="js-upload-avatar">上传头像</a>\n                                    <span class="c-gray"> | </span>\n                                    <a href="javascript:;" class="js-use-default-avatar">使用店铺logo</a>\n                                </div>\n                                <p class="help-desc">建议尺寸80*80像素</p>\n                                <p class="help-desc">如果不设置，默认将使用店铺logo</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">气泡：</label>\n                    <div class="controls">\n                        <label class="radio inline">\n                            <input type="radio" name="bubble" value="left" <% if(bubble == \'left\') { %>checked<% } %>>\n                            居左\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="bubble" value="right" <% if(bubble == \'right\') { %>checked<% } %>>\n                            居右\n                        </label>\n                    </div>\n                </div>\n            <% } %>\n            <label class="radio">\n                <input type="radio" name="style" value="1" <% if (style== \'1\') { %> checked <% } %>>简易音乐播放器\n            </label>\n            <% if (style == \'1\') { %>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">标题：</label>\n                    <div class="controls">\n                        <input type="text" placeholder="标题" name="title" value="<%- title %>">\n                    </div>\n                </div>\n                <div class="control-group control-group-inner">\n                    循环：\n                    <label class="checkbox inline">\n                        <% if (+loop === 0) { %>\n                        <input type="checkbox" name="loop" value="0">开启循环播放\n                        <% } else { %>\n                        <input type="checkbox" name="loop" value="1" checked>开启循环播放\n                        <% } %>\n                    </label>\n                </div>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">播放：</label>\n        <div class="controls">\n            <label class="radio">\n                <input type="radio" name="reload" value="1" <% if (reload == \'1\') { %> checked <% } %>>暂停后再恢复播放时，从头开始\n            </label>\n            <label class="radio">\n                <input type="radio" name="reload" value="0" <% if (reload == \'0\') { %> checked <% } %>>暂停后再恢复播放时，从暂停位置开始\n            </label>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/audio/views/edit",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/audio/templates/edit.html","components/image/1.0.0/image","components/audio/1.0.0/audio"],function(e){var t=e("underscore"),n=e("core/utils"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/audio/templates/edit.html"),o=e("components/image/1.0.0/image"),l=e("components/audio/1.0.0/audio"),a=[1,171949];return i.extend({template:t.template(s),events:{'change input[type="checkbox"]':"updateModel",'change input[type="radio"]':"updateModel",'blur input[type="text"]':"updateModel","click .js-choose-audio":"chooseAudio","click .js-upload-avatar":"chooseImage","click .js-use-default-avatar":"useDefaultAvatar"},modelEvents:{"change:audio":"render","change:style":"render","change:avatar":"render"},serializeData:function(){var e=this.model.toJSON();return t.extend(e,{audio:n.fullfillImage(e.audio),avatar:n.fullfillImage(e.avatar||_global.mp_data.logo,"!80x80.jpg")})},chooseAudio:function(){var e=this;l.initialize({multiChoose:!1,multiUpload:!1,maxSize:-1!==a.indexOf(_global.kdt_id)?30720:6144,callback:function(t){t=t[0];var n=t.attachment_file||t.attachment_url;e.model.set({audio:n})}})},chooseImage:function(){var e=this;o.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set("avatar",t.attachment_url)}})},useDefaultAvatar:function(){this.model.set("avatar","")}})}),define("components/showcase/2.0.0/base/views/show_base",["require","underscore","jquery","marionette","components/pop/pop"],function(e){var t=e("underscore"),n=e("jquery"),i=e("marionette"),s=e("components/pop/pop");return i.Layout.extend({className:"app-field clearfix",events:{"click .delete":"handleDelete","click .add":"handleAdd","click .edit":"handleEdit","click .duplicate":"handleDuplicate",click:"handleClick"},initialize:function(e){this._setOptions(e),this._bind(),this.triggerMethod("init",e)},_setOptions:function(e){this.options=e||{},this.layout=this.options.layout},_bind:function(){this.listenTo(this,"close",this._handleViewClose),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"valid:error",this.validError),this.listenTo(this.layout,"editing",this.editing)},_handleViewClose:function(){this.layout=null},handleEdit:function(e){e.stopPropagation(),this.layout.displayEditView(this.model,{edit:!0})},handleDelete:function(e){e.preventDefault(),e.stopPropagation();var i=t.bind(function(){var e,t=this.layout,n=this.model.index();n=0===n?n+1:n-1,e=this.model.collection.at(n),this.model.destroy(),e&&t.displayEditView(e)},this);s.initialize({target:n(e.target),type:"delete",callback:i})},handleDuplicate:function(){var e=t.result(this.model.constructor.prototype,"defaults"),n=t.pick(this.model.toJSON(),t.keys(e)),i=this.model.index();n=JSON.parse(JSON.stringify(n)),this.model.parse&&(n=this.model.parse(n)),this.model.collection.add(n,{at:i+1})},handleClick:function(e){e.stopPropagation(),this.layout.displayEditView(this.model)},handleAdd:function(e){e.stopPropagation(),this.layout.displayEditView(this.model,{add:!0})},editing:function(e){e===this.model?this.$el.addClass("editing"):this.$el.removeClass("editing")},validError:function(){this.layout.displayEditView(this.model,{error:!0})},position:function(){return this.$el.position()},offset:function(){return this.$el.offset()}})}),define("text!components/showcase/2.0.0/rich_text/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-richtext<% if (fullscreen == 1) { %> custom-richtext-fullscreen<% } %>" style="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>background-color: <%= color %><% } %>"><%= content || \'<p>点此编辑『富文本』内容 ——&gt;</p><p>你可以对文字进行<strong>加粗</strong>、<em>斜体</em>、<span style="text-decoration: underline;">下划线</span>、<span style="text-decoration: line-through;">删除线</span>、文字<span style="color: rgb(0, 176, 240);">颜色</span>、<span style="background-color: rgb(255, 192, 0); color: rgb(255, 255, 255);">背景色</span>、以及字号<span style="font-size: 20px;">大</span><span style="font-size: 14px;">小</span>等简单排版操作。</p><p>还可以在这里加入表格了</p><table><tbody><tr><td width="93" valign="top" style="word-break: break-all;">中奖客户</td><td width="93" valign="top" style="word-break: break-all;">发放奖品</td><td width="93" valign="top" style="word-break: break-all;">备注</td></tr><tr><td width="93" valign="top" style="word-break: break-all;">猪猪</td><td width="93" valign="top" style="word-break: break-all;">内测码</td><td width="93" valign="top" style="word-break: break-all;"><em><span style="color: rgb(255, 0, 0);">已经发放</span></em></td></tr><tr><td width="93" valign="top" style="word-break: break-all;">大麦</td><td width="93" valign="top" style="word-break: break-all;">积分</td><td width="93" valign="top" style="word-break: break-all;"><a href="javascript: void(0);" target="_blank">领取地址</a></td></tr></tbody></table><p style="text-align: left;"><span style="text-align: left;">也可在这里插入图片、并对图片加上超级链接，方便用户点击。</span></p>\' %></div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/rich_text/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/rich_text/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/rich_text/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/goods/templates/show.html",[],function(){return'<div class="control-group">\n    <%  var showtype ;\n        if ( size_type == 0 ) {\n            showtype = \'card\';\n        } else if ( size_type == 1 ) {\n            showtype = \'waterfall\';\n        } else if (size_type == 3) {\n            showtype = \'promotion\';\n        } else {\n            showtype = \'normal\';\n        }\n    %>\n    <ul class="sc-goods-list clearfix size-<%=size %> <%-showtype %> <%-size == 3? \'list\' : \'pic\' %>">\n        <!-- 大图  -->\n        <% if (size == \'0\') { %>\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card big-pic <%-showtype %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>" />\n                        </div>\n                        <% if ( title == 1 || price == 1 || ( cart == 1 && showtype == \'normal\' )) { %>\n                            <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %>">\n                                <% if (price == \'1\' && cart == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>     \n                                <% if (price == \'0\' && cart == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price goods-price-icon"></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>    \n                                <% if (price == \'1\' && cart == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price goods-price-icon">\n                                        <em>\n                                            <%-showtype==\'normal\'? \'\': \'￥\' %><%= item.price %>\n                                        </em>\n                                    </p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>  \n                                <% if (price == \'0\' && cart == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %> \n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != \'normal\') { %>  \n                            <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-only-title\' : \'\' %>"></div>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <!-- 小图 -->\n        <% } else if ( size == \'1\' && showtype != \'waterfall\' ) { %>\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card small-pic <%-showtype %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>" />\n                        </div>\n                        <% if ( !(price == 0 && ((showtype == \'normal\' && cart == 0 ) || showtype != \'normal\' && title == 0 ))) { %>\n                            <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %>">\n                                <% if (price == \'1\' && cart == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>     \n                                <% if (price == \'0\' && cart == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price goods-price-icon"></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>    \n                                <% if (price == \'1\' && cart == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price goods-price-icon">\n                                        <em>\n                                            <%-showtype==\'normal\'? \'\': \'￥\' %><%= item.price %>\n                                        </em>\n                                    </p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %>  \n                                <% if (price == \'0\' && cart == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>  \n                                <% } %> \n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != \'normal\' ) { %>  \n                            <div class="goods-buy btn<%-buy_btn_type %>">\n                                <%- showtype == \'promotion\'? \'我要抢购\': \'\'%>\n                            </div>\n                            <% if ( title && !price) { %>\n                                <div class=\'buy-tag-space\'></div>\n                            <% } %>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <% } else if (size == \'1\' && showtype == \'waterfall\') { %>\n            \n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 != 1 ) { %>\n                    <li class="goods-card goods-list small-pic waterfall">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>     \n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>  \n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 == 1 ) { %>\n                    <li class="goods-card small-pic waterfall">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>     \n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>  \n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n        <% } else if (size == \'2\') { %>\n            <!-- 一大两小 -->\n            <% _.each(goods, function(item, index) { %>\n                <% if ((index+1) % 3 === 1) { %>\n                    <!-- 大图 -->\n                    <li class="goods-card big-pic <%-showtype %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>" />\n                            </div>\n                            <% if ( title == 1 || price == 1 || ( cart == 1 && showtype == \'normal\' )) { %>\n                                <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %>">\n                                    <% if (price == \'1\' && cart == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>     \n                                    <% if (price == \'0\' && cart == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price goods-price-icon"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>    \n                                    <% if (price == \'1\' && cart == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price goods-price-icon">\n                                            <em>\n                                                <%-showtype==\'normal\'? \'\': \'￥\' %><%= item.price %>\n                                            </em>\n                                        </p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %> \n                                    <% if (price == \'0\' && cart == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>  \n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != \'normal\') { %>  \n                                <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-only-title\' : \'\' %>"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } else { %>\n                <!-- 小图 -->\n                    <li class="goods-card small-pic <%-showtype %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>" />\n                            </div>\n                            <% if ( !(price == 0 && ((showtype == \'normal\' && cart == 0 ) || showtype != \'normal\' && title == 0 ))) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\' && cart == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>     \n                                    <% if (price == \'0\' && cart == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price goods-price-icon"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>    \n                                    <% if (price == \'1\' && cart == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price goods-price-icon">\n                                            <em>\n                                                <%-showtype==\'normal\'? \'\': \'￥\' %><%= item.price %>\n                                            </em>\n                                        </p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %>  \n                                    <% if (price == \'0\' && cart == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>  \n                                    <% } %> \n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>  \n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n            <% }); %>\n        <% } else if (size == \'3\') { %>\n            <!-- 列表 -->\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card <%-showtype %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                       <div class="photo-block">\n                           <img class="goods-photo js-goods-lazy" src="<%= item.image_url %>"/>\n                       </div>\n                       <div class="info">\n                            <p class="goods-title"><%- item.title %></p>\n                            <p class="goods-price"><em>￥<%= item.price %></em></p>  \n                            <p class="goods-price-taobao"></p>         \n                            <% if ( buy_btn ) { %>  \n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                            <% } %>\n                       </div>                  \n                    </a>\n                </li>      \n            <% }); %>\n        <% } %>\n    </ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/goods/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/goods/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/goods/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},serializeData:function(){var e=this.model.toJSON();return t.isEmpty(e.goods)&&(e.goods=1==this.model.get("size")?[{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg",price:"379.00",title:"此处显示商品名称"},{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg",price:"5.50",title:"此处显示商品名称"},{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029095601969662.jpg",price:"32.00",title:"此处显示商品名称"},{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/10/09/138130084954645499.jpg",price:"60.00",title:"此处显示商品名称"}]:[{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg",price:"379.00",title:"此处显示商品名称"},{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg",price:"5.50",title:"此处显示商品名称"},{id:null,url:null,image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029095601969662.jpg",price:"60.00",title:"此处显示商品名称"}]),e}})}),define("text!components/showcase/2.0.0/goods_list/templates/show.html",[],function(){return"<div class=\"control-group\">\n    <%  var showtype ;\n        if ( size_type == 0 ) {\n            showtype = 'card';\n        } else if ( size_type == 1 ) {\n            showtype = 'waterfall';\n        } else if (size_type == 3) {\n            showtype = 'promotion';\n        } else {\n            showtype = 'normal';\n        }\n    %>\n    <% if (size == '1') { %>\n        <% var goodsSample = [{\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg',\n            price: '379.00',\n            price_tao: '原价：380.00',\n            title: '此处显示商品名称'\n        }, {\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg',\n            price: '5.50',\n            price_tao: '原价：8.00',\n            title: '此处显示商品名称'\n        }, {\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/09/27/138029095601969662.jpg',\n            price: '32.00',\n            price_tao: '原价：60.00',\n            title: '此处显示商品名称'\n        }, {\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/10/09/138130084954645499.jpg',\n            price: '60.00',\n            price_tao: '原价：80.00',\n            title: '此处显示商品名称'\n        }]; %>\n    <% } else { %>\n        <% var goodsSample = [{\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg',\n            price: '379.00',\n            title: '此处显示商品名称'\n        }, {\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg',\n            price: '5.50',\n            title: '此处显示商品名称'\n        }, {\n            image_url: 'http://imgqn.koudaitong.com/upload_files/2013/10/09/138130084954645499.jpg',\n            price: '60.00',\n            title: '此处显示商品名称'\n        }]; %>\n    <% } %>\n    <ul class=\"sc-goods-list clearfix size-<%=size %> <%-showtype %> <%-size == 3? 'list' : 'pic' %>\">\n        <!-- 大图  -->\n        <% if (size == '0') { %>\n            <% _.each(goodsSample, function(item, index) { %>\n                <li class=\"goods-card big-pic <%-showtype %>\">\n                    <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                        <div class=\"photo-block\">\n                            <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" />\n                        </div>\n                        <% if ( title == 1 || price == 1 || ( cart == 1 && showtype == 'normal' )) { %>\n                            <div class=\"info clearfix <%- title == '1' ? '' : 'info-no-title' %> <%- price == '1' ? 'info-price' : 'info-no-price' %>\">\n                                <% if (price == '1' && cart == '0') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                    <p class=\"goods-price-taobao\"></p>  \n                                <% } %>     \n                                <% if (price == '0' && cart == '1') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price goods-price-icon\"></p>\n                                    <p class=\"goods-price-taobao\"></p>  \n                                <% } %>    \n                                <% if (price == '1' && cart == '1') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price goods-price-icon\">\n                                        <em>\n                                            <%-showtype=='normal'? '': '￥' %><%= item.price %>\n                                        </em>\n                                    </p>\n                                    <p class=\"goods-price-taobao\"></p>  \n                                <% } %>  \n                                <% if (price == '0' && cart == '0') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price\"></p>\n                                    <p class=\"goods-price-taobao\"></p>  \n                                <% } %> \n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != 'normal') { %>  \n                            <div class=\"goods-buy btn<%-buy_btn_type %> <%-title == '1' && price == '0'? 'info-only-title' : '' %>\"></div>\n                            <% if ( title && !price && showtype != 'card') { %>\n                                <div class='buy-tag-space'></div>\n                            <% } %>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <!-- 小图 -->\n        <% } else if ( size == '1' && showtype != 'waterfall' ) { %>\n            <% _.each(goodsSample, function(item, index) { %>\n                <li class=\"goods-card small-pic <%-showtype %>\">\n                    <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                        <div class=\"photo-block\">\n                            <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" />\n                        </div>\n                        <% if ( !(price == 0 && ((showtype == 'normal' && cart == 0 ) || showtype != 'normal' && title == 0 ))) { %>\n                            <div class=\"info clearfix <%- title == '1'? '' : 'info-no-title' %>\">\n                                <% if (price == '1' && cart == '0') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                    <p class=\"goods-price-taobao\"><%- item.price_tao %></p>  \n                                <% } %>     \n                                <% if (price == '0' && cart == '1') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price goods-price-icon\"></p>\n                                    <p class=\"goods-price-taobao\"><%- item.price_tao %></p>  \n                                <% } %>    \n                                <% if (price == '1' && cart == '1') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price goods-price-icon\">\n                                        <em>\n                                            <%-showtype=='normal'? '': '￥' %><%= item.price %>\n                                        </em>\n                                    </p>\n                                    <p class=\"goods-price-taobao\"><%- item.price_tao %></p>  \n                                <% } %>  \n                                <% if (price == '0' && cart == '0') { %>\n                                    <p class=\"goods-title\"><%- item.title %></p>\n                                    <p class=\"goods-price\"></p>\n                                    <p class=\"goods-price-taobao\"><%- item.price_tao %></p>  \n                                <% } %> \n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != 'normal' ) { %>  \n                            <div class=\"goods-buy btn<%-buy_btn_type %>\">\n                                <%- showtype == 'promotion'? '我要抢购': ''%>\n                            </div>\n                            <% if ( title && !price) { %>\n                                <div class='buy-tag-space'></div>\n                            <% } %>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <% } else if (size == '1' && showtype == 'waterfall') { %>\n            \n            <li class=\"sc-waterfall-half clearfix\">\n                <ul class=\"clearfix\">\n                <% _.each(goodsSample, function(item, index) { %>\n                <% if( index % 2 != 1 ) { %>\n                    <li class=\"goods-card small-pic waterfall\">\n                        <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                            <div class=\"photo-block\">\n                                <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" style=\"height:<%= 145 + index*30 %>px;\"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != 'normal' && title == 0 )) { %>\n                                <div class=\"info clearfix <%- title == '1' ? '' : 'info-no-title' %>\">\n                                    <% if (price == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>     \n                                    <% if (price == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != 'normal' ) { %>  \n                                <div class=\"goods-buy btn<%-buy_btn_type %>\"></div>\n                                <% if ( title && !price) { %>\n                                    <div class='buy-tag-space'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n            <li class=\"sc-waterfall-half clearfix\">\n                <ul class=\"clearfix\">\n                <% _.each(goodsSample, function(item, index) { %>\n                <% if( index % 2 == 1 ) { %>\n                    <li class=\"goods-card small-pic waterfall\">\n                        <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                            <div class=\"photo-block\">\n                                <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" style=\"height:<%= 145 + index*10 %>px;\"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != 'normal' && title == 0 )) { %>\n                                <div class=\"info clearfix <%- title == '1' ? '' : 'info-no-title' %>\">\n                                    <% if (price == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>     \n                                    <% if (price == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != 'normal' ) { %>  \n                                <div class=\"goods-buy btn<%-buy_btn_type %>\"></div>\n                                <% if ( title && !price) { %>\n                                    <div class='buy-tag-space'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n        <% } else if (size == '2') { %>\n            <!-- 一大两小 -->\n            <% _.each(goodsSample, function(item, index) { %>\n                <% if ((index+1) % 3 === 1) { %>\n                    <!-- 大图 -->\n                    <li class=\"goods-card big-pic <%-showtype %>\">\n                        <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                            <div class=\"photo-block\">\n                                <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" />\n                            </div>\n                            <% if ( title == 1 || price == 1 || ( cart == 1 && showtype == 'normal' )) { %>\n                                <div class=\"info clearfix <%- title == '1' ? '' : 'info-no-title' %> <%- price == '1' ? 'info-price' : 'info-no-price' %>\">\n                                    <% if (price == '1' && cart == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>     \n                                    <% if (price == '0' && cart == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price goods-price-icon\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>    \n                                    <% if (price == '1' && cart == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price goods-price-icon\">\n                                            <em>\n                                                <%-showtype=='normal'? '': '￥' %><%= item.price %>\n                                            </em>\n                                        </p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %> \n                                    <% if (price == '0' && cart == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>  \n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != 'normal') { %>  \n                                <div class=\"goods-buy btn<%-buy_btn_type %> <%-title == '1' && price == '0'? 'info-only-title' : '' %>\"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } else { %>\n                <!-- 小图 -->\n                    <li class=\"goods-card small-pic <%-showtype %>\">\n                        <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                            <div class=\"photo-block\">\n                                <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\" />\n                            </div>\n                            <% if ( !(price == 0 && ((showtype == 'normal' && cart == 0 ) || showtype != 'normal' && title == 0 ))) { %>\n                                <div class=\"info clearfix <%- title == '1' ? '' : 'info-no-title' %>\">\n                                    <% if (price == '1' && cart == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"><em>￥<%= item.price %></em></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>     \n                                    <% if (price == '0' && cart == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price goods-price-icon\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>    \n                                    <% if (price == '1' && cart == '1') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price goods-price-icon\">\n                                            <em>\n                                                <%-showtype=='normal'? '': '￥' %><%= item.price %>\n                                            </em>\n                                        </p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %>  \n                                    <% if (price == '0' && cart == '0') { %>\n                                        <p class=\"goods-title\"><%- item.title %></p>\n                                        <p class=\"goods-price\"></p>\n                                        <p class=\"goods-price-taobao\"></p>  \n                                    <% } %> \n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != 'normal' ) { %>  \n                                <div class=\"goods-buy btn<%-buy_btn_type %>\"></div>\n                                <% if ( title && !price) { %>\n                                    <div class='buy-tag-space'></div>\n                                <% } %>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n            <% }); %>\n        <% } else if (size == '3') { %>\n            <!-- 列表 -->\n            <% _.each(goodsSample, function(item, index) { %>\n                <li class=\"goods-card <%-showtype %>\">\n                    <a href=\"javascript: void(0);\" class=\"link js-goods clearfix\">\n                       <div class=\"photo-block\">\n                           <img class=\"goods-photo js-goods-lazy\" src=\"<%= item.image_url %>\"/>\n                       </div>\n                       <div class=\"info\">\n                            <p class=\"goods-title\"><%- item.title %></p>\n                            <p class=\"goods-price\"><em>￥<%= item.price %></em></p>  \n                            <p class=\"goods-price-taobao\"></p>         \n                            <% if ( buy_btn ) { %>  \n                                <div class=\"goods-buy btn<%-buy_btn_type %>\"></div>\n                            <% } %>\n                       </div>                  \n                    </a>\n                </li>      \n            <% }); %>\n        <% } %>\n    </ul>\n    <div class=\"component-border\"></div>\n</div>\n<div class=\"actions\">\n    <div class=\"actions-wrap\"><span class=\"action edit\">编辑</span><span class=\"action add\">加内容</span><span class=\"action delete\">删除</span></div>\n</div>\n<div class=\"sort\">\n    <i class=\"sort-handler\"></i>\n</div>\n"
}),define("components/showcase/2.0.0/goods_list/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/goods_list/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/goods_list/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/image_ad/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n        <% if (show_method == \'0\') {%>\n        <div class="custom-image-swiper">\n            <div class="swiper-container" style="height: 80px">\n                <div class="swiper-wrapper">\n                    <img style="max-height: 80px; display: block;" src="http://imgqn.koudaitong.com/upload_files/2013/10/09/138129843442351477.jpg">\n                </div>\n            </div>\n        </div>\n        <% } else { %>\n        <ul class="custom-image clearfix">\n            <li>\n                <img src="http://imgqn.koudaitong.com/upload_files/2013/10/09/138129928109524248.jpg" style="display: block;">\n            </li>\n        </ul>\n        <% } %>\n    <% } else { %>\n        <% if (show_method == \'0\') { %>\n            <% if (sub_entry && sub_entry.length > 0) { %>\n            <div class="custom-image-swiper">\n                <div class="swiper-container" style="height: <%- height || 160 %>px">\n                    <div class="swiper-wrapper">\n                    </div>\n                </div>\n            </div>\n            <% } %>\n            <% if (sub_entry && sub_entry.length > 1) { %>\n            <div class="swiper-pagination">\n                <span class="swiper-pagination-switch swiper-active-switch"></span>\n                <% _.times(sub_entry.length - 1, function() { %>\n                    <span class="swiper-pagination-switch"></span>\n                <% }); %>\n            </div>\n            <% } %>\n        <% } else { %>\n        <ul class="custom-image clearfix">\n\n        </ul>\n        <% } %>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/image_ad/templates/show_item.html",[],function(){return'<% if (show_method == \'0\') { %>\n    <a href="javascript: void(0);" style="height: <%- Math.round(height) || 160 %>px;">\n        <% if (title !== \'\') { %>\n            <h3 class="title"><%- title %></h3>\n        <% } %>\n        <img src="<%= image_url %>" style="max-height: <%- Math.round(height) || 160 %>px;">\n    </a>\n<% } else { %>\n    <% if (title !== \'\') { %>\n    <h3 class="title"><%- title %></h3>\n    <% } %>\n    <img src="<%= image_url %>">\n<% } %>\n'}),define("components/showcase/2.0.0/image_ad/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/image_ad/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/image_ad/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:function(){return"0"==this.options.parent.get("show_method")?"div":"li"},className:function(){return"0"==this.options.parent.get("show_method")?"swiper-slide":"0"==this.options.parent.get("size")?"":"custom-image-small"},attributes:function(){var e=this;return{style:function(){return"0"==e.options.parent.get("show_method")?"height: "+e.options.parent.get("height")+"px":void 0}}},template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{show_method:this.parent.get("show_method"),size:this.parent.get("size"),height:this.parent.get("height")});var n=this.model.get("image_url");return n=n&&s.fullfillImage(n),e.image_url=n,e.image_thumb_url=n,e}})}),define("components/showcase/2.0.0/image_ad/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/image_ad/templates/show.html","components/showcase/2.0.0/image_ad/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/image_ad/templates/show.html"),s=e("components/showcase/2.0.0/image_ad/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset update remove",this.render)},onBeforeRender:function(){this.model.calculateImage()},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e,t=this;e=this.$("0"==this.model.get("show_method")?".swiper-wrapper":".custom-image"),this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(n){var i=new s({model:n,parent:t.model});e.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/nav/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n\n    <% } else { %>\n        <ul class="custom-nav-4 clearfix">\n\n        </ul>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/nav/templates/show_item.html",[],function(){return'<img src="<%= image_url %>">\n<% if (title !== \'\') { %>\n<span class="title"><%- title %></span>\n<% } %>'}),define("components/showcase/2.0.0/nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/nav/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/nav/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes),n=this.model.get("image_url");return n=n&&s.fullfillImage(n),e.image_url=n,e.image_thumb_url=n,e}})}),define("components/showcase/2.0.0/nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/nav/templates/show.html","components/showcase/2.0.0/nav/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/nav/templates/show.html"),s=e("components/showcase/2.0.0/nav/views/show_item");return n.extend({template:t.template(i),onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new s({model:t,parent:e.model}),o=this.$(".custom-nav-4"),l=n.indexOf(t);0===l?i.render().$el.appendTo(o):i.render().$el.insertAfter(o.children().eq(l-1)),e.render()}),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".custom-nav-4");this.model.get("sub_entry").length>0&&t.empty(),this.model.get("sub_entry").each(function(n){var i=new s({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/showcase/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n\n    <% } else { %>\n    <div class="custom-showcase-wrap custom-showcase-wrap-<%= mode %>">\n        <% if (title) { %>\n        <div class="custom-showcase-wrap-title">\n            <%= title %>\n        </div>\n        <% } %>\n        <div class="custom-showcase-body">\n            <ul class="custom-showcase clearfix">\n\n            </ul>\n            <% if (body_title) { %>\n            <div class="custom-showcase-body-title text-center">\n                <%= body_title %>\n            </div>\n            <% } %>\n            <% if (body_desc) { %>\n            <p class="custom-showcase-body-desc text-center">\n                <%= body_desc %>\n            </p>\n            <% } %>\n        </div>\n    </div>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/showcase/templates/show_item.html",[],function(){return'<img src="<%= fullfillImage(image_url) %>">\n<% if (title !== \'\') { %>\n<span class="title"><%- title %></span>\n<% } %>\n'}),define("components/showcase/2.0.0/showcase/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/showcase/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/showcase/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:"li",className:function(){return 0===this.model.index()?"custom-showcase-big":"custom-showcase-small"},template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},initialize:function(){this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/showcase/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/showcase/templates/show.html","components/showcase/2.0.0/showcase/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/showcase/templates/show.html"),s=e("components/showcase/2.0.0/showcase/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",function(e){var t=new s({model:e}),n=this.$(".custom-showcase"),i=e.index();0===i?t.render().$el.appendTo(n):t.render().$el.insertAfter(n.children().eq(i-1))}),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this.$(".custom-showcase");this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(t){var n=new s({model:t});e.append(n.render().el)})}})}),define("text!components/showcase/2.0.0/level/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-level">\n        <img class="custom-level-img<% if (_.isUndefined(is_default) || is_default) { %> custom-level-img-blur<% } %>" src="<%= fullfillImage(image.url) %>">\n        <% if (show_level == \'1\' && show_point == \'1\') { %>\n            <div class="custom-level-title-section">\n                <h5 class="custom-level-title"><%= level_msg %>高级会员<br><%= point_msg %>100分</h5>\n            </div>\n        <% } else if (show_point == \'1\') { %>\n            <div class="custom-level-title-section">\n                <h5 class="custom-level-title"><%= point_msg %>100分</h5>\n            </div>\n        <% } else if (show_level == \'1\') { %>\n            <div class="custom-level-title-section">\n               <h5 class="custom-level-title"><%= level_msg %>高级会员</h5>\n            </div>\n        <% } %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/level/views/show",["components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/level/templates/show.html","core/utils"],function(e,t,n){return e.extend({className:"app-field",template:_.template(t),onInit:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.destroying),this.listenTo(this.model,"editing:error",this.showEditAndError)},render:function(){return this.$el.html(this.template(_.extend({},this.model.attributes,{fullfillImage:n.fullfillImage}))),this}})}),define("text!components/showcase/2.0.0/link/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n    <ul class="custom-nav clearfix">\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第1条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第2条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第n条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n    </ul>\n    <% } %>\n    <ul class="custom-link clearfix"></ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/link/templates/show_item.html",[],function(){return'<a href="javascript:;" class="custom-link-link">\n    <h3 class="title">\n        <% if (source_type == \'link\') { %>\n            <%- source_title %>\n        <% } else { %>\n            第<%= index %>条 <%- source_title %> 的『关联链接』\n        <% } %>\n    </h3>\n    <i class="pull-right right-arrow"></i>\n</a>\n'}),define("components/showcase/2.0.0/link/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/link/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/link/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.index=e.index,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){return t.extend(this.model.toJSON(),{index:this.index})}})}),define("components/showcase/2.0.0/link/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/link/templates/show.html","components/showcase/2.0.0/link/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/link/templates/show.html"),s=e("components/showcase/2.0.0/link/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render),this.listenTo(this.model.get("sub_entry"),"change",this.refreshOptions)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this.$(".custom-link");e.empty(),this.model.get("sub_entry").each(function(n){var i,o=n.get("source_type");o&&(i="link"==o?1:+n.get("number"),t.times(i,function(t){var i=new s({model:n,index:t+1});e.append(i.render().el)}))})}})}),define("text!components/showcase/2.0.0/text_nav/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n    <ul class="custom-nav clearfix">\n        <li>\n            <a class="clearfix" href="javascript:void(0);">\n                <span class="custom-nav-title">点此添加一个『文本导航』</span><i class="pull-right right-arrow"></i>\n            </a>\n        </li>\n    </ul>\n    <% } %>\n    <ul class="custom-nav clearfix js-custom-nav"></ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/text_nav/templates/show_item.html",[],function(){return'<a class="clearfix" href="javascript:void(0);"><span class="custom-nav-title"><%= title %></span><i class="pull-right right-arrow"></i></a>\n'}),define("components/showcase/2.0.0/text_nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/text_nav/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/text_nav/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/text_nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/text_nav/templates/show.html","components/showcase/2.0.0/text_nav/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/text_nav/templates/show.html"),s=e("components/showcase/2.0.0/text_nav/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".js-custom-nav");t.empty(),this.model.get("sub_entry").each(function(n){var i=new s({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/tag_list/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-tag-list clearfix">\n        <div class="custom-tag-list-menu-block js-collection-region" style="min-height: 323px;">\n        </div>\n        <div class="custom-tag-list-goods">\n            <ul class="custom-tag-list-goods-list">\n                <%\n                    var images_url = [\n                        \'http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg!60x60+2x.jpg\',\n                        \'http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg!60x60+2x.jpg\',\n                        \'http://imgqn.koudaitong.com/upload_files/2013/09/27/138029095601969662.jpg!60x60+2x.jpg\',\n                        \'http://imgqn.koudaitong.com/upload_files/2013/10/09/138130084954645499.jpg!60x60+2x.jpg\'\n                    ]; %>\n                <% _.each(images_url, function(url){ %>\n                <li class="custom-tag-list-single-goods clearfix">\n                    <div class="custom-tag-list-goods-img">\n                        <img src="<%= url %>" style="display: inline;">\n                    </div>\n                    <div class="custom-tag-list-goods-detail">\n                        <p class="custom-tag-list-goods-title">此处显示商品名称</p>\n                        <span class="custom-tag-list-goods-price">￥100.00</span>\n                        <a class="custom-tag-list-goods-buy" href="javascript:void(0)"><span>购买</span></a>\n                    </div>\n                </li>\n                <% }); %>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/tag_list/templates/show_item.html",[],function(){return'<a href="javascript:;"><span><%= title %></span></a>\n'}),define("components/showcase/2.0.0/tag_list/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tag_list/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tag_list/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),className:function(){return 0===this.model.index()?"current":""},initialize:function(e){e=e||{},this.listenTo(this.model,"change",this.render)},serializeData:function(){var e=this.model.toJSON();return t.extend(e,{index:this.model.index()})}})}),define("text!components/showcase/2.0.0/tag_list/templates/show_empty.html",[],function(){return'<a href="javascript:;" class="current">商品组一</a>\n<a href="javascript:;">商品组二</a>\n<a href="javascript:;">商品组三</a>\n'}),define("components/showcase/2.0.0/tag_list/views/show_empty",["require","underscore","marionette","text!components/showcase/2.0.0/tag_list/templates/show_empty.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tag_list/templates/show_empty.html");return n.ItemView.extend({tagName:"li",template:t.template(i)})}),define("components/showcase/2.0.0/tag_list/views/show_collection",["require","marionette","components/showcase/2.0.0/tag_list/views/show_item","components/showcase/2.0.0/tag_list/views/show_empty"],function(e){var t=e("marionette"),n=e("components/showcase/2.0.0/tag_list/views/show_item"),i=e("components/showcase/2.0.0/tag_list/views/show_empty");return t.CollectionView.extend({tagName:"ul",className:"custom-tag-list-side-menu",itemView:n,emptyView:i})}),define("components/showcase/2.0.0/tag_list/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tag_list/templates/show.html","components/showcase/2.0.0/tag_list/views/show_collection","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tag_list/templates/show.html"),s=e("components/showcase/2.0.0/tag_list/views/show_collection"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.collectionRegion.show(new s({collection:this.model.get("sub_entry")}))}})}),define("text!components/showcase/2.0.0/title/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (title_template == \'0\') {%>\n        <% if (show_method == \'0\') { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-left">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } else if (show_method == \'1\') { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-center">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } else { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-right">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } %>\n    <% } else { %>\n        <div>\n            <div class="custom-title text-left">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %></h2>\n                <% if(wx_title_date != \'\' || wx_title_author != \'\' || wx_title_link != \'\') {%>\n                <p class="sub_title"><span class="sub_title_date"><%= wx_title_date %></span><span class="sub_title_author"><%= wx_title_author %></span><a class="sub_title_link" href="javascript:;"><%= wx_title_link %></a></p>\n                <% } %>\n            </div>\n        </div>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/title/templates/show_item.html",[],function(){return'<span class="gray">-</span> <a><%- title %></a>\n'}),define("components/showcase/2.0.0/title/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/title/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/title/templates/show_item.html");return n.ItemView.extend({tagName:"span",className:"custom-title-link",template:t.template(i),initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/title/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/title/templates/show.html","components/showcase/2.0.0/title/views/show_item"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/title/templates/show.html"),s=e("components/showcase/2.0.0/title/views/show_item");return n.extend({template:t.template(i),onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new s({model:t,parent:e.model}),o=this.$(".custom-title-link-container"),l=n.indexOf(t);0===l?i.render().$el.appendTo(o):i.render().$el.insertAfter(o.children().eq(l-1))})},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".custom-title-link-container");t.empty(),this.model.get("sub_entry").each(function(n){var i=new s({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/component/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (_.isEmpty(title)) { %>\n        <div class="custom-richtext">\n            点击编辑『自定义页面模块』\n        </div>\n    <% } %>\n    <div class="custom-richtext">\n        <%= title %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/component/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/component/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/component/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/search/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-search">\n        <form action="/" method="GET">\n            <input type="text" class="custom-search-input" placeholder="商品搜索：请输入商品关键字" disabled>\n            <button type="submit" class="custom-search-button">搜索</button>\n        </form>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/search/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/search/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/search/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/line/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-line-wrap">\n        <hr class="custom-line" />\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/line/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/line/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/line/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/cube/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length <= 0) { %>\n    <div class="custom-richtext">\n        魔方可以拼出不同列的图片，分成4列。你可以通过添加多个魔方进行组合拼图。\n    </div>\n    <% } %>\n    <table class="custom-cube-table">\n        <tbody>\n            <tr class="custom-cube"></tr>\n        </tbody>\n    </table>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/cube/templates/selection_show.html",[],function(){return'<% if (title !== \'\') { %>\n<h3 class="title"><%- title %></h3>\n<% } %>\n<img src="<%= image_url %>">'}),define("components/showcase/2.0.0/cube/views/selection_show",["components/showcase/1.0.0/base/views/base","text!components/showcase/2.0.0/cube/templates/selection_show.html","core/utils"],function(e,t,n){return e.extend({tagName:"td",attributes:function(){var e=this;return{style:function(){},colspan:function(){return e.model.get("show_method")}}},template:_.template(t),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){var e=_.clone(this.model.attributes);_.extend(e,{size:this.parent.get("size"),height:this.parent.get("height")});var t=this.model.get("image_url");return t=t&&n.fullfillImage(t),e.image_url=t,e.image_thumb_url=t,this.$el.html(this.template(e)),this}})}),define("components/showcase/2.0.0/cube/views/show",["components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/cube/templates/show.html","components/showcase/2.0.0/cube/views/selection_show"],function(e,t,n){return e.extend({className:"app-field",template:_.template(t),onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,i){var s,o=new n({model:t,parent:e.model});
s=this.$(".custom-cube");var l=i.indexOf(t);0===l?o.render().$el.appendTo(s):o.render().$el.insertAfter(s.children().eq(l-1)),e.render()}),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"editing:error",this.showEditAndError),this.listenTo(this.model,"editing:error",this.showEditAndError),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.destroying)},render:function(){return this.$el.html(this.template(this.model.attributes)),this.refreshOptions(),this},refreshOptions:function(){var e,t=this;e=this.$(".custom-cube"),this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(i){var s=new n({model:i,parent:t.model});e.append(s.render().el)})}})}),define("text!components/showcase/2.0.0/cube2/templates/show.html",[],function(){return'<div class="control-group custom-cube2-table">\n    <table>\n        <tbody>\n            <%= tableContent %>\n        </tbody>\n    </table>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/cube2/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/cube2/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/cube2/templates/show.html");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.$el.on("click","td a",function(e){e.preventDefault()})},onBeforeRender:function(){this.model.denerateTableContent()}})}),define("text!components/showcase/2.0.0/tpl_shop/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-shop">\n        <div class="tpl-shop-header" style="<% if(backgroundImage) { %>background-image: url(<%- fullfillImage(backgroundImage) %>);<% } %> background-color: <%- backgroundColor %>;">\n            <div class="tpl-shop-title"><%- window._global.mp_data.team_name %></div>\n            <div class="tpl-shop-avatar">\n                <img src="<%- fullfillImage(avatar) %>" alt="">\n            </div>\n        </div>\n        <div class="tpl-shop-content">\n            <ul class="clearfix">\n                <li>\n                    <a href="javascript:;">\n                        <span class="count">0</span>\n                        <span class="text">全部商品</span>\n                    </a>\n                </li>\n                <li>\n                    <a href="javascript:;">\n                        <span class="count">0</span>\n                        <span class="text">上新商品</span>\n                    </a>\n                </li>\n                <li>\n                    <a href="javascript:;">\n                        <span class="count user"></span>\n                        <span class="text">我的订单</span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_shop/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_shop/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_shop/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage}})}),define("text!components/showcase/2.0.0/tpl_weixin/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-weixin">\n        <img src="<%= fullfillImage(background) %>">\n        <div class="js-collection-region">\n            <ul class="tpl-weixin-list clearfix" style="top: <%= top %>%;"></ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html",[],function(){return'<a href="javascript:;"><%- title %></a>'}),define("components/showcase/2.0.0/tpl_weixin/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html");return n.ItemView.extend({tagName:"li",className:function(){var e=this.model.index()+1,t="tpl-weixin-list-item tpl-weixin-list-item-"+e+" done";return t},template:t.template(i),initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/tpl_weixin/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_weixin/templates/show.html","components/showcase/2.0.0/tpl_weixin/views/show_item","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/show.html"),s=e("components/showcase/2.0.0/tpl_weixin/views/show_item"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new s({model:t,parent:e.model}),o=this.$(".tpl-weixin-list"),l=n.indexOf(t);0===l?i.render().$el.appendTo(o):i.render().$el.insertAfter(o.children().eq(l-1))}),this.listenTo(this.model.get("sub_entry"),"reset remove",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".tpl-weixin-list");t.empty(),this.model.get("sub_entry").each(function(n){var i=new s({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/tpl_fbb/templates/show.html",[],function(){return'<div class="control-group">\n    <style>\n        .tpl-fbb {\n            background-image: url(<%= fullfillImage(background) %>);\n            background-position: center top;\n            background-repeat: no-repeat;\n            background-size: 320px <%= height / (width / 320) %>px;\n            height: <%= height / (width / 320) %>px;\n        }\n        .swiper-wrapper {\n            width: 500px;\n        }\n    </style>\n    <div class="tpl-fbb">\n        <div class="swiper-container js-tpl-fbb js-collection-region">\n            <div class="swiper-wrapper clearfix js-subentry-list">\n\n            </div>\n        </div>\n    </div>\n    <div class="component-border"></div>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html",[],function(){return'<a href="javascript:;"<% if (bg_image_url) { %> class="slide-bg" style="background-image: url(<%= fullfillImage(bg_image_url) %>)"<% } %>>\n    <% if (bg_image_url) { %>\n        <div class="swiper-item-bg"></div>\n    <% } %>\n    <div class="tpl-fbb-item-wrap">\n        <div class="tpl-fbb-item-name">\n            <%= title %>\n        </div>\n        <div class="tpl-fbb-item-line"></div>\n        <div class="tpl-fbb-item-icon">\n            <% if (icon_image_url) { %>\n                <img src="<%= fullfillImage(icon_image_url) %>" width="30" height="30">\n            <% } %>\n        </div>\n        <div class="tpl-fbb-item-text">\n            <%= text %>\n        </div>\n        <div class="tpl-fbb-item-date">\n            <%= date %>\n        </div>\n    </div>\n</a>\n'}),define("components/showcase/2.0.0/tpl_fbb/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:"div",className:"swiper-slide tpl-fbb-item done",template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},initialize:function(){this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/tpl_fbb/views/show_collection",["require","marionette","components/showcase/2.0.0/tpl_fbb/views/show_item"],function(e){var t=e("marionette"),n=e("components/showcase/2.0.0/tpl_fbb/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"swiper-wrapper clearfix",itemView:n})}),define("components/showcase/2.0.0/tpl_fbb/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_fbb/templates/show.html","components/showcase/2.0.0/tpl_fbb/views/show_collection","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/show.html"),s=e("components/showcase/2.0.0/tpl_fbb/views/show_collection"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new s({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/tpl_course/templates/show.html",[],function(){return'<div class="control-group">\n    <style>\n        .tpl-fbb {\n            background-image: url(<%= fullfillImage(background) %>);\n            background-position: center top;\n            background-repeat: no-repeat;\n            background-size: 320px <%= height / (width / 320) %>px;\n            height: <%= height / (width / 320) %>px;\n        }\n        .swiper-wrapper {\n            width: 500px;\n        }\n        .tpl-course {\n            position: relative;\n        }\n    </style>\n    <div class="tpl-fbb tpl-course">\n        <h1 class="tpl-course-title" style="color: <%- title_color %>"><%- title %></h1>\n        <h2 class="tpl-course-sub-title" style="color: <%- sub_title_color %>"><%- sub_title %></h2>\n        <div class="text-center butn-section" style="top: <%- top %>%;">\n            <a href="javascript:;" class="butn butn-xxlarge butn-primary butn-buy"><%- button_text %></a>\n        </div>\n        <div class="swiper-container js-tpl-fbb js-collection-region">\n\n        </div>\n    </div>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_course/templates/show_item.html",[],function(){return'<a href="javascript:;"<% if (bg_image_url) { %> class="slide-bg" style="background-image: url(<%= bg_image_url %>)"<% } %>>\n    <% if (bg_image_url) { %>\n        <div class="swiper-item-bg"></div>\n    <% } %>\n    <div class="tpl-fbb-item-wrap">\n        <div class="tpl-fbb-item-name">\n            <%= title %>\n        </div>\n        <div class="tpl-fbb-item-line"></div>\n        <div class="tpl-fbb-item-icon">\n            <% if (icon_image_url) { %>\n                <img src="<%= icon_image_url %>" width="30" height="30">\n            <% } %>\n        </div>\n    </div>\n</a>'}),define("components/showcase/2.0.0/tpl_course/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_course/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_course/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:"div",className:"swiper-slide tpl-fbb-item done",template:t.template(i),initialize:function(e){this.options=e||{},this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=this.model.toJSON();return e.icon_image_url=s.fullfillImage(e.icon_image_url),e.bg_image_url=s.fullfillImage(e.bg_image_url),e}})}),define("components/showcase/2.0.0/tpl_course/views/show_collection",["require","marionette","components/showcase/2.0.0/tpl_course/views/show_item"],function(e){var t=e("marionette"),n=e("components/showcase/2.0.0/tpl_course/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"swiper-wrapper clearfix",itemView:n})}),define("components/showcase/2.0.0/tpl_course/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_course/templates/show.html","components/showcase/2.0.0/tpl_course/views/show_collection","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_course/templates/show.html"),s=e("components/showcase/2.0.0/tpl_course/views/show_collection"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},regions:{collectionRegion:".js-collection-region"},serializeData:function(){var e=this.model.toJSON();return e.background=o.fullfillImage(e.background),e},onRender:function(){this.collectionRegion.show(new s({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/tpl_wxd/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-wxd">\n        <div class="tpl-wxd-header" style="background-image: url(<%- fullfillImage(backgroundImage) %>)">\n            <div class="tpl-wxd-title"><%- window._global.mp_data.team_name %></div>\n            <div class="tpl-wxd-avatar">\n                <img src="<%- fullfillImage(avatar) %>" alt="">\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_wxd/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_wxd/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_wxd/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage}})}),define("text!components/showcase/2.0.0/tpl_11_11/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-11-11">\n        <div class="tpl-11-11-banner" style="<% if(banner) { %>background-image: url(<%= fullfillImage(banner) %>)<% } %>"></div>\n        <div class="tpl-11-11-title clearfix">\n            <span class="tpl-11-11-team-name"><%= _global.mp_data.team_name %></span>\n            <div class="pull-right">\n                <a href="javascript:;" class="tpl-11-11-follow">关注</a>\n            </div>\n        </div>\n        <ul class="tpl-11-11-coupon clearfix">\n            <% if(tradeincard.length) { %>\n                <% _.each(tradeincard, function(item) { %>\n                    <li>\n                        <a href="javascript:;">\n                            <div class="tpl-11-11-coupon-meta">\n                                <div class="tpl-11-11-coupon-meta-price"><span>￥</span><%= item.value %></div>\n                                <div class="tpl-11-11-coupon-meta-desc">\n                                    满<%= item.at_least %>元可用\n                                </div>\n                            </div>\n                            <div class="tpl-11-11-coupon-get">马上领取</div>\n                        </a>\n                    </li>\n                <% }); %>\n            <% } else { %>\n                <% for(var i = 0; i < 3; i++) { %>\n                    <li>\n                        <a href="javascript:;">\n                            <div class="tpl-11-11-coupon-meta">\n                                <div class="tpl-11-11-coupon-meta-price"><span>￥</span>100</div>\n                                <div class="tpl-11-11-coupon-meta-desc">\n                                    满500元可用\n                                </div>\n                            </div>\n                            <div class="tpl-11-11-coupon-get">马上领取</div>\n                        </a>\n                    </li>\n                <% } %>\n            <% } %>\n        </ul>\n        <div class="tpl-11-11-notice">\n            <div class="tpl-11-11-notice-inner">\n                <div class="tpl-11-11-notice-scroll">\n                    <span>\n                        公告：<%= notice ? _.escape(notice).replace(/\\s/g, \'&nbsp;\') : \'请填写内容，如果过长，将会在手机上滚动显示\' %>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_11_11/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_11_11/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_11_11/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage}})}),define("text!components/showcase/2.0.0/category/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-category js-collection-region">\n\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/category/templates/show_item.html",[],function(){return"<% if (title !== '') { %>\n<a href=\"javascript:;\"><%- title %></a>\n<% } %>\n"}),define("components/showcase/2.0.0/category/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/category/templates/show_item.html"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/category/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),modelEvents:{change:"render"}})}),define("components/showcase/2.0.0/category/views/show_collection",["require","marionette","components/showcase/2.0.0/category/views/show_item"],function(e){var t=e("marionette"),n=e("components/showcase/2.0.0/category/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"custom-category-list clearfix",itemView:n})}),define("components/showcase/2.0.0/category/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/category/templates/show.html","components/showcase/2.0.0/category/views/show_collection"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/category/templates/show.html"),s=e("components/showcase/2.0.0/category/views/show_collection");return n.extend({template:t.template(i),regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new s({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/white/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-white text-center" style="height: <%= height %>px;">\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/white/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/white/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/white/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/store/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-store">\n        <a class="custom-store-link clearfix" href="javascript:;">\n            <div class="custom-store-name">\n                <%- title %>\n            </div>\n            <div class="custom-store-enter">\n                进入店铺\n            </div>\n        </a>\n    </div>\n\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/store/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/store/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/store/templates/show.html");return n.extend({template:t.template(i),serializeData:function(){return{title:window._global.mp_data.team_name||""}}})}),define("text!components/showcase/2.0.0/recommend_goods/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-recommend-goods clearfix">\n        <div class="custom-recommend-goods-title">\n            <a href="javascript:;">推荐商品</a>\n        </div>\n        <ul class="custom-recommend-goods-list clearfix">\n            <% for(var i = 0; i < goodsSample.length; i++){ %>\n                <li>\n                    <a href="javascript:;">\n                        <img src="<%- goodsSample[i].image_url %>" alt="">\n                    </a>\n                </li>\n            <% } %>\n        </ul>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/recommend_goods/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/recommend_goods/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/recommend_goods/templates/show.html");return n.extend({className:"app-field",template:t.template(i),onInit:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.destroying)},render:function(){var e={goodsSample:[{image_url:"http://imgqn.koudaitong.com/upload_files/2013/11/27/138554366971566702.jpg",price:"379.00"},{image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029081159828528.jpg",price:"5.50"},{image_url:"http://imgqn.koudaitong.com/upload_files/2013/09/27/138029095601969662.jpg",price:"32.00"}]};return this.$el.html(this.template(e)),this}})}),define("text!components/showcase/2.0.0/scroll/templates/show.html",[],function(){return'<div class="control-group">\n    <%\n        var image_url = \'\';\n        if(first_page_image_url) {\n            image_url = fullfillImage(first_page_image_url);\n        } else {\n            image_url = window._global.url.cdn_static + \'/image/scroll/default2.gif\';\n        }\n    %>\n    <div class="www-tpl-scroll">\n        <% if(homepage_icon == \'1\') { %>\n            <div class="ui-left-btns">\n                <i class="ui-homepage-btn"></i>\n            </div>\n        <% } %>\n        <% if(music_icon == \'1\') { %>\n            <div class="ui-right-btns">\n                <i class="ui-music-btn"></i>\n            </div>\n        <% } %>\n        <img src="<%= image_url %>" alt="全画幅场景">\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/scroll/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/scroll/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage}})}),define("text!components/showcase/2.0.0/scroll_nav/templates/show_item.html",[],function(){return'<% if(image_url) { %>\n<div class="scroll-nav-item" style="background-image: url(\'<%= fullfillImage(image_url) %>\');">\n<% } else { %>\n<div class="scroll-nav-item">\n<% } %>\n    <div class="scroll-nav-item-bg"></div>\n    <div class="scroll-nav-item-title"><%- title %></div>\n    <div class="scroll-nav-item-sub-title"><%- sub_title %></div>\n</div>\n\n\n'}),define("components/showcase/2.0.0/scroll_nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/scroll_nav/templates/show_item.html","core/utils"],function(e){var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/scroll_nav/templates/show_item.html"),s=e("core/utils");return n.ItemView.extend({tagName:"li",template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},initialize:function(e){e=e||{},this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/scroll_nav/views/show_collection",["require","marionette","components/showcase/2.0.0/scroll_nav/views/show_item"],function(e){var t=e("marionette"),n=e("components/showcase/2.0.0/scroll_nav/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"clearfix",itemView:n})}),define("text!components/showcase/2.0.0/scroll_nav/templates/show.html",[],function(){return'<div class="control-group">\n    <%\n        var image_url = window._global.url.cdn_static + \'/image/scroll_nav/default.gif\';\n\n        if(background_images && background_images.length) {\n            image_url = fullfillImage(background_images[0].url, \'!640x320.jpg\');\n        }\n    %>\n    <div class="www-tpl-scroll www-scroll-nav">\n        <% if(homepage_icon == \'1\') { %>\n            <div class="ui-left-btns">\n                <i class="ui-homepage-btn"></i>\n            </div>\n        <% } %>\n        <img src="<%= image_url %>" alt="">\n\n        <div class="js-scroll-nav-show-collection-region nav-style-<%= nav_style %>"></div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll_nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","components/showcase/2.0.0/scroll_nav/views/show_collection","text!components/showcase/2.0.0/scroll_nav/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("components/showcase/2.0.0/scroll_nav/views/show_collection"),s=e("text!components/showcase/2.0.0/scroll_nav/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(s),templateHelpers:{fullfillImage:o.fullfillImage},regions:{collectionRegion:".js-scroll-nav-show-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry")}))}})}),define("text!components/showcase/2.0.0/image_text/templates/show.html",[],function(){return'<% if (position === 0) { %>\n<div class="appmsg appmsg-multiple-first">\n    <h4 class="appmsg-title"><%- title || \'标题\' %></h4>\n    <p class="appmsg-meta"><%- currentDay %></p>\n    <div class="appmsg-thumb-wrap">\n        <% if (image) { %>\n        <img src="<%- image %>"/>\n        <% } else { %>\n        <p>封面图片</p>\n        <% } %>\n    </div>\n    <% if (digest) { %>\n    <div class="appmsg-digest">\n        <%- digest %>\n    </div>\n    <% } %>\n    <div class="appmsg-view-full clearfix">\n        <span>阅读全文</span>\n        <span class="pull-right">&gt;</span>\n    </div>\n</div>\n<% } else { %>\n<div class="appmsg appmsg-multiple-others">\n    <h4 class="appmsg-title"><%- title || \'标题\' %></h4>\n    <div class="appmsg-thumb-wrap">\n        <% if (image) { %>\n        <img src="<%- image %>" width="50" height="50" />\n        <% } else { %>\n        <p>缩略图</p>\n        <% } %>\n    </div>\n</div>\n<% } %>\n\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <% if (position > 1) { %>\n        <span class="action delete">删除</span>\n        <% } %>\n    </div>\n</div>'}),define("components/showcase/2.0.0/image_text/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","core/utils","text!components/showcase/2.0.0/image_text/templates/show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("core/utils"),s=e("text!components/showcase/2.0.0/image_text/templates/show.html");return n.extend({className:function(){var e=this.model.position();return e>1?"app-field clearfix":"app-field clearfix not-sortable js-not-sortable"},template:t.template(s),serializeData:function(){var e=this.model.attributes,n=this.model.position(),s=this.model.get("image");s=s&&i.fullfillImage(s);var o=i.getCurrentDay();return t.extend({},e,{image:s,position:n,currentDay:o})}})}),define("text!components/showcase/2.0.0/audio/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (+style==0 ) { %>\n        <div class="custom-audio">\n            <div class="custom-audio-weixin clearfix <% if(bubble == \'right\') { %>custom-audio-weixin-right<% } %> ">\n                <img src="<%= avatar %>" width="40" height="40" class="custom-audio-logo">\n                <span class="custom-audio-bar">\n                    <img class="js-animation hide" src="http://static.koudaitong.com/v2/image/wap/audio/player.gif" alt="播放器动画" width="13" height="17">\n                    <i class="custom-audio-animation-static js-animation-static"></i>\n                </span>\n                <span class="custom-audio-time js-duration"></span>\n            </div>\n        </div>\n    <% } else { %>\n        <div class="custom-audio">\n            <div class="custom-audio-music">\n                <i class="custom-audio-btn js-trigger"></i>\n                <span class="custom-audio-title"><%- title %></span>\n                <span class="custom-audio-status js-status"></span>\n                <span class="custom-audio-time">\n                    <span class="js-current-time"></span>\n                    <span class="js-duration"></span>\n                </span>\n                <span class="custom-audio-timeline js-percentage"></span>\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <span class="action add">加内容</span>\n        <span class="action delete">删除</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/audio/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/audio/templates/show.html","core/utils"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/audio/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(i),serializeData:function(){var e=this.model.toJSON();
return t.extend(e,{avatar:s.fullfillImage(e.avatar||_global.mp_data.logo,"!80x80.jpg")})}})}),define("components/showcase/2.0.0/config",["require","components/showcase/2.0.0/rich_text/models/rich_text","components/showcase/2.0.0/goods/models/goods","components/showcase/2.0.0/goods_list/models/goods","components/showcase/2.0.0/image_ad/models/model","components/showcase/2.0.0/nav/models/model","components/showcase/2.0.0/showcase/models/model","components/showcase/2.0.0/level/models/level","components/showcase/2.0.0/link/models/model","components/showcase/2.0.0/text_nav/models/model","components/showcase/2.0.0/tag_list/models/model","components/showcase/2.0.0/title/models/model","components/showcase/2.0.0/component/models/component","components/showcase/2.0.0/search/models/model","components/showcase/2.0.0/line/models/model","components/showcase/2.0.0/cube/models/model","components/showcase/2.0.0/cube2/models/model","components/showcase/2.0.0/tpl_shop/models/model","components/showcase/2.0.0/tpl_weixin/models/model","components/showcase/2.0.0/tpl_fbb/models/model","components/showcase/2.0.0/tpl_course/models/model","components/showcase/2.0.0/tpl_wxd/models/model","components/showcase/2.0.0/tpl_11_11/models/model","components/showcase/2.0.0/category/models/model","components/showcase/2.0.0/white/models/model","components/showcase/2.0.0/store/models/model","components/showcase/2.0.0/recommend_goods/models/model","components/showcase/2.0.0/scroll/models/model","components/showcase/2.0.0/scroll_nav/models/model","components/showcase/2.0.0/image_text/models/model","components/showcase/2.0.0/audio/models/model","components/showcase/2.0.0/rich_text/views/edit","components/showcase/2.0.0/goods/views/edit","components/showcase/2.0.0/goods_list/views/edit","components/showcase/2.0.0/image_ad/views/edit","components/showcase/2.0.0/nav/views/edit","components/showcase/2.0.0/showcase/views/edit","components/showcase/2.0.0/level/views/edit","components/showcase/2.0.0/link/views/edit","components/showcase/2.0.0/text_nav/views/edit","components/showcase/2.0.0/tag_list/views/edit","components/showcase/2.0.0/title/views/edit","components/showcase/2.0.0/component/views/edit","components/showcase/2.0.0/search/views/edit","components/showcase/2.0.0/line/views/edit","components/showcase/2.0.0/cube/views/edit","components/showcase/2.0.0/cube2/views/edit","components/showcase/2.0.0/tpl_shop/views/edit","components/showcase/2.0.0/tpl_weixin/views/edit","components/showcase/2.0.0/tpl_fbb/views/edit","components/showcase/2.0.0/tpl_course/views/edit","components/showcase/2.0.0/tpl_wxd/views/edit","components/showcase/2.0.0/tpl_11_11/views/edit","components/showcase/2.0.0/category/views/edit","components/showcase/2.0.0/white/views/edit","components/showcase/2.0.0/store/views/edit","components/showcase/2.0.0/recommend_goods/views/edit","components/showcase/2.0.0/scroll/views/edit","components/showcase/2.0.0/scroll_nav/views/edit","components/showcase/2.0.0/image_text/views/edit","components/showcase/2.0.0/audio/views/edit","components/showcase/2.0.0/rich_text/views/show","components/showcase/2.0.0/goods/views/show","components/showcase/2.0.0/goods_list/views/show","components/showcase/2.0.0/image_ad/views/show","components/showcase/2.0.0/nav/views/show","components/showcase/2.0.0/showcase/views/show","components/showcase/2.0.0/level/views/show","components/showcase/2.0.0/link/views/show","components/showcase/2.0.0/text_nav/views/show","components/showcase/2.0.0/tag_list/views/show","components/showcase/2.0.0/title/views/show","components/showcase/2.0.0/component/views/show","components/showcase/2.0.0/search/views/show","components/showcase/2.0.0/line/views/show","components/showcase/2.0.0/cube/views/show","components/showcase/2.0.0/cube2/views/show","components/showcase/2.0.0/tpl_shop/views/show","components/showcase/2.0.0/tpl_weixin/views/show","components/showcase/2.0.0/tpl_fbb/views/show","components/showcase/2.0.0/tpl_course/views/show","components/showcase/2.0.0/tpl_wxd/views/show","components/showcase/2.0.0/tpl_11_11/views/show","components/showcase/2.0.0/category/views/show","components/showcase/2.0.0/white/views/show","components/showcase/2.0.0/store/views/show","components/showcase/2.0.0/recommend_goods/views/show","components/showcase/2.0.0/scroll/views/show","components/showcase/2.0.0/scroll_nav/views/show","components/showcase/2.0.0/image_text/views/show","components/showcase/2.0.0/audio/views/show"],function(e){return{models:{rich_text:e("components/showcase/2.0.0/rich_text/models/rich_text"),goods:e("components/showcase/2.0.0/goods/models/goods"),goods_list:e("components/showcase/2.0.0/goods_list/models/goods"),image_ad:e("components/showcase/2.0.0/image_ad/models/model"),nav:e("components/showcase/2.0.0/nav/models/model"),showcase:e("components/showcase/2.0.0/showcase/models/model"),level:e("components/showcase/2.0.0/level/models/level"),link:e("components/showcase/2.0.0/link/models/model"),text_nav:e("components/showcase/2.0.0/text_nav/models/model"),tag_list:e("components/showcase/2.0.0/tag_list/models/model"),title:e("components/showcase/2.0.0/title/models/model"),component:e("components/showcase/2.0.0/component/models/component"),search:e("components/showcase/2.0.0/search/models/model"),line:e("components/showcase/2.0.0/line/models/model"),cube:e("components/showcase/2.0.0/cube/models/model"),cube2:e("components/showcase/2.0.0/cube2/models/model"),tpl_shop:e("components/showcase/2.0.0/tpl_shop/models/model"),tpl_weixin:e("components/showcase/2.0.0/tpl_weixin/models/model"),tpl_fbb:e("components/showcase/2.0.0/tpl_fbb/models/model"),tpl_course:e("components/showcase/2.0.0/tpl_course/models/model"),tpl_wxd:e("components/showcase/2.0.0/tpl_wxd/models/model"),tpl_11_11:e("components/showcase/2.0.0/tpl_11_11/models/model"),category:e("components/showcase/2.0.0/category/models/model"),white:e("components/showcase/2.0.0/white/models/model"),store:e("components/showcase/2.0.0/store/models/model"),recommend_goods:e("components/showcase/2.0.0/recommend_goods/models/model"),scroll:e("components/showcase/2.0.0/scroll/models/model"),scroll_nav:e("components/showcase/2.0.0/scroll_nav/models/model"),image_text:e("components/showcase/2.0.0/image_text/models/model"),audio:e("components/showcase/2.0.0/audio/models/model")},editViews:{rich_text:e("components/showcase/2.0.0/rich_text/views/edit"),goods:e("components/showcase/2.0.0/goods/views/edit"),goods_list:e("components/showcase/2.0.0/goods_list/views/edit"),image_ad:e("components/showcase/2.0.0/image_ad/views/edit"),nav:e("components/showcase/2.0.0/nav/views/edit"),showcase:e("components/showcase/2.0.0/showcase/views/edit"),level:e("components/showcase/2.0.0/level/views/edit"),link:e("components/showcase/2.0.0/link/views/edit"),text_nav:e("components/showcase/2.0.0/text_nav/views/edit"),tag_list:e("components/showcase/2.0.0/tag_list/views/edit"),title:e("components/showcase/2.0.0/title/views/edit"),component:e("components/showcase/2.0.0/component/views/edit"),search:e("components/showcase/2.0.0/search/views/edit"),line:e("components/showcase/2.0.0/line/views/edit"),cube:e("components/showcase/2.0.0/cube/views/edit"),cube2:e("components/showcase/2.0.0/cube2/views/edit"),tpl_shop:e("components/showcase/2.0.0/tpl_shop/views/edit"),tpl_weixin:e("components/showcase/2.0.0/tpl_weixin/views/edit"),tpl_fbb:e("components/showcase/2.0.0/tpl_fbb/views/edit"),tpl_course:e("components/showcase/2.0.0/tpl_course/views/edit"),tpl_wxd:e("components/showcase/2.0.0/tpl_wxd/views/edit"),tpl_11_11:e("components/showcase/2.0.0/tpl_11_11/views/edit"),category:e("components/showcase/2.0.0/category/views/edit"),white:e("components/showcase/2.0.0/white/views/edit"),store:e("components/showcase/2.0.0/store/views/edit"),recommend_goods:e("components/showcase/2.0.0/recommend_goods/views/edit"),scroll:e("components/showcase/2.0.0/scroll/views/edit"),scroll_nav:e("components/showcase/2.0.0/scroll_nav/views/edit"),image_text:e("components/showcase/2.0.0/image_text/views/edit"),audio:e("components/showcase/2.0.0/audio/views/edit")},showViews:{rich_text:e("components/showcase/2.0.0/rich_text/views/show"),goods:e("components/showcase/2.0.0/goods/views/show"),goods_list:e("components/showcase/2.0.0/goods_list/views/show"),image_ad:e("components/showcase/2.0.0/image_ad/views/show"),nav:e("components/showcase/2.0.0/nav/views/show"),showcase:e("components/showcase/2.0.0/showcase/views/show"),level:e("components/showcase/2.0.0/level/views/show"),link:e("components/showcase/2.0.0/link/views/show"),text_nav:e("components/showcase/2.0.0/text_nav/views/show"),tag_list:e("components/showcase/2.0.0/tag_list/views/show"),title:e("components/showcase/2.0.0/title/views/show"),component:e("components/showcase/2.0.0/component/views/show"),search:e("components/showcase/2.0.0/search/views/show"),line:e("components/showcase/2.0.0/line/views/show"),cube:e("components/showcase/2.0.0/cube/views/show"),cube2:e("components/showcase/2.0.0/cube2/views/show"),tpl_shop:e("components/showcase/2.0.0/tpl_shop/views/show"),tpl_weixin:e("components/showcase/2.0.0/tpl_weixin/views/show"),tpl_fbb:e("components/showcase/2.0.0/tpl_fbb/views/show"),tpl_course:e("components/showcase/2.0.0/tpl_course/views/show"),tpl_wxd:e("components/showcase/2.0.0/tpl_wxd/views/show"),tpl_11_11:e("components/showcase/2.0.0/tpl_11_11/views/show"),category:e("components/showcase/2.0.0/category/views/show"),white:e("components/showcase/2.0.0/white/views/show"),store:e("components/showcase/2.0.0/store/views/show"),recommend_goods:e("components/showcase/2.0.0/recommend_goods/views/show"),scroll:e("components/showcase/2.0.0/scroll/views/show"),scroll_nav:e("components/showcase/2.0.0/scroll_nav/views/show"),image_text:e("components/showcase/2.0.0/image_text/views/show"),audio:e("components/showcase/2.0.0/audio/views/show")}}}),define("components/showcase/2.0.0/base/views/add",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!templates/add_content.html","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!templates/add_content.html"),o=e("core/utils");return i.extend({template:t.template(s),events:{"click .js-new-field":"handleAddField"},handleAddField:function(e){e.stopPropagation();var t=this.layout.collection.MAX_LENGTH||50;if(this.layout.collection.length>=t)return void o.errorNotify("内容最多"+t+"个。");var i=n(e.target).data("field-type"),s=window.SHOWCASE_CONFIG.models[i].initialize();this.model.collection?(this.layout.collection.add(s,{at:this.model.index()+1,silent:!0}),this.layout.collection.trigger("reset")):this.layout.collection.add(s),this.layout.displayEditView(s)}})}),define("text!templates/config_edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>页面名称：</label>\n        <div class="controls">\n            <input class="input-xxlarge" type="text" name="title" value="<%- title %>">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">页面描述：</label>\n        <div class="controls">\n            <input class="input-xxlarge" type="text" name="description" value="<%- description %>" placeholder="用户通过微信分享给朋友时，会自动显示页面描述">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">分类：</label>\n        <div class="controls">\n            <select class="js-category chosen-select" name="category" data-selected-id="<%= category %>" multiple data-placeholder="选择微杂志分类">\n            </select>\n            <p class="help-inline">\n                <a class="js-refresh-category" href="javascript:void(0);">刷新</a>\n                <span>|</span>\n                <a class="new_window" target="_blank" href="<%= window._global.url.www + \'/showcase/category/edit#create\' %>">+新建</a>\n            </p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= color %>" name="color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n            <p class="help-desc">背景颜色只在手机端显示。</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= background %>" data-full-size="<%= background %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n                <span>|</span>\n                <a href="javascript:;" class="control-action js-trigger-delete">删除</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：640 x 1080 像素，背景图片是满屏大图且只在PC端显示</p>\n        </div>\n    </div>\n</form>\n'}),define("views/config_edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!templates/config_edit.html","components/image/1.0.0/image","core/utils"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!templates/config_edit.html"),o=e("components/image/1.0.0/image"),l=e("core/utils");return i.extend({template:t.template(s),events:{'blur input[name="title"]':"updateModel",'blur input[name="description"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage",'change input[type="color"]':"updateModel","change select":"updateModel","click .js-reset-bg":"resetBg"},onInit:function(){this.listenTo(this.model,"change:background",this.render)},render:function(){var e=t.clone(this.model.attributes),n=this.model.get("background");n=n&&l.fullfillImage(n),e.background=n,this.$el.html(this.template(e))},onShow:function(){var e=this,t=this.$(".js-category"),i=t.chosen({no_results_text:"木有找到这个分类："});this.$(".js-refresh-category").on("click",function(s){var o=e.model.get("category");n.get(window._global.url.www+"/showcase/category/option",{selected:o},function(e){t.html(e),i.trigger("chosen:updated")}),s.preventDefault()}).trigger("click")},resetBg:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},chooseImage:function(){var e=this;o.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})}})}),define("text!templates/config_show.html",[],function(){return"<h1><span><%= title %></span></h1>\n<style>\n    .app-preview .app-field {\n        background-color: <%= color %> ! important;\n    }\n</style>\n"}),define("views/config_show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!templates/config_show.html"],function(e){var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!templates/config_show.html");return n.extend({template:t.template(i)})}),define("components/showcase/2.0.0/base/views/design",["require","underscore","jquery","backbone","marionette","text!templates/design.html","text!templates/add_content.html","components/showcase/2.0.0/base/views/show_collection","text!components/showcase/2.0.0/base/templates/stroagealert.html","components/showcase/2.0.0/config","components/showcase/2.0.0/base/views/add","views/config_edit","views/config_show"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("marionette"),o=e("text!templates/design.html"),l=e("text!templates/add_content.html"),a=e("components/showcase/2.0.0/base/views/show_collection"),c=e("text!components/showcase/2.0.0/base/templates/stroagealert.html"),r=e("components/showcase/2.0.0/config"),d=e("components/showcase/2.0.0/base/views/add"),p=e("views/config_edit"),m=e("views/config_show");window.SHOWCASE_CONFIG=r;var u=s.Layout.extend({SHOWCASE_CONFIG:r,className:"app-design clearfix",template:t.template(o),regions:{configRegion:".js-config-region",showRegion:".js-fields-region",editRegion:".js-sidebar-region",addRegion:".js-add-region"},templateHelpers:{showAddContent:function(){return l}},collectionEvents:{sync:"fetched onShow"},_fetched:!1,initialize:function(e){this.options=e||{},this.triggerMethod("init",e),this.options.isCreating&&this.fetched(),this.options.localStorage&&(this._storagedData=this.collection.localFetch(),this._initAutoLocalStroage(),this.options.isCreating&&this.showStorageAlert(),this.listenTo(this.collection,"sync",this.showStorageAlert)),this.listenTo(this.collection,"add remove reset sort sync",this.toggleSidebar),this.listenTo(window.NC,"notify:show",this.onNotifyShow),this.listenTo(window.NC,"notify:close",this.onNotifyClose),this.bindKeybroad()},fetched:function(){this._fetched=!0},toggleAction:function(){this.$(".app-actions").toggle(this._fetched)},onShow:function(){var e=this.collection.first();e&&"config"===e.get("type")&&this.configRegion.show(new m({model:e,layout:this})),this.showRegion.show(new a(t.extend({},this.options,{collection:this.collection,layout:this}))),this.createAllEditView(),this.displayFirstEditView(),this.addRegion.show(new d({model:new i.Model,layout:this})),setTimeout(t.bind(this.toggleAddView,this),10),this.toggleAction(),this.fixActionsPosition()},toggleAddView:function(){this.collection.includeFullscreenModel()?this.$el.addClass("without-add-region"):this.$el.removeClass("without-add-region")},displayEditView:function(e,t){t=t||{};var n=this.editRegion.currentView&&this.editRegion.currentView.model;if(e=e||n){var i=t.add?d:this.getEditViewConstructor(e),s=this.getShowViewInstance(e),o=this;if(this.$(".app-sidebar").css("margin-top",s.position().top),this.trigger("editing",e),t.edit&&this.scrollTop(s.offset().top-10),n===e&&!t.add&&!t.edit)return void this._scorllToFirstError(this.editRegion.currentView);var l=new i({model:e,layout:this});t.error&&l.once("show",function(){this.model.checkValid(),o._scorllToFirstError(this)}),t.notShow||this.editRegion.show(l)}},_scorllToFirstError:function(e){var t=e.$(".control-group.error").first();t.length>0&&this.scrollTop(t.offset().top-10)},createAllEditView:function(){for(var e=this,t=this.collection.models,n=t.length-1;n>=0;n--){var i=t[n];e.displayEditView(i,{notShow:!0})}},displayFirstEditView:function(){var e=this.collection.first();e&&this.displayEditView(e)},getEditViewConstructor:function(e){var t=e.get("type");if("config"===t)return p;if(t in this.SHOWCASE_CONFIG.editViews)return this.SHOWCASE_CONFIG.editViews[t];throw new Error("type not exist.")},getShowViewInstance:function(e){return"config"===e.get("type")?this.configRegion.currentView:this.showRegion.currentView.children.findByModel(e)},add:function(){return this.sync({is_display:1})},save:function(){return this.sync({is_display:0})},preview:function(){return this.sync()},sync:function(e){return this.collection.sync(e)},bindKeybroad:function(){var e=this;n(window).off("keydown.design").on("keydown.design",function(t){var n=t.target.nodeName.toLowerCase();if(-1===["input","textarea","select"].indexOf(n))switch(t.keyCode){case 74:e._handleKeyDown(t);break;case 75:e._handleKeyUp(t)}})},_handleKeyUp:function(e){var t,n=this.editRegion.currentView||{},i=n.model;i&&(t=i.index()-1,t>=0&&(this.displayEditView(this.collection.at(t),{edit:!0}),e.preventDefault()))},_handleKeyDown:function(e){var t,n=this.editRegion.currentView||{},i=n.model;i&&(t=i.index()+1,t<this.collection.length&&(this.displayEditView(this.collection.at(t),{edit:!0}),e.preventDefault()))},_initAutoLocalStroage:function(){var e=function(){this.collection.localSync()};clearInterval(this._autoLocalStorageTimter),this._autoLocalStorageTimter=setInterval(t.bind(e,this),3e4)},showStorageAlert:function(){if(!t.isEmpty(this._storagedData)&&JSON.stringify(this._storagedData)!==JSON.stringify(this.collection)){var e=n(c);e.one("click",".js-use-storage",t.bind(function(){this.collection.reset(this._storagedData,{parse:!0,silent:!0}),this.onShow(),e.alert("close")},this)),t.defer(t.bind(function(){this.$el.prepend(e)},this))}},toggleSidebar:function(){this.collection.length?this.$(".app-sidebar").show():this.$(".app-sidebar").hide()},scrollTop:function(e,t){t=t||200,n("html, body").animate({scrollTop:e},t)},fixActionsPosition:function(){this.$(".app-actions").css("bottom",n(".js-notify").height())},onNotifyShow:function(){this.fixActionsPosition()},onNotifyClose:function(){this.$(".app-actions").css("bottom",0)},onClose:function(){clearInterval(this._autoLocalStorageTimter)}});return u}),define("models/config",["require","components/showcase/2.0.0/base/models/base"],function(e){var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"config",title:"微杂志页面标题",category:[],background:"",color:"#f9f9f9",width:"",height:"",description:""}},idAttribute:"_id",validation:{title:{rangeLength:[1,50],msg:"标题长度不能少于一个字或者多余50个字"}}});return n}),define("components/showcase/2.0.0/base/storage",["require","underscore"],function(e){var t=e("underscore"),n=window.JSON,i=window.localStorage,s=function(e,t){var n=t.id;this.name="mp-"+window._global.kdt_id+"-adm-"+window._global.user_id+"-",this.name+=n?e+"-"+n:e};return t.extend(s.prototype,{set:function(e,t){if(i){t=n.stringify(t);try{i.setItem(e,t)}catch(s){"QuotaExceededError"===s.name&&(i.clear(),i.setItem(e,t))}}},get:function(e){return i?n.parse(i.getItem(e)):void 0},remove:function(e){i&&i.removeItem(e)},setItem:function(e){this.set(this.name,e)},getItem:function(){return this.get(this.name)},removeItem:function(){this.remove(this.name)}}),s}),define("components/showcase/2.0.0/base/collections/base",["require","backbone","core/utils","models/config","jquery","underscore","components/showcase/2.0.0/base/storage"],function(e){var t=e("backbone"),n=e("core/utils"),i=e("models/config"),s=e("jquery"),o=e("underscore"),l=e("components/showcase/2.0.0/base/storage");return t.Collection.extend({url:"",storageName:"",model:function(e,t){if(!window.SHOWCASE_CONFIG.models)return new i(e,t);if(!(e.type in window.SHOWCASE_CONFIG.models)){if("config"===e.type)return new i(e,t);throw"type error"}return window.SHOWCASE_CONFIG.models[e.type].initialize(e,t)},initialize:function(e,t){this.options=t||{},o.isUndefined(this.options.id)||(this.id=this.options.id),this.storage=new l(this.storageName,t),this.changed=!1,this.listenTo(this,"add remove sort reset",this._changed),this.listenTo(this,"sync",this._unchanged)},_changed:function(){this.changed=!0},_unchanged:function(){this.changed=!1},validate:function(){return this.some(function(e){var t=e.checkValid();return t&&e.trigger("valid:error"),t})},parse:function(e){var t=o.reject(e,function(e){return window.SHOWCASE_CONFIG.models?o.isArray(e)||o.isEmpty(e)||!(e.type in window.SHOWCASE_CONFIG.models)&&"config"!==e.type:o.isArray(e)||o.isEmpty(e)});return o.isEmpty(t)&&!this.noConfig&&(t.push(o.clone(o.result(i.prototype,"defaults"))),o.isFunction(this.parseEmptyData))?this.parseEmptyData(t):o.isFunction(this.onParse)?this.onParse(t):t},localSync:function(){return this.length?void(this.hasChanged()&&this.storage.setItem(this.toJSON())):void this.clearLocalData()},localFetch:function(){return this.storage.getItem()},clearLocalData:function(){this.storage.removeItem()},fetch:function(e){var t=this.url+"?id="+this.id;return n.ajax(t,e).done(o.bind(this._fetchDone,this)).fail(o.bind(this.error,this))},_fetchDone:function(e){e=this.parseResponseData(e),this.set(e.data,{parse:!0,silent:!0}),this.trigger("sync")},sync:function(e){if(e=e||{},this.validate())return s(".form-actions .btn").button("reset"),s.Deferred();this.beforeSync();var t=e.id||this.id,i=e.url||this.url,l=e.method||(t?"PUT":"POST"),a=o.extend({data:JSON.stringify(this),is_display:0},o.pick(this,"is_display","alias","title","id","num","start_sold_item","valid","out_id"),e),c={url:i,type:l,data:this.parseRequestData(a)};return n.ajax(c).done(o.bind(this._syncDone,this)).fail(o.bind(this.error,this))},parseResponseData:function(e){o.extend(this,o.pick(e,"is_display","alias","title","id","num","start_sold_item","valid","out_id"));var t=e.is_default;return t&&e.data.length>0&&"config"==e.data[0].type&&(e.data[0].is_default=t),e},parseRequestData:function(e){return this.handleData(e)},handleData:function(e){return e},beforeSync:function(){var e=this.at(0);"config"===e.get("type")&&(this.includeFullscreenModel()?e.set("has_fullscreen_component","1"):e.unset("has_fullscreen_component"))},_syncDone:function(e){o.isUndefined(this.id)&&(this.id=e.id),this.clearLocalData()},error:function(e){n.errorNotify(e)},hasChanged:function(){return this.changed?!0:this.any(function(e){return e.hasChanged()})},includeConfigModel:function(){var e=this.first();return!!e&&"config"===e.attributes.type},includeFullscreenModel:function(){return this.any(function(e){return!!e.get("is_fullscreen_component")})}})}),define("collections/field",["require","components/showcase/2.0.0/base/collections/base"],function(e){var t=e("components/showcase/2.0.0/base/collections/base"),n=t.extend({url:window._global.url.www+"/showcase/feature/item.json",storageName:"feature"});return n}),define("views/design",["require","underscore","core/utils","components/showcase/2.0.0/base/views/design","models/config","collections/field"],function(e){var t=e("underscore"),n=e("core/utils"),i=e("components/showcase/2.0.0/base/views/design"),s=e("models/config"),o=e("collections/field");return i.extend({ui:{add:".btn-add",save:".btn-save",preview:".btn-preview"},events:{"click @ui.add":"handleAdd","click @ui.save":"handleSave","click @ui.preview":"handlePreview"},onInit:function(e){this.collection=new o([],e),e.isCreating?(this.collection.add(new s),this.creating(e)):(this.collection.add(new s),this.collection.fetch()),window.fieldCollection=this.collection,window.design=this},creating:function(e){var n,i=this,s=[];switch(e.create_id){case"1":s=["title","rich_text","title","link","image_ad"],t.each(s,function(e,t){n=window.SHOWCASE_CONFIG.models[e];var s;s="title"===e&&t>0?n.initialize({title:"更多..."}):n.initialize(),i.collection.add(s)});break;case"2":s=["image_ad","goods","rich_text"],t.each(s,function(e){n=window.SHOWCASE_CONFIG.models[e];var t;t="image_ad"===e?n.initialize({show_method:"1"}):n.initialize(),i.collection.add(t)});break;case"4":n=window.SHOWCASE_CONFIG.models.scroll,i.collection.add(new n.initialize);break;case"5":n=window.SHOWCASE_CONFIG.models.scroll_nav,i.collection.add(new n.initialize)}i.collection.trigger("sync")},handleAdd:function(){var e=this;this.ui.add.button("loading"),this.add().done(function(){n.successNotify("上架成功。"),window.router.navigate("#list",{trigger:!0})}).fail(function(){e.ui.add.button("reset")})},handleSave:function(){var e=this;this.ui.save.button("loading"),this.save().done(function(){n.successNotify("保存成功。"),window.router.navigate("#list&is_display=0",{trigger:!0})}).fail(function(){e.ui.save.button("reset")})},handlePreview:function(){var e=this;this.ui.preview.button("loading"),this.preview().done(function(e){n.successNotify("保存成功，正在重定向到 预览页面。",function(){window.location.href=window._global.url.wap+"/showcase/feature?alias="+e.alias})}).fail(function(){e.ui.preview.button("reset")})}})}),function(e,t){function n(n,o){var l=this;l.$el=e(n),l.el=n,l.$el.bind("destroyed",e.proxy(l.teardown,l)),l.$window=e(t),l.$clonedHeader=null,l.$originalHeader=null,l.isSticky=!1,l.leftOffset=null,l.topOffset=null,l.init=function(){l.options=e.extend({},s,o),l.$el.each(function(){var t=e(this);t.css("padding",0),l.$originalHeader=e("thead:first",this),l.$clonedHeader=l.$originalHeader.clone(),l.$clonedHeader.addClass("tableFloatingHeader"),l.$clonedHeader.css("display","none"),l.$originalHeader.addClass("tableFloatingHeaderOriginal"),l.$originalHeader.after(l.$clonedHeader),l.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(l.$printStyle)}),l.updateWidth(),l.toggleHeaders(),l.bind()},l.destroy=function(){l.$el.unbind("destroyed",l.teardown),l.teardown()},l.teardown=function(){l.isSticky&&l.$originalHeader.css("position","static"),e.removeData(l.el,"plugin_"+i),l.unbind(),l.$clonedHeader.remove(),l.$originalHeader.removeClass("tableFloatingHeaderOriginal"),l.$originalHeader.css("visibility","visible"),l.$printStyle.remove(),l.el=null,l.$el=null},l.bind=function(){l.$window.on("scroll."+i,l.toggleHeaders),l.$window.on("resize."+i,l.toggleHeaders),l.$window.on("resize."+i,l.updateWidth)},l.unbind=function(){l.$window.off("."+i,l.toggleHeaders),l.$window.off("."+i,l.updateWidth),l.$el.off("."+i),l.$el.find("*").off("."+i)},l.toggleHeaders=function(){l.$el.each(function(){var t=e(this),n=isNaN(l.options.fixedOffset)?l.options.fixedOffset.height():l.options.fixedOffset,i=t.offset(),s=l.$window.scrollTop()+n,o=l.$window.scrollLeft();if(s>i.top&&s<i.top+t.height()-l.$clonedHeader.height()){var a=i.left-o;if(l.isSticky&&a===l.leftOffset&&n===l.topOffset)return;l.$originalHeader.css({position:"fixed",top:n,"margin-top":0,left:a,"z-index":1}),l.$clonedHeader.css("display",""),l.isSticky=!0,l.leftOffset=a,l.topOffset=n,l.updateWidth()}else l.isSticky&&(l.$originalHeader.css("position","static"),l.$clonedHeader.css("display","none"),l.isSticky=!1)})},l.updateWidth=function(){if(l.isSticky){var t=e("th,td",l.$originalHeader),n=e("th,td",l.$clonedHeader);l.cellWidths=[],l.getWidth(n),l.setWidth(n,t),l.$originalHeader.css("width",l.$clonedHeader.width())}},l.getWidth=function(t){t.each(function(t){var n,i=e(this);n="border-box"===i.css("box-sizing")?i.outerWidth():i.width(),l.cellWidths[t]=n})},l.setWidth=function(e,t){e.each(function(e){var n=l.cellWidths[e];t.eq(e).css({"min-width":n,"max-width":n})})},l.updateOptions=function(t){l.options=e.extend({},s,t),l.updateWidth(),l.toggleHeaders()},l.init()}var i="stickyTableHeaders",s={fixedOffset:0};e.fn[i]=function(t){return this.each(function(){var s=e.data(this,"plugin_"+i);s?"string"==typeof t?s[t].apply(s):s.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+i,new n(this,t))})}}(jQuery,window),define("stickytableheaders",["jquery"],function(){}),define("text!components/list/templates/list.html",[],function(){return'<div class="js-list-filter-region clearfix ui-box" style="position: relative; min-height: 28px;">\n\n</div>\n<div class="ui-box">\n    <table class="ui-table ui-table-list">\n        <thead class="js-list-header-region"></thead>\n        <tbody class="js-list-body-region"></tbody>\n    </table>\n    <div class="js-list-empty-region"></div>\n</div>\n<div class="js-list-footer-region ui-box"></div>\n'}),define("text!components/list/templates/list_filter.html",[],function(){return'<div class="js-list-search ui-search-box">\n    <input class="txt" type="text" placeholder="搜索" value="<%= keyword %>">\n</div>\n'}),define("text!templates/list_header.html",[],function(){return'<th class="checkbox">\n    <input type="checkbox" class="js-check-all">\n</th>\n<th class="cell-25">标题</th>\n<th class="cell-12"><a href="javascript:;" data-orderby="created_time">创建时间</a></th>\n<th class="cell-10 text-right"><a href="javascript:;" data-orderby="goods_num">商品数</a></th>\n<th class="cell-10">浏览UV/PV</th>\n<th class="cell-10">到店UV/PV</th>\n<th class="cell-8 text-right"><a href="javascript:;" data-orderby="num">序号</a></th>\n<th class="cell-25 text-right">操作</th>\n'}),define("text!templates/list_item.html",[],function(){return'<td class="checkbox">\n    <input type="checkbox" class="js-check-toggle" <% if(+checked) { %>checked="checked"<% } %>>\n</td>\n<td>\n    <a href="<%= url %>" target="_blank" class="new-window">\n        <%= title %>\n    </a>\n</td>\n<td><%= created_time %></td>\n<td class="text-right"><%= goods_num %></td>\n<td><%= bro_uvpv %></td>\n<td><%= shop_uvpv %></td>\n<td class="text-right">\n    <a class="js-change-num" href="javascript:void(0);"><%= num %></a>\n    <input class="input-mini js-input-num" type="number" min="0" maxlength="8" style="display: none;" value="<%= num %>">\n</td>\n<td class="text-right">\n    <a href="javascript:void(0);" class="js-copy hover-show">复制</a>\n    <span class="hover-show">-</span>\n    <a href="<%= _global.url.www %>/showcase/feature#edit/<%= item_id %>">编辑</a>\n    <span>-</span>\n    <a href="javascript:void(0);" class="js-delete">删除</a>\n    <span>-</span>\n    <a href="javascript:void(0);" class="js-copy-link">链接</a>\n</td>\n'
}),define("text!components/list/templates/list_empty.html",[],function(){return'<div class="no-result">还没有相关数据。</div>\n'}),define("text!components/list/templates/list_footer.html",[],function(){return'<div class="pagenavi"><%= page %></div>\n'}),define("components/list/models/list",["require","underscore","backbone","core/utils"],function(e){var t=e("underscore"),n=e("backbone"),i=e("core/utils"),s=window._global.url.www+window._global.query_path,o=n.Model.extend({url:s+"/list.json",defaults:function(){return{orderby:"created_time",order:"desc",keyword:"",p:"1",page:"",items:null}},fetch:function(){var e=this.getRequestData();this.trigger("before:fetch"),this.abortFetchingXHR();var n=i.ajax({url:this.url,data:e}).done(t.bind(function(e){e=this.parse(e),this.set(e,{silent:!0}),this.trigger("sync")},this)).fail(t.bind(function(e,t){-1!==t.code&&i.errorNotify(e)},this));return this._fetching_xhr=n.xhr,n},abortFetchingXHR:function(){var e=this._fetching_xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()},parse:function(e){var t=e.list;return delete e.list,this.get("items").reset(t,{silent:!0}),e},getRequestData:function(){var e=this.toJSON();return delete e.page,delete e.items,e},checkAll:function(){this.get("items").each(function(e){e.set("checked",1)})},uncheckAll:function(){this.get("items").each(function(e){e.set("checked",0)})},getCheckedItems:function(){return this.get("items").filter(function(e){return e.get("checked")})},getCheckedItemsId:function(){var e=this.getCheckedItems();return t.map(e,function(e){return e.get("item_id")})}});return o}),define("components/list/models/list_item",["require","backbone","core/utils"],function(e){var t=e("backbone"),n=e("core/utils"),i=window._global.url.www+window._global.query_path,s=t.Model.extend({idAttribute:"_id",defaults:{checked:0},url:{"delete":i+"/item.json",copy:i+"/copy.json",num:i+"/num.json",title:i+"/title.json"},sync:function(e){return e=e||{},n.ajax(e)},"delete":function(){return this.sync({url:this.url.delete,method:"DELETE",data:{id:this.getId()}})},copy:function(){return this.sync({url:this.url.copy,method:"POST",data:{id:this.getId()}})},num:function(e){return this.sync({url:this.url.num,method:"PUT",data:{id:this.getId(),num:e}})},rename:function(e){return this.sync({url:this.url.title,method:"PUT",data:{id:this.getId(),title:e}})},getId:function(){return this.get("item_id")||this.get("id")}});return s}),define("components/list/views/list_filter",["require","jquery","marionette","core/utils"],function(e){var t=e("jquery"),n=e("marionette"),i=e("core/utils");return n.Layout.extend({events:{"keypress .js-list-search input":"handleSearch"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.triggerMethod("init")},handleSearch:function(e){e.keyCode===i.keyCode.ENTER&&(this.model.set({keyword:t(e.currentTarget).val(),p:1},{silent:!0}),this.model.fetch())},onClose:function(){this.options=null,this.layout=null}})}),define("components/list/views/list_header",["require","jquery","marionette"],function(e){var t=e("jquery"),n=e("marionette");return n.ItemView.extend({tagName:"tr",events:{"click a":"handleOrder","change .js-check-all":"handleCheckAll"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.triggerMethod("init")},onRender:function(){var e=this.model.toJSON(),n=this.$("[data-orderby="+e.orderby+"]"),i=t('<span class="orderby-arrow"></span>').addClass(e.order);n.append(i)},handleOrder:function(e){var n=t(e.currentTarget),i=n.data("orderby");i&&(i==this.model.get("orderby")?this.model.set("order","asc"===this.model.get("order")?"desc":"asc",{silent:!0}):this.model.set("orderby",i,{silent:!0}),this.model.set("p",1,{silent:!0}),this.model.fetch())},handleCheckAll:function(e){t(e.currentTarget).prop("checked")?this.model.checkAll():this.model.uncheckAll()},onClose:function(){this.options=null,this.layout=null}})}),define("components/list/views/list_body",["require","marionette"],function(e){var t=e("marionette");return t.CollectionView.extend({initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.triggerMethod("init")},onClose:function(){this.options=null,this.layout=null}})}),define("components/list/views/list_item",["require","underscore","jquery","marionette","core/utils","components/pop/pop"],function(e){var t=e("underscore"),n=e("jquery"),i=e("marionette"),s=e("core/utils"),o=e("components/pop/pop");return i.ItemView.extend({tagName:"tr",events:{"click .js-check-toggle":"handleCheckToggle","click .js-copy":"handleCopy","click .js-delete":"handleDelete","click .js-copy-link":"handleCopyLink","click .js-change-num":"handleChangeNum","blur .js-input-num":"handleInputNumBlur","keypress .js-input-num":"handleInputNumKeypress","click .js-rename":"handleRename"},modelEvents:{change:"render"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.triggerMethod("init")},serializeData:function(){return t.extend({queryData:this.layout.model.getRequestData()},this.model.toJSON())},handleCheckToggle:function(e){this.model.set("checked",n(e.currentTarget).prop("checked"),{silent:!0})},handleCopy:function(e){var t=this;o.initialize({type:"confirm",target:e.target,data:"确定复制？",className:"popover left",callback:function(){t.model.copy().done(function(){t.layout.model.fetch(),s.successNotify("复制成功。")}).fail(function(e){s.errorNotify(e)})}})},handleDelete:function(e){var t=this;o.initialize({type:"delete",target:e.target,callback:function(){t.model.delete().done(function(){t.$el.css("background","#F3E59A").hide(500,function(){t.layout.model.fetch()})}).fail(function(e){s.errorNotify(e)})}})},handleCopyLink:function(e){o.initialize({type:"url",target:e.target,data:this.model.get("url")})},handleChangeNum:function(){this.$(".js-change-num").hide(),this.$(".js-input-num").show().focus()},handleInputNumKeypress:function(e){e.keyCode===s.keyCode.ENTER&&this.handleInputNumBlur(e)},handleInputNumBlur:function(e){var t=n(e.currentTarget).val(),i=this;t&&this.model.num(t).done(function(){i.model.set("num",t)}).fail(function(e){s.errorNotify(e)}),this.$(".js-input-num").hide(),this.$(".js-change-num").show()},handleRename:function(e){o.initialize({type:"rename",target:e.target,data:this.model.get("title"),callback:t.bind(this._renameCallback,this)})},_renameCallback:function(e){var t=this;this.model.rename(e).done(function(){s.successNotify("改名成功。"),t.model.set("title",e)}).fail(function(e){s.errorNotify(e)})},onClose:function(){this.options=null,this.layout=null}})}),define("components/list/views/list_footer",["require","jquery","marionette","core/utils"],function(e){var t=e("jquery"),n=e("marionette"),i=e("core/utils");return n.ItemView.extend({events:{"click .pagenavi a:not(.active)":"handlePageNumClick","keypress .pagenavi a.active":"handlePageNumKeypress"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.triggerMethod("init")},handlePageNumClick:function(e){var n=t(e.currentTarget),i=n.data("page-num");this.model.set("p",i,{silent:!0}),this.model.fetch()},handlePageNumKeypress:function(e){var n=+t(e.currentTarget).text();i.isNumber(e)||e.preventDefault(),e.keyCode===i.keyCode.ENTER&&(n!==+this.model.get("p")&&n&&(this.model.set("p",n,{silent:!0}),this.model.fetch({scroll:!0})),e.preventDefault())},onClose:function(){this.options=null,this.layout=null}})}),define("components/list/views/list",["require","underscore","jquery","backbone","vendor/nprogress","marionette","stickytableheaders","text!components/list/templates/list.html","text!components/list/templates/list_filter.html","text!templates/list_header.html","text!templates/list_item.html","text!components/list/templates/list_empty.html","text!components/list/templates/list_footer.html","components/list/models/list","components/list/models/list_item","components/list/views/list_filter","components/list/views/list_header","components/list/views/list_body","components/list/views/list_item","components/list/views/list_footer"],function(e){var t=e("underscore"),n=e("jquery"),i=e("backbone"),s=e("vendor/nprogress"),o=e("marionette");e("stickytableheaders");var l={listTemplate:t.template(e("text!components/list/templates/list.html")),listFilterTemplate:t.template(e("text!components/list/templates/list_filter.html")),listHeaderTemplate:t.template(e("text!templates/list_header.html")),listItemTemplate:t.template(e("text!templates/list_item.html")),listEmptyTemplate:t.template(e("text!components/list/templates/list_empty.html")),listFooterTemplate:t.template(e("text!components/list/templates/list_footer.html")),ListModel:e("components/list/models/list"),ListItemModel:e("components/list/models/list_item"),ListFilterView:e("components/list/views/list_filter"),ListHeaderView:e("components/list/views/list_header"),ListBodyView:e("components/list/views/list_body"),ListItemView:e("components/list/views/list_item"),ListFooterView:e("components/list/views/list_footer")},a=o.Layout.extend({defaults:{},ui:{body:".js-list-body-region"},regions:{filterRegion:".js-list-filter-region",headerRegion:".js-list-header-region",emptyRegion:".js-list-empty-region",footerRegion:".js-list-footer-region"},initialize:function(e){this.listItemViews=[],this.cache={},this.options=t.defaults(e||{},this.defaults,l),this.template=this.options.listTemplate,this.model=new this.options.ListModel(t.extend({},this.options.query,{items:new i.Collection(null,{model:this.options.ListItemModel})})),this.listenTo(this.model,"before:fetch",this.addLoading),this.listenTo(this.model,"sync",this.removeLoading),this.listenTo(this.model,"sync",this.fetched),this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"sync",this.setHash),this.model.fetch(),this.triggerMethod("init",e),window.NC.trigger("finish")},fetched:function(){this.model.fetched=!0},onRender:function(){var e=this.model.get("items");this.model.fetched&&(e&&e.length>0?this.renderView():(this.renderFilterView(),this.renderEmptyView()))},renderView:function(){this.renderFilterView(),this.renderHeaderView(),this.renderBodyView(),this.renderFooterView(),this.stickyTableHeaders(),this.scrollToTableHeaders()},renderFilterView:function(){this.filterRegion.show(new this.options.ListFilterView({template:this.options.listFilterTemplate,model:this.model,layout:this}))},renderHeaderView:function(){this.headerRegion.show(new this.options.ListHeaderView({template:this.options.listHeaderTemplate,model:this.model,layout:this}))},renderBodyView:function(){var e=document.createDocumentFragment(),t=this;this.closeListItemViews(),this.model.get("items").each(function(n){var i=new t.options.ListItemView({template:t.options.listItemTemplate,model:n,layout:t});t.listItemViews.push(i),e.appendChild(i.render().el)}),this.ui.body.append(e)},renderFooterView:function(){this.footerRegion.show(new this.options.ListFooterView({template:this.options.listFooterTemplate,model:this.model,layout:this}))},renderEmptyView:function(){this.emptyRegion.show(new o.ItemView({template:this.options.listEmptyTemplate,model:this.model,layout:this}))},closeListItemViews:function(){t.each(this.listItemViews,function(e){e.close()})},stickyTableHeaders:function(){this.$("table").stickyTableHeaders("destroy"),this.$("table").stickyTableHeaders()},scrollToTableHeaders:function(){var e=this.$("table");if(e.length){var t=e.offset().top;n(window).scrollTop()>t&&n("body, html").animate({scrollTop:t},200)}},addLoading:function(){s.start()},removeLoading:function(){s.done(),n(".js-app-main").removeClass("loading")},close:function(){this.closeListItemViews(),o.Layout.prototype.close.call(this)},fetchAssistData:function(e){e=t.extend({},{cache:!0},e);var i=this,s=n.Deferred(),o=e.key,l=e.url,a=e.data;return e.cache&&i.cache[o]?s.resolve(i.cache[o]):n.get(l,a).done(function(e){i.cache[o]=e,s.resolve(e)}).fail(function(e){s.reject(e)}),s.promise()},setHash:function(){if(this.model.fetched&&window.router){var e=this.model.getRequestData();window.router.navigate("list&"+n.param(e),{trigger:!1,replace:!0})}}});return a}),define("text!templates/list_filter.html",[],function(){return'<a href="javascript:;" class="ui-btn ui-btn-primary js-create-template">新建微杂志</a>\n<div class="js-list-category-filter ui-chosen" style="width: 200px;">\n    <select class="hide" data-placeholder="">\n        <option value="0">0</option>\n        <option value="1">1</option>\n        <option value="2">2</option>\n    </select>\n</div>\n<div class="js-list-search ui-search-box">\n    <input class="txt" type="text" placeholder="搜索" value="<%= keyword %>">\n</div>\n'}),define("views/list_filter",["require","underscore","jquery","components/list/views/list_filter","components/pop/pop"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/list/views/list_filter"),s=e("components/pop/pop");return i.extend({ui:{category:".js-list-category-filter select"},events:t.extend({},i.prototype.events,{"click .js-create-template":"handleCreateClick","change @ui.category":"handleCategoryChange"}),onInit:function(){},onRender:function(){this.renderCategoryOptions()},renderCategoryOptions:function(){var e=this;this.layout.fetchCategoryOptions("filter:category",{"default":1}).done(function(t){var i=e.model.get("category")||"0";e.ui.category.html(t),e.ui.category.prepend('<option value="0">全部分类</option>'),n("option[value="+i+"]",e.ui.category).prop("selected",!0),e.ui.category.chosen({no_results_text:"木有找到这个分类："}).trigger("chosen:updated")})},handleCategoryChange:function(e){var t=n(e.target).val();this.model.set({category:t,p:1},{silent:!0}),this.model.fetch()},handleCreateClick:function(e){var t=n(e.target);s.initialize({type:"template",target:t,trigger:t,className:"popover left-bottom bottom"})}})}),define("text!templates/list_footer.html",[],function(){return'<div class="pull-left">\n    <a href="javascript:;" class="ui-btn js-batch-category">批量改分类</a>\n</div>\n<div class="pagenavi"><%= page %></div>\n'}),define("views/list_footer",["require","underscore","jquery","components/list/views/list_footer","core/utils","components/pop/pop"],function(e){var t=e("underscore"),n=e("jquery"),i=e("components/list/views/list_footer"),s=e("core/utils"),o=e("components/pop/pop");return i.extend({events:t.extend(i.prototype.events,{"click .js-batch-category":"handleBatchCategory"}),handleBatchCategory:function(e){return 0===this.model.getCheckedItemsId().length?void s.errorNotify("请选择微杂志。"):void this.openCategoryPopover(e)},openCategoryPopover:function(e){var i=n(e.target);o.initialize({type:"change_category",target:i,callback:t.bind(this.comfirmCallback,this)}),this.layout.fetchCategoryOptions("footer:category").done(function(e){var t=n("#js-change-category"),i=n("#js-change-category select");i.html(e),i.chosen({no_results_text:"木有找到这个分类："}),n(".chosen-drop",t).css({bottom:"100%",top:"auto"}),t.removeClass("loading")})},comfirmCallback:function(){var e=this,t=n("#js-change-category select"),i={featureid:this.model.getCheckedItemsId(),categoryid:t.val()};s.ajax({url:window._global.url.www+"/showcase/feature/category.json",method:"PUT",data:i}).done(function(){s.successNotify("分类成功。"),e.model.uncheckAll()}).fail(function(){s.errorNotify("分类失败。")})}})}),define("views/list",["require","underscore","components/list/views/list","text!templates/list_filter.html","views/list_filter","text!templates/list_footer.html","views/list_footer"],function(e){var t=e("underscore"),n=e("components/list/views/list");return n.extend({defaults:{listFilterTemplate:t.template(e("text!templates/list_filter.html")),ListFilterView:e("views/list_filter"),listFooterTemplate:t.template(e("text!templates/list_footer.html")),ListFooterView:e("views/list_footer")},onInit:function(){this.cache={}},fetchCategoryOptions:function(e,t){return this.fetchAssistData({url:window._global.url.www+"/showcase/category/option",key:e,data:t})}})}),define("routers/router",["require","backbone","underscore","vendor/nprogress","components/page_help/help","views/design","views/list","core/utils"],function(e){var t=e("backbone"),n=e("underscore"),i=e("vendor/nprogress"),s=e("components/page_help/help"),o=e("views/design"),l=e("views/list"),a=e("core/utils");return t.Router.extend({routes:{"edit/:id":"edit","create/:id":"create","list*query":"list","":"list"},initialize:function(e){this.options=e||{},this.app=this.options.app,this.cache={}},edit:function(e){a.navActive(""),i.start(),this.app.mainRegion.show(new o({id:e,localStorage:!0})),i.done(),this.app.mainRegion.$el.removeClass("loading"),s("showcase_feature_create")},create:function(e){a.clearNotify(),a.navActive("#js-nav-create"),i.start(),this.app.mainRegion.show(new o({create_id:e,isCreating:!0,localStorage:!0})),i.done(),this.app.mainRegion.$el.removeClass("loading"),s("showcase_feature_create")},list:function(e){e=a.deparam(e),e=n.extend({is_display:1,keyword:"",p:1},e),a.navActive(0===+e.is_display?"#js-nav-list-draft":"#js-nav-list-index"),this.cache.listView&&this.app.mainRegion.currentView===this.cache.listView?(this.cache.listView.model.set(e,{silent:!0}),this.cache.listView.model.fetch()):(i.start(),this.cache.listView=new l({query:e}),this.app.mainRegion.show(this.cache.listView),i.done()),s("showcase_feature")}})});var DEFAULT_TIMEOUT=6e4;FSocket.prototype.getRId=function(){var e=this,t=e.requestID;return e.requestID++,e.requestID>1e6&&(e.requestID=1),t};var temp={};temp.type="heart";var HEARTMESSAGE=JSON.stringify(temp),HINTERVAL=6e4;FSocket.prototype.connect=function(e,t){var n=this;n.ws=new WebSocket(e),n.ws.onopen=function(){n.isOpen=!0,n.interval=setInterval(function(){n.intervalCheck()},HINTERVAL),t()},n.ws.onclose=function(){n.close()},n.ws.onerror=function(){n.close()},n.ws.onmessage=function(e){n.getCount<0?n.getCount=1:n.getCount+=1;var t=JSON.parse(e.data);if("message"==t.type)n.processMessage&&n.processMessage(t.message);else if("reply"==t.type){var i=n.requests[t.requestID];i&&(delete n.requests[t.requestID],t.success?i(null,t.data):i("调用错误"))}else if("request"==t.type){var s=t.requestID,o=t.method,l=t.args;n.processRequest(o,l,function(e,t){var i={};e?i.success=!1:(i.success=!0,i.data=t),i.type="reply",i.requestID=s,n._send(JSON.stringify(i))})}}},FSocket.prototype.processRequest=function(e,t,n){var i=this;if(i.requestHandlers[e]){var s=i.requestHandlers[e];s(t,function(e,t){n(e,t)})}else n("没有这个方法")},FSocket.prototype.addHandler=function(e,t){var n=this;n.requestHandlers[e]=t},FSocket.prototype.intervalCheck=function(){var e=this;e.sendCount>0?e.sendCount=0:e._send(HEARTMESSAGE),e.getCount>0?e.getCount=0:(e.getCount-=1,e.getCount<-5&&e.close())},FSocket.prototype.regist=function(e,t){var n=this;n.eventHandlers[e]||(n.eventHandlers[e]=[]),n.eventHandlers[e].push(t)},FSocket.prototype.fire=function(e){var t=this;if(t.eventHandlers[e])for(var n=0;n<t.eventHandlers[e].length;n++){var i=t.eventHandlers[e][n];i()}},FSocket.prototype.close=function(){var e=this;e.isOpen&&e.fire("close"),e.isOpen=!1,clearInterval(e.interval);for(var t in e.requests){var n=e.requests[t];n("连接异常")}e.requests={},e.ws&&e.ws.close()},FSocket.prototype.sendMessage=function(e){var t=this;t.sendCount+=1;var n={};n.type="message",n.message=e;var i=JSON.stringify(n);t._send(i)},FSocket.prototype.request=function(e,t,n){var i=this;i.isOpen||n("连接异常"),i.sendCount+=1;var s={};s.method=e,s.args=t,s.type="request",s.requestID=i.getRId(),i.requests[s.requestID]=n,setTimeout(function(){var e=i.requests[s.requestID];e&&(delete i.requests[s.requestID],e("超时"))},DEFAULT_TIMEOUT);var t=JSON.stringify(s);i._send(t)},FSocket.prototype._send=function(e){var t=this;t.isOpen&&t.ws.send(e)},define("components/wsocket/fsocket",function(){}),define("components/message/model",["require","underscore","backbone","components/wsocket/fsocket"],function(e){var t=(e("underscore"),e("backbone"));e("components/wsocket/fsocket");var n=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),i=t.Model.extend({defaults:{weixin_unread:0,weibo_unread:0,order_unread:0},initialize:function(){var e=this;e.init()},init:function(){var e=this;e.socket=new FSocket,e.connect(),e.handleDisconnect(),e.handleMessage()},connect:function(){var e=this,t=window._global.url.ws;e.socket.connect(t,function(){e.resetTryCounter();var t=n(),i=JSON.stringify({mp_id:window._global.kdt_id,client_id:t,admin_id:window._global.user_id,con_type:"unread_count"});e.socket.request("inner_setKey",i,function(e,t){})})},resetTryCounter:function(){var e=this;e.tryCounter=0,e.tryTimer&&window.clearTimeout(e.tryTimer)},handleDisconnect:function(){var e=this;e.socket.regist("close",function(){e.tryTimer=setTimeout(function(){},1e4),e.tryReconnect()})},tryReconnect:function(){var e=this;e.tryCounter+=1,e.connect()},handleMessage:function(){var e=this;e.socket.addHandler("message",function(t,n){n(null,"message_received");var i=JSON.parse(t);e.set(i)})}});return i}),define("text!components/notify/templates/notify.html",[],function(){return'<div class="alert">\n    <button type="button" class="js-close close" data-dismiss="alert">&times;</button>\n    <div class="notify-cont">\n        <% var wb_total = wb_at_number + wb_tome_number + wb_private_number; %>\n        <% if (wx_number > 0) { %>\n        微信：你有 <a href="<%=wx_url %>"><%=wx_number %></a> 条未读信息<% if (wb_total > 0) { %>；&nbsp;&nbsp;&nbsp;&nbsp;<% } else { %>。<% } %>\n        <% } %>\n    </div>\n    <div class="notify-setting">\n        <% if (audio) { %>\n        <a href="javascript:void(0);" class="js-toggle-audio audio-on">\n            已开启\n        </a>\n        <% } else { %>\n        <a href="javascript:void(0);" class="js-toggle-audio audio-off">\n            已关闭\n        </a>\n        <% } %>\n    </div>\n</div>\n'}),define("components/notify/notify",["backbone","text!components/notify/templates/notify.html"],function(e,t){var n,i=e.View.extend({el:".js-notify",template:_.template(t),events:{"click .js-close":"close","click .js-toggle-audio":"toggleAudio"},initialize:function(){this.status={wx_url:"",wx_number:0,wb_at_url:"",wb_at_number:0,wb_private_url:"",wb_private_number:0,wb_tome_url:"",wb_tome_number:0},this.statekey="mp-"+window._global.mp_id+"-adm-"+window._global.user_id+"-msg"},render:function(){this.$el.html(this.template(this.status))},close:function(){this.$el.removeClass("fadeInUpBig"),window.NC.trigger("notify:close")},show:function(){this.$el.removeClass("hide"),this.$el.addClass("fadeInUpBig"),window.NC.trigger("notify:show")},hide:function(){this.$el.removeClass("fadeInUpBig"),this.$el.addClass("hide"),window.NC.trigger("notify:close")},setStatus:function(e){_.isObject(e)&&(this.status=e),this.canPlayAudio(),this.render(),this.show()},clear:function(){this.remove()},canPlayAudio:function(){var e;e=window.localStorage?"1"==window.localStorage.getItem(this.statekey+"-playAudio")?!0:!1:!0,this.status.audio=e},toggleAudio:function(){window.localStorage&&(this.status.audio?window.localStorage.setItem(this.statekey+"-playAudio",0):window.localStorage.setItem(this.statekey+"-playAudio",1)),this.setStatus()}});return{initialize:function(e){return _.isUndefined(n)&&(n=new i),_.isObject(e)&&n.setStatus(e),n}}}),define("components/message/view",["require","underscore","backbone","components/notify/notify","core/event"],function(e){var t=(e("underscore"),e("backbone")),n=e("components/notify/notify");e("core/event");var i=t.View.extend({initialize:function(){var e=this;e.initNotifyConfig(),e.initTitleNotify(),e.initSoundNotify(),e.listenTo(e.model,"change",e.showNotify),window.NC.on("notify:close",e.stopNotify,e)},initNotifyConfig:function(){var e=this,t=window._global.kdt_id,n=window._global.user_id;e.stateKey="mp-"+t+"-adm-"+n+"-msg"},initTitleNotify:function(){var e=this;e.titleTimer=null,e.titleNotifying=!1,e.originalTitle=document.title,e.titleNotifyMsg="您有未读消息"},render:function(){var e=this;return e},showNotify:function(){var e=this;e.showNotifyBar(),e.stopTitleNotify(),e.showTitleNotify(),e.playNotifySound()},stopNotify:function(){var e=this;e.stopTitleNotify()},showNotifyBar:function(){var e=this,t=e.model.get("weixin_unread");n.initialize({wx_number:t,wx_url:window._global.url.v1+"/messages/my?type=unread",wb_tome_number:0,wb_tome_url:"",wb_private_number:0,wb_private_url:"",wb_at_number:0,wb_at_url:""})},switchTitle:function(){var e=this;document.title=e.titleNotifying?e.originalTitle:e.titleNotifyMsg,e.titleNotifying=!e.titleNotifying},showTitleNotify:function(){var e=this;e.switchTitle(),e.titleTimer=window.setTimeout(function(){e.showTitleNotify()},1e3)},stopTitleNotify:function(){var e=this;window.clearTimeout(e.titleTimer),e.titleTimer=null,document.title=e.originalTitle,e.titleNotifying=!1},initSoundNotify:function(){var e=this;return e.checkAudioSupport(),e.isSupportAudio?(e.notifySound=new Audio,void(e.notifySound.src=window._global.url.static+"/media/notify.wav")):!1},checkAudioSupport:function(){var e=this;e.isSupportAudio=!!document.createElement("audio").canPlayType},playNotifySound:function(){var e=this,t=window.localStorage.getItem(e.stateKey+"-playAudio"),n="0"===t;return!e.isSupportAudio||n?!1:void e.notifySound.play()},showDesktopNotify:function(){}});return i}),define("components/message/message_bot_lite",["require","underscore","backbone","core/utils","components/message/model","components/message/view"],function(e){var t=(e("underscore"),e("backbone"),e("core/utils"),e("components/message/model")),n=e("components/message/view"),i={init:function(){var e=this;return window._global.js.message_report?1!=_global.team_status.weixin_server&&1!=_global.team_status.weixin_oldsub?!1:void e._init():!1},_init:function(){var e=this;e.messageModel=new t;new n({el:"body",model:e.messageModel})}};return i}),define("main",["require","common","components/validation/validate","app","backbone","routers/router","components/message/message_bot_lite"],function(e){e("common"),e("components/validation/validate");var t=e("app"),n=e("backbone"),i=e("routers/router"),s=e("components/message/message_bot_lite");s.init(),window.router=new i({app:t}),n.history.start()});